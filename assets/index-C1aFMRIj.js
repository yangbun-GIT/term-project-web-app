(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function eh(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const $e={},Wr=[],Dn=()=>{},cg=()=>!1,El=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),th=t=>t.startsWith("onUpdate:"),_t=Object.assign,nh=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},hw=Object.prototype.hasOwnProperty,xe=(t,e)=>hw.call(t,e),ue=Array.isArray,zr=t=>Fo(t)==="[object Map]",di=t=>Fo(t)==="[object Set]",ud=t=>Fo(t)==="[object Date]",Ee=t=>typeof t=="function",tt=t=>typeof t=="string",jn=t=>typeof t=="symbol",Ue=t=>t!==null&&typeof t=="object",ug=t=>(Ue(t)||Ee(t))&&Ee(t.then)&&Ee(t.catch),hg=Object.prototype.toString,Fo=t=>hg.call(t),fw=t=>Fo(t).slice(8,-1),fg=t=>Fo(t)==="[object Object]",wl=t=>tt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,to=eh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Tl=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},dw=/-\w/g,fn=Tl(t=>t.replace(dw,e=>e.slice(1).toUpperCase())),pw=/\B([A-Z])/g,zs=Tl(t=>t.replace(pw,"-$1").toLowerCase()),Il=Tl(t=>t.charAt(0).toUpperCase()+t.slice(1)),Rc=Tl(t=>t?`on${Il(t)}`:""),Ds=(t,e)=>!Object.is(t,e),Ra=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},dg=(t,e,n,s=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:s,value:n})},Al=t=>{const e=parseFloat(t);return isNaN(e)?t:e},mw=t=>{const e=tt(t)?Number(t):NaN;return isNaN(e)?t:e};let hd;const bl=()=>hd||(hd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Uo(t){if(ue(t)){const e={};for(let n=0;n<t.length;n++){const s=t[n],r=tt(s)?vw(s):Uo(s);if(r)for(const i in r)e[i]=r[i]}return e}else if(tt(t)||Ue(t))return t}const gw=/;(?![^(]*\))/g,_w=/:([^]+)/,yw=/\/\*[^]*?\*\//g;function vw(t){const e={};return t.replace(yw,"").split(gw).forEach(n=>{if(n){const s=n.split(_w);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function qe(t){let e="";if(tt(t))e=t;else if(ue(t))for(let n=0;n<t.length;n++){const s=qe(t[n]);s&&(e+=s+" ")}else if(Ue(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Ew="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ww=eh(Ew);function pg(t){return!!t||t===""}function Tw(t,e){if(t.length!==e.length)return!1;let n=!0;for(let s=0;n&&s<t.length;s++)n=Bo(t[s],e[s]);return n}function Bo(t,e){if(t===e)return!0;let n=ud(t),s=ud(e);if(n||s)return n&&s?t.getTime()===e.getTime():!1;if(n=jn(t),s=jn(e),n||s)return t===e;if(n=ue(t),s=ue(e),n||s)return n&&s?Tw(t,e):!1;if(n=Ue(t),s=Ue(e),n||s){if(!n||!s)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const o in t){const l=t.hasOwnProperty(o),c=e.hasOwnProperty(o);if(l&&!c||!l&&c||!Bo(t[o],e[o]))return!1}}return String(t)===String(e)}function sh(t,e){return t.findIndex(n=>Bo(n,e))}const mg=t=>!!(t&&t.__v_isRef===!0),Qe=t=>tt(t)?t:t==null?"":ue(t)||Ue(t)&&(t.toString===hg||!Ee(t.toString))?mg(t)?Qe(t.value):JSON.stringify(t,gg,2):String(t),gg=(t,e)=>mg(e)?gg(t,e.value):zr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[s,r],i)=>(n[Cc(s,i)+" =>"]=r,n),{})}:di(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Cc(n))}:jn(e)?Cc(e):Ue(e)&&!ue(e)&&!fg(e)?String(e):e,Cc=(t,e="")=>{var n;return jn(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pt;class _g{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Pt,!e&&Pt&&(this.index=(Pt.scopes||(Pt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Pt;try{return Pt=this,e()}finally{Pt=n}}}on(){++this._on===1&&(this.prevScope=Pt,Pt=this)}off(){this._on>0&&--this._on===0&&(Pt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function yg(t){return new _g(t)}function vg(){return Pt}function Iw(t,e=!1){Pt&&Pt.cleanups.push(t)}let je;const Pc=new WeakSet;class Eg{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Pt&&Pt.active&&Pt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Pc.has(this)&&(Pc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Tg(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,fd(this),Ig(this);const e=je,n=yn;je=this,yn=!0;try{return this.fn()}finally{Ag(this),je=e,yn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)oh(e);this.deps=this.depsTail=void 0,fd(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Pc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){iu(this)&&this.run()}get dirty(){return iu(this)}}let wg=0,no,so;function Tg(t,e=!1){if(t.flags|=8,e){t.next=so,so=t;return}t.next=no,no=t}function rh(){wg++}function ih(){if(--wg>0)return;if(so){let e=so;for(so=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;no;){let e=no;for(no=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(s){t||(t=s)}e=n}}if(t)throw t}function Ig(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ag(t){let e,n=t.depsTail,s=n;for(;s;){const r=s.prevDep;s.version===-1?(s===n&&(n=r),oh(s),Aw(s)):e=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=r}t.deps=e,t.depsTail=n}function iu(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(bg(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function bg(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===vo)||(t.globalVersion=vo,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!iu(t))))return;t.flags|=2;const e=t.dep,n=je,s=yn;je=t,yn=!0;try{Ig(t);const r=t.fn(t._value);(e.version===0||Ds(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{je=n,yn=s,Ag(t),t.flags&=-3}}function oh(t,e=!1){const{dep:n,prevSub:s,nextSub:r}=t;if(s&&(s.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=s,t.nextSub=void 0),n.subs===t&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)oh(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Aw(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let yn=!0;const Sg=[];function ss(){Sg.push(yn),yn=!1}function rs(){const t=Sg.pop();yn=t===void 0?!0:t}function fd(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=je;je=void 0;try{e()}finally{je=n}}}let vo=0;class bw{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ah{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!je||!yn||je===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==je)n=this.activeLink=new bw(je,this),je.deps?(n.prevDep=je.depsTail,je.depsTail.nextDep=n,je.depsTail=n):je.deps=je.depsTail=n,Rg(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=je.depsTail,n.nextDep=void 0,je.depsTail.nextDep=n,je.depsTail=n,je.deps===n&&(je.deps=s)}return n}trigger(e){this.version++,vo++,this.notify(e)}notify(e){rh();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ih()}}}function Rg(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let s=e.deps;s;s=s.nextDep)Rg(s)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Ha=new WeakMap,pr=Symbol(""),ou=Symbol(""),Eo=Symbol("");function Ot(t,e,n){if(yn&&je){let s=Ha.get(t);s||Ha.set(t,s=new Map);let r=s.get(n);r||(s.set(n,r=new ah),r.map=s,r.key=n),r.track()}}function Jn(t,e,n,s,r,i){const o=Ha.get(t);if(!o){vo++;return}const l=c=>{c&&c.trigger()};if(rh(),e==="clear")o.forEach(l);else{const c=ue(t),u=c&&wl(n);if(c&&n==="length"){const h=Number(s);o.forEach((d,m)=>{(m==="length"||m===Eo||!jn(m)&&m>=h)&&l(d)})}else switch((n!==void 0||o.has(void 0))&&l(o.get(n)),u&&l(o.get(Eo)),e){case"add":c?u&&l(o.get("length")):(l(o.get(pr)),zr(t)&&l(o.get(ou)));break;case"delete":c||(l(o.get(pr)),zr(t)&&l(o.get(ou)));break;case"set":zr(t)&&l(o.get(pr));break}}ih()}function Sw(t,e){const n=Ha.get(t);return n&&n.get(e)}function Lr(t){const e=Ne(t);return e===t?e:(Ot(e,"iterate",Eo),rn(t)?e:e.map(wn))}function Sl(t){return Ot(t=Ne(t),"iterate",Eo),t}function Is(t,e){return is(t)?Vn(t)?Zr(wn(e)):Zr(e):wn(e)}const Rw={__proto__:null,[Symbol.iterator](){return kc(this,Symbol.iterator,t=>Is(this,t))},concat(...t){return Lr(this).concat(...t.map(e=>ue(e)?Lr(e):e))},entries(){return kc(this,"entries",t=>(t[1]=Is(this,t[1]),t))},every(t,e){return Wn(this,"every",t,e,void 0,arguments)},filter(t,e){return Wn(this,"filter",t,e,n=>n.map(s=>Is(this,s)),arguments)},find(t,e){return Wn(this,"find",t,e,n=>Is(this,n),arguments)},findIndex(t,e){return Wn(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Wn(this,"findLast",t,e,n=>Is(this,n),arguments)},findLastIndex(t,e){return Wn(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Wn(this,"forEach",t,e,void 0,arguments)},includes(...t){return Nc(this,"includes",t)},indexOf(...t){return Nc(this,"indexOf",t)},join(t){return Lr(this).join(t)},lastIndexOf(...t){return Nc(this,"lastIndexOf",t)},map(t,e){return Wn(this,"map",t,e,void 0,arguments)},pop(){return $i(this,"pop")},push(...t){return $i(this,"push",t)},reduce(t,...e){return dd(this,"reduce",t,e)},reduceRight(t,...e){return dd(this,"reduceRight",t,e)},shift(){return $i(this,"shift")},some(t,e){return Wn(this,"some",t,e,void 0,arguments)},splice(...t){return $i(this,"splice",t)},toReversed(){return Lr(this).toReversed()},toSorted(t){return Lr(this).toSorted(t)},toSpliced(...t){return Lr(this).toSpliced(...t)},unshift(...t){return $i(this,"unshift",t)},values(){return kc(this,"values",t=>Is(this,t))}};function kc(t,e,n){const s=Sl(t),r=s[e]();return s!==t&&!rn(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=n(i.value)),i}),r}const Cw=Array.prototype;function Wn(t,e,n,s,r,i){const o=Sl(t),l=o!==t&&!rn(t),c=o[e];if(c!==Cw[e]){const d=c.apply(t,i);return l?wn(d):d}let u=n;o!==t&&(l?u=function(d,m){return n.call(this,Is(t,d),m,t)}:n.length>2&&(u=function(d,m){return n.call(this,d,m,t)}));const h=c.call(o,u,s);return l&&r?r(h):h}function dd(t,e,n,s){const r=Sl(t);let i=n;return r!==t&&(rn(t)?n.length>3&&(i=function(o,l,c){return n.call(this,o,l,c,t)}):i=function(o,l,c){return n.call(this,o,Is(t,l),c,t)}),r[e](i,...s)}function Nc(t,e,n){const s=Ne(t);Ot(s,"iterate",Eo);const r=s[e](...n);return(r===-1||r===!1)&&Rl(n[0])?(n[0]=Ne(n[0]),s[e](...n)):r}function $i(t,e,n=[]){ss(),rh();const s=Ne(t)[e].apply(t,n);return ih(),rs(),s}const Pw=eh("__proto__,__v_isRef,__isVue"),Cg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(jn));function kw(t){jn(t)||(t=String(t));const e=Ne(this);return Ot(e,"has",t),e.hasOwnProperty(t)}class Pg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,s){if(n==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return i;if(n==="__v_raw")return s===(r?i?Bw:Dg:i?Og:Ng).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(s)?e:void 0;const o=ue(e);if(!r){let c;if(o&&(c=Rw[n]))return c;if(n==="hasOwnProperty")return kw}const l=Reflect.get(e,n,We(e)?e:s);if((jn(n)?Cg.has(n):Pw(n))||(r||Ot(e,"get",n),i))return l;if(We(l)){const c=o&&wl(n)?l:l.value;return r&&Ue(c)?lu(c):c}return Ue(l)?r?lu(l):$o(l):l}}class kg extends Pg{constructor(e=!1){super(!1,e)}set(e,n,s,r){let i=e[n];const o=ue(e)&&wl(n);if(!this._isShallow){const u=is(i);if(!rn(s)&&!is(s)&&(i=Ne(i),s=Ne(s)),!o&&We(i)&&!We(s))return u||(i.value=s),!0}const l=o?Number(n)<e.length:xe(e,n),c=Reflect.set(e,n,s,We(e)?e:r);return e===Ne(r)&&(l?Ds(s,i)&&Jn(e,"set",n,s):Jn(e,"add",n,s)),c}deleteProperty(e,n){const s=xe(e,n);e[n];const r=Reflect.deleteProperty(e,n);return r&&s&&Jn(e,"delete",n,void 0),r}has(e,n){const s=Reflect.has(e,n);return(!jn(n)||!Cg.has(n))&&Ot(e,"has",n),s}ownKeys(e){return Ot(e,"iterate",ue(e)?"length":pr),Reflect.ownKeys(e)}}class Nw extends Pg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Ow=new kg,Dw=new Nw,Vw=new kg(!0);const au=t=>t,ga=t=>Reflect.getPrototypeOf(t);function xw(t,e,n){return function(...s){const r=this.__v_raw,i=Ne(r),o=zr(i),l=t==="entries"||t===Symbol.iterator&&o,c=t==="keys"&&o,u=r[t](...s),h=n?au:e?Zr:wn;return!e&&Ot(i,"iterate",c?ou:pr),{next(){const{value:d,done:m}=u.next();return m?{value:d,done:m}:{value:l?[h(d[0]),h(d[1])]:h(d),done:m}},[Symbol.iterator](){return this}}}}function _a(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Mw(t,e){const n={get(r){const i=this.__v_raw,o=Ne(i),l=Ne(r);t||(Ds(r,l)&&Ot(o,"get",r),Ot(o,"get",l));const{has:c}=ga(o),u=e?au:t?Zr:wn;if(c.call(o,r))return u(i.get(r));if(c.call(o,l))return u(i.get(l));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Ot(Ne(r),"iterate",pr),r.size},has(r){const i=this.__v_raw,o=Ne(i),l=Ne(r);return t||(Ds(r,l)&&Ot(o,"has",r),Ot(o,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const o=this,l=o.__v_raw,c=Ne(l),u=e?au:t?Zr:wn;return!t&&Ot(c,"iterate",pr),l.forEach((h,d)=>r.call(i,u(h),u(d),o))}};return _t(n,t?{add:_a("add"),set:_a("set"),delete:_a("delete"),clear:_a("clear")}:{add(r){!e&&!rn(r)&&!is(r)&&(r=Ne(r));const i=Ne(this);return ga(i).has.call(i,r)||(i.add(r),Jn(i,"add",r,r)),this},set(r,i){!e&&!rn(i)&&!is(i)&&(i=Ne(i));const o=Ne(this),{has:l,get:c}=ga(o);let u=l.call(o,r);u||(r=Ne(r),u=l.call(o,r));const h=c.call(o,r);return o.set(r,i),u?Ds(i,h)&&Jn(o,"set",r,i):Jn(o,"add",r,i),this},delete(r){const i=Ne(this),{has:o,get:l}=ga(i);let c=o.call(i,r);c||(r=Ne(r),c=o.call(i,r)),l&&l.call(i,r);const u=i.delete(r);return c&&Jn(i,"delete",r,void 0),u},clear(){const r=Ne(this),i=r.size!==0,o=r.clear();return i&&Jn(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=xw(r,t,e)}),n}function lh(t,e){const n=Mw(t,e);return(s,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?s:Reflect.get(xe(n,r)&&r in s?n:s,r,i)}const Lw={get:lh(!1,!1)},Fw={get:lh(!1,!0)},Uw={get:lh(!0,!1)};const Ng=new WeakMap,Og=new WeakMap,Dg=new WeakMap,Bw=new WeakMap;function $w(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function jw(t){return t.__v_skip||!Object.isExtensible(t)?0:$w(fw(t))}function $o(t){return is(t)?t:ch(t,!1,Ow,Lw,Ng)}function Vg(t){return ch(t,!1,Vw,Fw,Og)}function lu(t){return ch(t,!0,Dw,Uw,Dg)}function ch(t,e,n,s,r){if(!Ue(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=jw(t);if(i===0)return t;const o=r.get(t);if(o)return o;const l=new Proxy(t,i===2?s:n);return r.set(t,l),l}function Vn(t){return is(t)?Vn(t.__v_raw):!!(t&&t.__v_isReactive)}function is(t){return!!(t&&t.__v_isReadonly)}function rn(t){return!!(t&&t.__v_isShallow)}function Rl(t){return t?!!t.__v_raw:!1}function Ne(t){const e=t&&t.__v_raw;return e?Ne(e):t}function uh(t){return!xe(t,"__v_skip")&&Object.isExtensible(t)&&dg(t,"__v_skip",!0),t}const wn=t=>Ue(t)?$o(t):t,Zr=t=>Ue(t)?lu(t):t;function We(t){return t?t.__v_isRef===!0:!1}function X(t){return xg(t,!1)}function qw(t){return xg(t,!0)}function xg(t,e){return We(t)?t:new Hw(t,e)}class Hw{constructor(e,n){this.dep=new ah,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ne(e),this._value=n?e:wn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,s=this.__v_isShallow||rn(e)||is(e);e=s?e:Ne(e),Ds(e,n)&&(this._rawValue=e,this._value=s?e:wn(e),this.dep.trigger())}}function ie(t){return We(t)?t.value:t}const Ww={get:(t,e,n)=>e==="__v_raw"?t:ie(Reflect.get(t,e,n)),set:(t,e,n,s)=>{const r=t[e];return We(r)&&!We(n)?(r.value=n,!0):Reflect.set(t,e,n,s)}};function Mg(t){return Vn(t)?t:new Proxy(t,Ww)}function zw(t){const e=ue(t)?new Array(t.length):{};for(const n in t)e[n]=Lg(t,n);return e}class Gw{constructor(e,n,s){this._object=e,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0,this._raw=Ne(e);let r=!0,i=e;if(!ue(e)||!wl(String(n)))do r=!Rl(i)||rn(i);while(r&&(i=i.__v_raw));this._shallow=r}get value(){let e=this._object[this._key];return this._shallow&&(e=ie(e)),this._value=e===void 0?this._defaultValue:e}set value(e){if(this._shallow&&We(this._raw[this._key])){const n=this._object[this._key];if(We(n)){n.value=e;return}}this._object[this._key]=e}get dep(){return Sw(this._raw,this._key)}}class Kw{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Qw(t,e,n){return We(t)?t:Ee(t)?new Kw(t):Ue(t)&&arguments.length>1?Lg(t,e,n):X(t)}function Lg(t,e,n){return new Gw(t,e,n)}class Jw{constructor(e,n,s){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ah(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=vo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&je!==this)return Tg(this,!0),!0}get value(){const e=this.dep.track();return bg(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Yw(t,e,n=!1){let s,r;return Ee(t)?s=t:(s=t.get,r=t.set),new Jw(s,r,n)}const ya={},Wa=new WeakMap;let ar;function Xw(t,e=!1,n=ar){if(n){let s=Wa.get(n);s||Wa.set(n,s=[]),s.push(t)}}function Zw(t,e,n=$e){const{immediate:s,deep:r,once:i,scheduler:o,augmentJob:l,call:c}=n,u=F=>r?F:rn(F)||r===!1||r===0?Yn(F,1):Yn(F);let h,d,m,g,E=!1,k=!1;if(We(t)?(d=()=>t.value,E=rn(t)):Vn(t)?(d=()=>u(t),E=!0):ue(t)?(k=!0,E=t.some(F=>Vn(F)||rn(F)),d=()=>t.map(F=>{if(We(F))return F.value;if(Vn(F))return u(F);if(Ee(F))return c?c(F,2):F()})):Ee(t)?e?d=c?()=>c(t,2):t:d=()=>{if(m){ss();try{m()}finally{rs()}}const F=ar;ar=h;try{return c?c(t,3,[g]):t(g)}finally{ar=F}}:d=Dn,e&&r){const F=d,U=r===!0?1/0:r;d=()=>Yn(F(),U)}const S=vg(),N=()=>{h.stop(),S&&S.active&&nh(S.effects,h)};if(i&&e){const F=e;e=(...U)=>{F(...U),N()}}let O=k?new Array(t.length).fill(ya):ya;const x=F=>{if(!(!(h.flags&1)||!h.dirty&&!F))if(e){const U=h.run();if(r||E||(k?U.some((B,T)=>Ds(B,O[T])):Ds(U,O))){m&&m();const B=ar;ar=h;try{const T=[U,O===ya?void 0:k&&O[0]===ya?[]:O,g];O=U,c?c(e,3,T):e(...T)}finally{ar=B}}}else h.run()};return l&&l(x),h=new Eg(d),h.scheduler=o?()=>o(x,!1):x,g=F=>Xw(F,!1,h),m=h.onStop=()=>{const F=Wa.get(h);if(F){if(c)c(F,4);else for(const U of F)U();Wa.delete(h)}},e?s?x(!0):O=h.run():o?o(x.bind(null,!0),!0):h.run(),N.pause=h.pause.bind(h),N.resume=h.resume.bind(h),N.stop=N,N}function Yn(t,e=1/0,n){if(e<=0||!Ue(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,We(t))Yn(t.value,e,n);else if(ue(t))for(let s=0;s<t.length;s++)Yn(t[s],e,n);else if(di(t)||zr(t))t.forEach(s=>{Yn(s,e,n)});else if(fg(t)){for(const s in t)Yn(t[s],e,n);for(const s of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,s)&&Yn(t[s],e,n)}return t}/**
* @vue/runtime-core v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function jo(t,e,n,s){try{return s?t(...s):t()}catch(r){Cl(r,e,n)}}function Tn(t,e,n,s){if(Ee(t)){const r=jo(t,e,n,s);return r&&ug(r)&&r.catch(i=>{Cl(i,e,n)}),r}if(ue(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Tn(t[i],e,n,s));return r}}function Cl(t,e,n,s=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||$e;if(e){let l=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const h=l.ec;if(h){for(let d=0;d<h.length;d++)if(h[d](t,c,u)===!1)return}l=l.parent}if(i){ss(),jo(i,null,10,[t,c,u]),rs();return}}eT(t,n,r,s,o)}function eT(t,e,n,s=!0,r=!1){if(r)throw t;console.error(t)}const $t=[];let kn=-1;const Gr=[];let As=null,Ur=0;const Fg=Promise.resolve();let za=null;function Rr(t){const e=za||Fg;return t?e.then(this?t.bind(this):t):e}function tT(t){let e=kn+1,n=$t.length;for(;e<n;){const s=e+n>>>1,r=$t[s],i=wo(r);i<t||i===t&&r.flags&2?e=s+1:n=s}return e}function hh(t){if(!(t.flags&1)){const e=wo(t),n=$t[$t.length-1];!n||!(t.flags&2)&&e>=wo(n)?$t.push(t):$t.splice(tT(e),0,t),t.flags|=1,Ug()}}function Ug(){za||(za=Fg.then($g))}function nT(t){ue(t)?Gr.push(...t):As&&t.id===-1?As.splice(Ur+1,0,t):t.flags&1||(Gr.push(t),t.flags|=1),Ug()}function pd(t,e,n=kn+1){for(;n<$t.length;n++){const s=$t[n];if(s&&s.flags&2){if(t&&s.id!==t.uid)continue;$t.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Bg(t){if(Gr.length){const e=[...new Set(Gr)].sort((n,s)=>wo(n)-wo(s));if(Gr.length=0,As){As.push(...e);return}for(As=e,Ur=0;Ur<As.length;Ur++){const n=As[Ur];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}As=null,Ur=0}}const wo=t=>t.id==null?t.flags&2?-1:1/0:t.id;function $g(t){try{for(kn=0;kn<$t.length;kn++){const e=$t[kn];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),jo(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;kn<$t.length;kn++){const e=$t[kn];e&&(e.flags&=-2)}kn=-1,$t.length=0,Bg(),za=null,($t.length||Gr.length)&&$g()}}let tn=null,jg=null;function Ga(t){const e=tn;return tn=t,jg=t&&t.type.__scopeId||null,e}function kt(t,e=tn,n){if(!e||t._n)return t;const s=(...r)=>{s._d&&Ja(-1);const i=Ga(e);let o;try{o=t(...r)}finally{Ga(i),s._d&&Ja(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Tt(t,e){if(tn===null)return t;const n=Dl(tn),s=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,l,c=$e]=e[r];i&&(Ee(i)&&(i={mounted:i,updated:i}),i.deep&&Yn(o),s.push({dir:i,instance:n,value:o,oldValue:void 0,arg:l,modifiers:c}))}return t}function sr(t,e,n,s){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const l=r[o];i&&(l.oldValue=i[o].value);let c=l.dir[s];c&&(ss(),Tn(c,n,8,[t.el,l,t,e]),rs())}}const sT=Symbol("_vte"),qg=t=>t.__isTeleport,Qn=Symbol("_leaveCb"),va=Symbol("_enterCb");function rT(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return pn(()=>{t.isMounted=!0}),Yg(()=>{t.isUnmounting=!0}),t}const an=[Function,Array],Hg={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:an,onEnter:an,onAfterEnter:an,onEnterCancelled:an,onBeforeLeave:an,onLeave:an,onAfterLeave:an,onLeaveCancelled:an,onBeforeAppear:an,onAppear:an,onAfterAppear:an,onAppearCancelled:an},Wg=t=>{const e=t.subTree;return e.component?Wg(e.component):e},iT={name:"BaseTransition",props:Hg,setup(t,{slots:e}){const n=mh(),s=rT();return()=>{const r=e.default&&Kg(e.default(),!0);if(!r||!r.length)return;const i=zg(r),o=Ne(t),{mode:l}=o;if(s.isLeaving)return Oc(i);const c=md(i);if(!c)return Oc(i);let u=cu(c,o,s,n,d=>u=d);c.type!==jt&&To(c,u);let h=n.subTree&&md(n.subTree);if(h&&h.type!==jt&&!cr(h,c)&&Wg(n).type!==jt){let d=cu(h,o,s,n);if(To(h,d),l==="out-in"&&c.type!==jt)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,h=void 0},Oc(i);l==="in-out"&&c.type!==jt?d.delayLeave=(m,g,E)=>{const k=Gg(s,h);k[String(h.key)]=h,m[Qn]=()=>{g(),m[Qn]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{E(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return i}}};function zg(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==jt){e=n;break}}return e}const oT=iT;function Gg(t,e){const{leavingVNodes:n}=t;let s=n.get(e.type);return s||(s=Object.create(null),n.set(e.type,s)),s}function cu(t,e,n,s,r){const{appear:i,mode:o,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:d,onBeforeLeave:m,onLeave:g,onAfterLeave:E,onLeaveCancelled:k,onBeforeAppear:S,onAppear:N,onAfterAppear:O,onAppearCancelled:x}=e,F=String(t.key),U=Gg(n,t),B=(v,b)=>{v&&Tn(v,s,9,b)},T=(v,b)=>{const P=b[1];B(v,b),ue(v)?v.every(R=>R.length<=1)&&P():v.length<=1&&P()},_={mode:o,persisted:l,beforeEnter(v){let b=c;if(!n.isMounted)if(i)b=S||c;else return;v[Qn]&&v[Qn](!0);const P=U[F];P&&cr(t,P)&&P.el[Qn]&&P.el[Qn](),B(b,[v])},enter(v){let b=u,P=h,R=d;if(!n.isMounted)if(i)b=N||u,P=O||h,R=x||d;else return;let A=!1;const _e=v[va]=Le=>{A||(A=!0,Le?B(R,[v]):B(P,[v]),_.delayedLeave&&_.delayedLeave(),v[va]=void 0)};b?T(b,[v,_e]):_e()},leave(v,b){const P=String(t.key);if(v[va]&&v[va](!0),n.isUnmounting)return b();B(m,[v]);let R=!1;const A=v[Qn]=_e=>{R||(R=!0,b(),_e?B(k,[v]):B(E,[v]),v[Qn]=void 0,U[P]===t&&delete U[P])};U[P]=t,g?T(g,[v,A]):A()},clone(v){const b=cu(v,e,n,s,r);return r&&r(b),b}};return _}function Oc(t){if(Pl(t))return t=Us(t),t.children=null,t}function md(t){if(!Pl(t))return qg(t.type)&&t.children?zg(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ee(n.default))return n.default()}}function To(t,e){t.shapeFlag&6&&t.component?(t.transition=e,To(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Kg(t,e=!1,n){let s=[],r=0;for(let i=0;i<t.length;i++){let o=t[i];const l=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===et?(o.patchFlag&128&&r++,s=s.concat(Kg(o.children,e,l))):(e||o.type!==jt)&&s.push(l!=null?Us(o,{key:l}):o)}if(r>1)for(let i=0;i<s.length;i++)s[i].patchFlag=-2;return s}function on(t,e){return Ee(t)?_t({name:t.name},e,{setup:t}):t}function Qg(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Ka=new WeakMap;function ro(t,e,n,s,r=!1){if(ue(t)){t.forEach((E,k)=>ro(E,e&&(ue(e)?e[k]:e),n,s,r));return}if(io(s)&&!r){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&ro(t,e,n,s.component.subTree);return}const i=s.shapeFlag&4?Dl(s.component):s.el,o=r?null:i,{i:l,r:c}=t,u=e&&e.r,h=l.refs===$e?l.refs={}:l.refs,d=l.setupState,m=Ne(d),g=d===$e?cg:E=>xe(m,E);if(u!=null&&u!==c){if(gd(e),tt(u))h[u]=null,g(u)&&(d[u]=null);else if(We(u)){u.value=null;const E=e;E.k&&(h[E.k]=null)}}if(Ee(c))jo(c,l,12,[o,h]);else{const E=tt(c),k=We(c);if(E||k){const S=()=>{if(t.f){const N=E?g(c)?d[c]:h[c]:c.value;if(r)ue(N)&&nh(N,i);else if(ue(N))N.includes(i)||N.push(i);else if(E)h[c]=[i],g(c)&&(d[c]=h[c]);else{const O=[i];c.value=O,t.k&&(h[t.k]=O)}}else E?(h[c]=o,g(c)&&(d[c]=o)):k&&(c.value=o,t.k&&(h[t.k]=o))};if(o){const N=()=>{S(),Ka.delete(t)};N.id=-1,Ka.set(t,N),Zt(N,n)}else gd(t),S()}}}function gd(t){const e=Ka.get(t);e&&(e.flags|=8,Ka.delete(t))}bl().requestIdleCallback;bl().cancelIdleCallback;const io=t=>!!t.type.__asyncLoader,Pl=t=>t.type.__isKeepAlive;function aT(t,e){Jg(t,"a",e)}function lT(t,e){Jg(t,"da",e)}function Jg(t,e,n=Vt){const s=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(kl(e,s,n),n){let r=n.parent;for(;r&&r.parent;)Pl(r.parent.vnode)&&cT(s,e,n,r),r=r.parent}}function cT(t,e,n,s){const r=kl(e,t,s,!0);Cr(()=>{nh(s[e],r)},n)}function kl(t,e,n=Vt,s=!1){if(n){const r=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{ss();const l=qo(n),c=Tn(e,n,t,o);return l(),rs(),c});return s?r.unshift(i):r.push(i),i}}const hs=t=>(e,n=Vt)=>{(!Ao||t==="sp")&&kl(t,(...s)=>e(...s),n)},uT=hs("bm"),pn=hs("m"),hT=hs("bu"),fT=hs("u"),Yg=hs("bum"),Cr=hs("um"),dT=hs("sp"),pT=hs("rtg"),mT=hs("rtc");function gT(t,e=Vt){kl("ec",t,e)}const Xg="components";function Zg(t,e){return t_(Xg,t,!0,e)||t}const e_=Symbol.for("v-ndc");function _T(t){return tt(t)?t_(Xg,t,!1)||t:t||e_}function t_(t,e,n=!0,s=!1){const r=tn||Vt;if(r){const i=r.type;{const l=iI(i,!1);if(l&&(l===e||l===fn(e)||l===Il(fn(e))))return i}const o=_d(r[t]||i[t],e)||_d(r.appContext[t],e);return!o&&s?i:o}}function _d(t,e){return t&&(t[e]||t[fn(e)]||t[Il(fn(e))])}function vn(t,e,n,s){let r;const i=n,o=ue(t);if(o||tt(t)){const l=o&&Vn(t);let c=!1,u=!1;l&&(c=!rn(t),u=is(t),t=Sl(t)),r=new Array(t.length);for(let h=0,d=t.length;h<d;h++)r[h]=e(c?u?Zr(wn(t[h])):wn(t[h]):t[h],h,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=e(l+1,l,void 0,i)}else if(Ue(t))if(t[Symbol.iterator])r=Array.from(t,(l,c)=>e(l,c,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let c=0,u=l.length;c<u;c++){const h=l[c];r[c]=e(t[h],h,c,i)}}else r=[];return r}const uu=t=>t?w_(t)?Dl(t):uu(t.parent):null,oo=_t(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>uu(t.parent),$root:t=>uu(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>s_(t),$forceUpdate:t=>t.f||(t.f=()=>{hh(t.update)}),$nextTick:t=>t.n||(t.n=Rr.bind(t.proxy)),$watch:t=>PT.bind(t)}),Dc=(t,e)=>t!==$e&&!t.__isScriptSetup&&xe(t,e),yT={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:s,data:r,props:i,accessCache:o,type:l,appContext:c}=t;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return s[e];case 2:return r[e];case 4:return n[e];case 3:return i[e]}else{if(Dc(s,e))return o[e]=1,s[e];if(r!==$e&&xe(r,e))return o[e]=2,r[e];if(xe(i,e))return o[e]=3,i[e];if(n!==$e&&xe(n,e))return o[e]=4,n[e];hu&&(o[e]=0)}}const u=oo[e];let h,d;if(u)return e==="$attrs"&&Ot(t.attrs,"get",""),u(t);if((h=l.__cssModules)&&(h=h[e]))return h;if(n!==$e&&xe(n,e))return o[e]=4,n[e];if(d=c.config.globalProperties,xe(d,e))return d[e]},set({_:t},e,n){const{data:s,setupState:r,ctx:i}=t;return Dc(r,e)?(r[e]=n,!0):s!==$e&&xe(s,e)?(s[e]=n,!0):xe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:s,appContext:r,props:i,type:o}},l){let c;return!!(n[l]||t!==$e&&l[0]!=="$"&&xe(t,l)||Dc(e,l)||xe(i,l)||xe(s,l)||xe(oo,l)||xe(r.config.globalProperties,l)||(c=o.__cssModules)&&c[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:xe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function yd(t){return ue(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let hu=!0;function vT(t){const e=s_(t),n=t.proxy,s=t.ctx;hu=!1,e.beforeCreate&&vd(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:l,provide:c,inject:u,created:h,beforeMount:d,mounted:m,beforeUpdate:g,updated:E,activated:k,deactivated:S,beforeDestroy:N,beforeUnmount:O,destroyed:x,unmounted:F,render:U,renderTracked:B,renderTriggered:T,errorCaptured:_,serverPrefetch:v,expose:b,inheritAttrs:P,components:R,directives:A,filters:_e}=e;if(u&&ET(u,s,null),o)for(const ge in o){const ye=o[ge];Ee(ye)&&(s[ge]=ye.bind(n))}if(r){const ge=r.call(n,n);Ue(ge)&&(t.data=$o(ge))}if(hu=!0,i)for(const ge in i){const ye=i[ge],ft=Ee(ye)?ye.bind(n,n):Ee(ye.get)?ye.get.bind(n,n):Dn,Qt=!Ee(ye)&&Ee(ye.set)?ye.set.bind(n):Dn,Je=gt({get:ft,set:Qt});Object.defineProperty(s,ge,{enumerable:!0,configurable:!0,get:()=>Je.value,set:ze=>Je.value=ze})}if(l)for(const ge in l)n_(l[ge],s,n,ge);if(c){const ge=Ee(c)?c.call(n):c;Reflect.ownKeys(ge).forEach(ye=>{Ca(ye,ge[ye])})}h&&vd(h,t,"c");function Te(ge,ye){ue(ye)?ye.forEach(ft=>ge(ft.bind(n))):ye&&ge(ye.bind(n))}if(Te(uT,d),Te(pn,m),Te(hT,g),Te(fT,E),Te(aT,k),Te(lT,S),Te(gT,_),Te(mT,B),Te(pT,T),Te(Yg,O),Te(Cr,F),Te(dT,v),ue(b))if(b.length){const ge=t.exposed||(t.exposed={});b.forEach(ye=>{Object.defineProperty(ge,ye,{get:()=>n[ye],set:ft=>n[ye]=ft,enumerable:!0})})}else t.exposed||(t.exposed={});U&&t.render===Dn&&(t.render=U),P!=null&&(t.inheritAttrs=P),R&&(t.components=R),A&&(t.directives=A),v&&Qg(t)}function ET(t,e,n=Dn){ue(t)&&(t=fu(t));for(const s in t){const r=t[s];let i;Ue(r)?"default"in r?i=cn(r.from||s,r.default,!0):i=cn(r.from||s):i=cn(r),We(i)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[s]=i}}function vd(t,e,n){Tn(ue(t)?t.map(s=>s.bind(e.proxy)):t.bind(e.proxy),e,n)}function n_(t,e,n,s){let r=s.includes(".")?o_(n,s):()=>n[s];if(tt(t)){const i=e[t];Ee(i)&&gr(r,i)}else if(Ee(t))gr(r,t.bind(n));else if(Ue(t))if(ue(t))t.forEach(i=>n_(i,e,n,s));else{const i=Ee(t.handler)?t.handler.bind(n):e[t.handler];Ee(i)&&gr(r,i,t)}}function s_(t){const e=t.type,{mixins:n,extends:s}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,l=i.get(e);let c;return l?c=l:!r.length&&!n&&!s?c=e:(c={},r.length&&r.forEach(u=>Qa(c,u,o,!0)),Qa(c,e,o)),Ue(e)&&i.set(e,c),c}function Qa(t,e,n,s=!1){const{mixins:r,extends:i}=e;i&&Qa(t,i,n,!0),r&&r.forEach(o=>Qa(t,o,n,!0));for(const o in e)if(!(s&&o==="expose")){const l=wT[o]||n&&n[o];t[o]=l?l(t[o],e[o]):e[o]}return t}const wT={data:Ed,props:wd,emits:wd,methods:Ki,computed:Ki,beforeCreate:Ut,created:Ut,beforeMount:Ut,mounted:Ut,beforeUpdate:Ut,updated:Ut,beforeDestroy:Ut,beforeUnmount:Ut,destroyed:Ut,unmounted:Ut,activated:Ut,deactivated:Ut,errorCaptured:Ut,serverPrefetch:Ut,components:Ki,directives:Ki,watch:IT,provide:Ed,inject:TT};function Ed(t,e){return e?t?function(){return _t(Ee(t)?t.call(this,this):t,Ee(e)?e.call(this,this):e)}:e:t}function TT(t,e){return Ki(fu(t),fu(e))}function fu(t){if(ue(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ut(t,e){return t?[...new Set([].concat(t,e))]:e}function Ki(t,e){return t?_t(Object.create(null),t,e):e}function wd(t,e){return t?ue(t)&&ue(e)?[...new Set([...t,...e])]:_t(Object.create(null),yd(t),yd(e??{})):e}function IT(t,e){if(!t)return e;if(!e)return t;const n=_t(Object.create(null),t);for(const s in e)n[s]=Ut(t[s],e[s]);return n}function r_(){return{app:null,config:{isNativeTag:cg,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let AT=0;function bT(t,e){return function(s,r=null){Ee(s)||(s=_t({},s)),r!=null&&!Ue(r)&&(r=null);const i=r_(),o=new WeakSet,l=[];let c=!1;const u=i.app={_uid:AT++,_component:s,_props:r,_container:null,_context:i,_instance:null,version:aI,get config(){return i.config},set config(h){},use(h,...d){return o.has(h)||(h&&Ee(h.install)?(o.add(h),h.install(u,...d)):Ee(h)&&(o.add(h),h(u,...d))),u},mixin(h){return i.mixins.includes(h)||i.mixins.push(h),u},component(h,d){return d?(i.components[h]=d,u):i.components[h]},directive(h,d){return d?(i.directives[h]=d,u):i.directives[h]},mount(h,d,m){if(!c){const g=u._ceVNode||be(s,r);return g.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(g,h,m),c=!0,u._container=h,h.__vue_app__=u,Dl(g.component)}},onUnmount(h){l.push(h)},unmount(){c&&(Tn(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,d){return i.provides[h]=d,u},runWithContext(h){const d=mr;mr=u;try{return h()}finally{mr=d}}};return u}}let mr=null;function Ca(t,e){if(Vt){let n=Vt.provides;const s=Vt.parent&&Vt.parent.provides;s===n&&(n=Vt.provides=Object.create(s)),n[t]=e}}function cn(t,e,n=!1){const s=mh();if(s||mr){let r=mr?mr._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return n&&Ee(e)?e.call(s&&s.proxy):e}}function ST(){return!!(mh()||mr)}const RT=Symbol.for("v-scx"),CT=()=>cn(RT);function gr(t,e,n){return i_(t,e,n)}function i_(t,e,n=$e){const{immediate:s,deep:r,flush:i,once:o}=n,l=_t({},n),c=e&&s||!e&&i!=="post";let u;if(Ao){if(i==="sync"){const g=CT();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=Dn,g.resume=Dn,g.pause=Dn,g}}const h=Vt;l.call=(g,E,k)=>Tn(g,h,E,k);let d=!1;i==="post"?l.scheduler=g=>{Zt(g,h&&h.suspense)}:i!=="sync"&&(d=!0,l.scheduler=(g,E)=>{E?g():hh(g)}),l.augmentJob=g=>{e&&(g.flags|=4),d&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const m=Zw(t,e,l);return Ao&&(u?u.push(m):c&&m()),m}function PT(t,e,n){const s=this.proxy,r=tt(t)?t.includes(".")?o_(s,t):()=>s[t]:t.bind(s,s);let i;Ee(e)?i=e:(i=e.handler,n=e);const o=qo(this),l=i_(r,i.bind(s),n);return o(),l}function o_(t,e){const n=e.split(".");return()=>{let s=t;for(let r=0;r<n.length&&s;r++)s=s[n[r]];return s}}const kT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${fn(e)}Modifiers`]||t[`${zs(e)}Modifiers`];function NT(t,e,...n){if(t.isUnmounted)return;const s=t.vnode.props||$e;let r=n;const i=e.startsWith("update:"),o=i&&kT(s,e.slice(7));o&&(o.trim&&(r=n.map(h=>tt(h)?h.trim():h)),o.number&&(r=n.map(Al)));let l,c=s[l=Rc(e)]||s[l=Rc(fn(e))];!c&&i&&(c=s[l=Rc(zs(e))]),c&&Tn(c,t,6,r);const u=s[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Tn(u,t,6,r)}}const OT=new WeakMap;function a_(t,e,n=!1){const s=n?OT:e.emitsCache,r=s.get(t);if(r!==void 0)return r;const i=t.emits;let o={},l=!1;if(!Ee(t)){const c=u=>{const h=a_(u,e,!0);h&&(l=!0,_t(o,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!l?(Ue(t)&&s.set(t,null),null):(ue(i)?i.forEach(c=>o[c]=null):_t(o,i),Ue(t)&&s.set(t,o),o)}function Nl(t,e){return!t||!El(e)?!1:(e=e.slice(2).replace(/Once$/,""),xe(t,e[0].toLowerCase()+e.slice(1))||xe(t,zs(e))||xe(t,e))}function Td(t){const{type:e,vnode:n,proxy:s,withProxy:r,propsOptions:[i],slots:o,attrs:l,emit:c,render:u,renderCache:h,props:d,data:m,setupState:g,ctx:E,inheritAttrs:k}=t,S=Ga(t);let N,O;try{if(n.shapeFlag&4){const F=r||s,U=F;N=On(u.call(U,F,h,d,g,m,E)),O=l}else{const F=e;N=On(F.length>1?F(d,{attrs:l,slots:o,emit:c}):F(d,null)),O=e.props?l:DT(l)}}catch(F){ao.length=0,Cl(F,t,1),N=be(jt)}let x=N;if(O&&k!==!1){const F=Object.keys(O),{shapeFlag:U}=x;F.length&&U&7&&(i&&F.some(th)&&(O=VT(O,i)),x=Us(x,O,!1,!0))}return n.dirs&&(x=Us(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&To(x,n.transition),N=x,Ga(S),N}const DT=t=>{let e;for(const n in t)(n==="class"||n==="style"||El(n))&&((e||(e={}))[n]=t[n]);return e},VT=(t,e)=>{const n={};for(const s in t)(!th(s)||!(s.slice(9)in e))&&(n[s]=t[s]);return n};function xT(t,e,n){const{props:s,children:r,component:i}=t,{props:o,children:l,patchFlag:c}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?Id(s,o,u):!!o;if(c&8){const h=e.dynamicProps;for(let d=0;d<h.length;d++){const m=h[d];if(o[m]!==s[m]&&!Nl(u,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?Id(s,o,u):!0:!!o;return!1}function Id(t,e,n){const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!0;for(let r=0;r<s.length;r++){const i=s[r];if(e[i]!==t[i]&&!Nl(n,i))return!0}return!1}function MT({vnode:t,parent:e},n){for(;e;){const s=e.subTree;if(s.suspense&&s.suspense.activeBranch===t&&(s.el=t.el),s===t)(t=e.vnode).el=n,e=e.parent;else break}}const l_={},c_=()=>Object.create(l_),u_=t=>Object.getPrototypeOf(t)===l_;function LT(t,e,n,s=!1){const r={},i=c_();t.propsDefaults=Object.create(null),h_(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=s?r:Vg(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function FT(t,e,n,s){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,l=Ne(r),[c]=t.propsOptions;let u=!1;if((s||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let d=0;d<h.length;d++){let m=h[d];if(Nl(t.emitsOptions,m))continue;const g=e[m];if(c)if(xe(i,m))g!==i[m]&&(i[m]=g,u=!0);else{const E=fn(m);r[E]=du(c,l,E,g,t,!1)}else g!==i[m]&&(i[m]=g,u=!0)}}}else{h_(t,e,r,i)&&(u=!0);let h;for(const d in l)(!e||!xe(e,d)&&((h=zs(d))===d||!xe(e,h)))&&(c?n&&(n[d]!==void 0||n[h]!==void 0)&&(r[d]=du(c,l,d,void 0,t,!0)):delete r[d]);if(i!==l)for(const d in i)(!e||!xe(e,d))&&(delete i[d],u=!0)}u&&Jn(t.attrs,"set","")}function h_(t,e,n,s){const[r,i]=t.propsOptions;let o=!1,l;if(e)for(let c in e){if(to(c))continue;const u=e[c];let h;r&&xe(r,h=fn(c))?!i||!i.includes(h)?n[h]=u:(l||(l={}))[h]=u:Nl(t.emitsOptions,c)||(!(c in s)||u!==s[c])&&(s[c]=u,o=!0)}if(i){const c=Ne(n),u=l||$e;for(let h=0;h<i.length;h++){const d=i[h];n[d]=du(r,c,d,u[d],t,!xe(u,d))}}return o}function du(t,e,n,s,r,i){const o=t[n];if(o!=null){const l=xe(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Ee(c)){const{propsDefaults:u}=r;if(n in u)s=u[n];else{const h=qo(r);s=u[n]=c.call(null,e),h()}}else s=c;r.ce&&r.ce._setProp(n,s)}o[0]&&(i&&!l?s=!1:o[1]&&(s===""||s===zs(n))&&(s=!0))}return s}const UT=new WeakMap;function f_(t,e,n=!1){const s=n?UT:e.propsCache,r=s.get(t);if(r)return r;const i=t.props,o={},l=[];let c=!1;if(!Ee(t)){const h=d=>{c=!0;const[m,g]=f_(d,e,!0);_t(o,m),g&&l.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!i&&!c)return Ue(t)&&s.set(t,Wr),Wr;if(ue(i))for(let h=0;h<i.length;h++){const d=fn(i[h]);Ad(d)&&(o[d]=$e)}else if(i)for(const h in i){const d=fn(h);if(Ad(d)){const m=i[h],g=o[d]=ue(m)||Ee(m)?{type:m}:_t({},m),E=g.type;let k=!1,S=!0;if(ue(E))for(let N=0;N<E.length;++N){const O=E[N],x=Ee(O)&&O.name;if(x==="Boolean"){k=!0;break}else x==="String"&&(S=!1)}else k=Ee(E)&&E.name==="Boolean";g[0]=k,g[1]=S,(k||xe(g,"default"))&&l.push(d)}}const u=[o,l];return Ue(t)&&s.set(t,u),u}function Ad(t){return t[0]!=="$"&&!to(t)}const fh=t=>t==="_"||t==="_ctx"||t==="$stable",dh=t=>ue(t)?t.map(On):[On(t)],BT=(t,e,n)=>{if(e._n)return e;const s=kt((...r)=>dh(e(...r)),n);return s._c=!1,s},d_=(t,e,n)=>{const s=t._ctx;for(const r in t){if(fh(r))continue;const i=t[r];if(Ee(i))e[r]=BT(r,i,s);else if(i!=null){const o=dh(i);e[r]=()=>o}}},p_=(t,e)=>{const n=dh(e);t.slots.default=()=>n},m_=(t,e,n)=>{for(const s in e)(n||!fh(s))&&(t[s]=e[s])},$T=(t,e,n)=>{const s=t.slots=c_();if(t.vnode.shapeFlag&32){const r=e._;r?(m_(s,e,n),n&&dg(s,"_",r,!0)):d_(e,s)}else e&&p_(t,e)},jT=(t,e,n)=>{const{vnode:s,slots:r}=t;let i=!0,o=$e;if(s.shapeFlag&32){const l=e._;l?n&&l===1?i=!1:m_(r,e,n):(i=!e.$stable,d_(e,r)),o=e}else e&&(p_(t,e),o={default:1});if(i)for(const l in r)!fh(l)&&o[l]==null&&delete r[l]},Zt=GT;function qT(t){return HT(t)}function HT(t,e){const n=bl();n.__VUE__=!0;const{insert:s,remove:r,patchProp:i,createElement:o,createText:l,createComment:c,setText:u,setElementText:h,parentNode:d,nextSibling:m,setScopeId:g=Dn,insertStaticContent:E}=t,k=(I,C,D,q=null,z=null,$=null,Z=void 0,Q=null,K=!!C.dynamicChildren)=>{if(I===C)return;I&&!cr(I,C)&&(q=j(I),ze(I,z,$,!0),I=null),C.patchFlag===-2&&(K=!1,C.dynamicChildren=null);const{type:G,ref:he,shapeFlag:te}=C;switch(G){case Ol:S(I,C,D,q);break;case jt:N(I,C,D,q);break;case xc:I==null&&O(C,D,q,Z);break;case et:R(I,C,D,q,z,$,Z,Q,K);break;default:te&1?U(I,C,D,q,z,$,Z,Q,K):te&6?A(I,C,D,q,z,$,Z,Q,K):(te&64||te&128)&&G.process(I,C,D,q,z,$,Z,Q,K,ae)}he!=null&&z?ro(he,I&&I.ref,$,C||I,!C):he==null&&I&&I.ref!=null&&ro(I.ref,null,$,I,!0)},S=(I,C,D,q)=>{if(I==null)s(C.el=l(C.children),D,q);else{const z=C.el=I.el;C.children!==I.children&&u(z,C.children)}},N=(I,C,D,q)=>{I==null?s(C.el=c(C.children||""),D,q):C.el=I.el},O=(I,C,D,q)=>{[I.el,I.anchor]=E(I.children,C,D,q,I.el,I.anchor)},x=({el:I,anchor:C},D,q)=>{let z;for(;I&&I!==C;)z=m(I),s(I,D,q),I=z;s(C,D,q)},F=({el:I,anchor:C})=>{let D;for(;I&&I!==C;)D=m(I),r(I),I=D;r(C)},U=(I,C,D,q,z,$,Z,Q,K)=>{if(C.type==="svg"?Z="svg":C.type==="math"&&(Z="mathml"),I==null)B(C,D,q,z,$,Z,Q,K);else{const G=I.el&&I.el._isVueCE?I.el:null;try{G&&G._beginPatch(),v(I,C,z,$,Z,Q,K)}finally{G&&G._endPatch()}}},B=(I,C,D,q,z,$,Z,Q)=>{let K,G;const{props:he,shapeFlag:te,transition:ce,dirs:fe}=I;if(K=I.el=o(I.type,$,he&&he.is,he),te&8?h(K,I.children):te&16&&_(I.children,K,null,q,z,Vc(I,$),Z,Q),fe&&sr(I,null,q,"created"),T(K,I,I.scopeId,Z,q),he){for(const Fe in he)Fe!=="value"&&!to(Fe)&&i(K,Fe,null,he[Fe],$,q);"value"in he&&i(K,"value",null,he.value,$),(G=he.onVnodeBeforeMount)&&Cn(G,q,I)}fe&&sr(I,null,q,"beforeMount");const Se=WT(z,ce);Se&&ce.beforeEnter(K),s(K,C,D),((G=he&&he.onVnodeMounted)||Se||fe)&&Zt(()=>{G&&Cn(G,q,I),Se&&ce.enter(K),fe&&sr(I,null,q,"mounted")},z)},T=(I,C,D,q,z)=>{if(D&&g(I,D),q)for(let $=0;$<q.length;$++)g(I,q[$]);if(z){let $=z.subTree;if(C===$||y_($.type)&&($.ssContent===C||$.ssFallback===C)){const Z=z.vnode;T(I,Z,Z.scopeId,Z.slotScopeIds,z.parent)}}},_=(I,C,D,q,z,$,Z,Q,K=0)=>{for(let G=K;G<I.length;G++){const he=I[G]=Q?bs(I[G]):On(I[G]);k(null,he,C,D,q,z,$,Z,Q)}},v=(I,C,D,q,z,$,Z)=>{const Q=C.el=I.el;let{patchFlag:K,dynamicChildren:G,dirs:he}=C;K|=I.patchFlag&16;const te=I.props||$e,ce=C.props||$e;let fe;if(D&&rr(D,!1),(fe=ce.onVnodeBeforeUpdate)&&Cn(fe,D,C,I),he&&sr(C,I,D,"beforeUpdate"),D&&rr(D,!0),(te.innerHTML&&ce.innerHTML==null||te.textContent&&ce.textContent==null)&&h(Q,""),G?b(I.dynamicChildren,G,Q,D,q,Vc(C,z),$):Z||ye(I,C,Q,null,D,q,Vc(C,z),$,!1),K>0){if(K&16)P(Q,te,ce,D,z);else if(K&2&&te.class!==ce.class&&i(Q,"class",null,ce.class,z),K&4&&i(Q,"style",te.style,ce.style,z),K&8){const Se=C.dynamicProps;for(let Fe=0;Fe<Se.length;Fe++){const Oe=Se[Fe],St=te[Oe],Rt=ce[Oe];(Rt!==St||Oe==="value")&&i(Q,Oe,St,Rt,z,D)}}K&1&&I.children!==C.children&&h(Q,C.children)}else!Z&&G==null&&P(Q,te,ce,D,z);((fe=ce.onVnodeUpdated)||he)&&Zt(()=>{fe&&Cn(fe,D,C,I),he&&sr(C,I,D,"updated")},q)},b=(I,C,D,q,z,$,Z)=>{for(let Q=0;Q<C.length;Q++){const K=I[Q],G=C[Q],he=K.el&&(K.type===et||!cr(K,G)||K.shapeFlag&198)?d(K.el):D;k(K,G,he,null,q,z,$,Z,!0)}},P=(I,C,D,q,z)=>{if(C!==D){if(C!==$e)for(const $ in C)!to($)&&!($ in D)&&i(I,$,C[$],null,z,q);for(const $ in D){if(to($))continue;const Z=D[$],Q=C[$];Z!==Q&&$!=="value"&&i(I,$,Q,Z,z,q)}"value"in D&&i(I,"value",C.value,D.value,z)}},R=(I,C,D,q,z,$,Z,Q,K)=>{const G=C.el=I?I.el:l(""),he=C.anchor=I?I.anchor:l("");let{patchFlag:te,dynamicChildren:ce,slotScopeIds:fe}=C;fe&&(Q=Q?Q.concat(fe):fe),I==null?(s(G,D,q),s(he,D,q),_(C.children||[],D,he,z,$,Z,Q,K)):te>0&&te&64&&ce&&I.dynamicChildren?(b(I.dynamicChildren,ce,D,z,$,Z,Q),(C.key!=null||z&&C===z.subTree)&&g_(I,C,!0)):ye(I,C,D,he,z,$,Z,Q,K)},A=(I,C,D,q,z,$,Z,Q,K)=>{C.slotScopeIds=Q,I==null?C.shapeFlag&512?z.ctx.activate(C,D,q,Z,K):_e(C,D,q,z,$,Z,K):Le(I,C,K)},_e=(I,C,D,q,z,$,Z)=>{const Q=I.component=eI(I,q,z);if(Pl(I)&&(Q.ctx.renderer=ae),tI(Q,!1,Z),Q.asyncDep){if(z&&z.registerDep(Q,Te,Z),!I.el){const K=Q.subTree=be(jt);N(null,K,C,D),I.placeholder=K.el}}else Te(Q,I,C,D,z,$,Z)},Le=(I,C,D)=>{const q=C.component=I.component;if(xT(I,C,D))if(q.asyncDep&&!q.asyncResolved){ge(q,C,D);return}else q.next=C,q.update();else C.el=I.el,q.vnode=C},Te=(I,C,D,q,z,$,Z)=>{const Q=()=>{if(I.isMounted){let{next:te,bu:ce,u:fe,parent:Se,vnode:Fe}=I;{const Yt=__(I);if(Yt){te&&(te.el=Fe.el,ge(I,te,Z)),Yt.asyncDep.then(()=>{I.isUnmounted||Q()});return}}let Oe=te,St;rr(I,!1),te?(te.el=Fe.el,ge(I,te,Z)):te=Fe,ce&&Ra(ce),(St=te.props&&te.props.onVnodeBeforeUpdate)&&Cn(St,Se,te,Fe),rr(I,!0);const Rt=Td(I),Jt=I.subTree;I.subTree=Rt,k(Jt,Rt,d(Jt.el),j(Jt),I,z,$),te.el=Rt.el,Oe===null&&MT(I,Rt.el),fe&&Zt(fe,z),(St=te.props&&te.props.onVnodeUpdated)&&Zt(()=>Cn(St,Se,te,Fe),z)}else{let te;const{el:ce,props:fe}=C,{bm:Se,m:Fe,parent:Oe,root:St,type:Rt}=I,Jt=io(C);rr(I,!1),Se&&Ra(Se),!Jt&&(te=fe&&fe.onVnodeBeforeMount)&&Cn(te,Oe,C),rr(I,!0);{St.ce&&St.ce._def.shadowRoot!==!1&&St.ce._injectChildStyle(Rt);const Yt=I.subTree=Td(I);k(null,Yt,D,q,I,z,$),C.el=Yt.el}if(Fe&&Zt(Fe,z),!Jt&&(te=fe&&fe.onVnodeMounted)){const Yt=C;Zt(()=>Cn(te,Oe,Yt),z)}(C.shapeFlag&256||Oe&&io(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&I.a&&Zt(I.a,z),I.isMounted=!0,C=D=q=null}};I.scope.on();const K=I.effect=new Eg(Q);I.scope.off();const G=I.update=K.run.bind(K),he=I.job=K.runIfDirty.bind(K);he.i=I,he.id=I.uid,K.scheduler=()=>hh(he),rr(I,!0),G()},ge=(I,C,D)=>{C.component=I;const q=I.vnode.props;I.vnode=C,I.next=null,FT(I,C.props,q,D),jT(I,C.children,D),ss(),pd(I),rs()},ye=(I,C,D,q,z,$,Z,Q,K=!1)=>{const G=I&&I.children,he=I?I.shapeFlag:0,te=C.children,{patchFlag:ce,shapeFlag:fe}=C;if(ce>0){if(ce&128){Qt(G,te,D,q,z,$,Z,Q,K);return}else if(ce&256){ft(G,te,D,q,z,$,Z,Q,K);return}}fe&8?(he&16&&vt(G,z,$),te!==G&&h(D,te)):he&16?fe&16?Qt(G,te,D,q,z,$,Z,Q,K):vt(G,z,$,!0):(he&8&&h(D,""),fe&16&&_(te,D,q,z,$,Z,Q,K))},ft=(I,C,D,q,z,$,Z,Q,K)=>{I=I||Wr,C=C||Wr;const G=I.length,he=C.length,te=Math.min(G,he);let ce;for(ce=0;ce<te;ce++){const fe=C[ce]=K?bs(C[ce]):On(C[ce]);k(I[ce],fe,D,null,z,$,Z,Q,K)}G>he?vt(I,z,$,!0,!1,te):_(C,D,q,z,$,Z,Q,K,te)},Qt=(I,C,D,q,z,$,Z,Q,K)=>{let G=0;const he=C.length;let te=I.length-1,ce=he-1;for(;G<=te&&G<=ce;){const fe=I[G],Se=C[G]=K?bs(C[G]):On(C[G]);if(cr(fe,Se))k(fe,Se,D,null,z,$,Z,Q,K);else break;G++}for(;G<=te&&G<=ce;){const fe=I[te],Se=C[ce]=K?bs(C[ce]):On(C[ce]);if(cr(fe,Se))k(fe,Se,D,null,z,$,Z,Q,K);else break;te--,ce--}if(G>te){if(G<=ce){const fe=ce+1,Se=fe<he?C[fe].el:q;for(;G<=ce;)k(null,C[G]=K?bs(C[G]):On(C[G]),D,Se,z,$,Z,Q,K),G++}}else if(G>ce)for(;G<=te;)ze(I[G],z,$,!0),G++;else{const fe=G,Se=G,Fe=new Map;for(G=Se;G<=ce;G++){const Et=C[G]=K?bs(C[G]):On(C[G]);Et.key!=null&&Fe.set(Et.key,G)}let Oe,St=0;const Rt=ce-Se+1;let Jt=!1,Yt=0;const gn=new Array(Rt);for(G=0;G<Rt;G++)gn[G]=0;for(G=fe;G<=te;G++){const Et=I[G];if(St>=Rt){ze(Et,z,$,!0);continue}let dt;if(Et.key!=null)dt=Fe.get(Et.key);else for(Oe=Se;Oe<=ce;Oe++)if(gn[Oe-Se]===0&&cr(Et,C[Oe])){dt=Oe;break}dt===void 0?ze(Et,z,$,!0):(gn[dt-Se]=G+1,dt>=Yt?Yt=dt:Jt=!0,k(Et,C[dt],D,null,z,$,Z,Q,K),St++)}const Dr=Jt?zT(gn):Wr;for(Oe=Dr.length-1,G=Rt-1;G>=0;G--){const Et=Se+G,dt=C[Et],Si=C[Et+1],Xs=Et+1<he?Si.el||Si.placeholder:q;gn[G]===0?k(null,dt,D,Xs,z,$,Z,Q,K):Jt&&(Oe<0||G!==Dr[Oe]?Je(dt,D,Xs,2):Oe--)}}},Je=(I,C,D,q,z=null)=>{const{el:$,type:Z,transition:Q,children:K,shapeFlag:G}=I;if(G&6){Je(I.component.subTree,C,D,q);return}if(G&128){I.suspense.move(C,D,q);return}if(G&64){Z.move(I,C,D,ae);return}if(Z===et){s($,C,D);for(let te=0;te<K.length;te++)Je(K[te],C,D,q);s(I.anchor,C,D);return}if(Z===xc){x(I,C,D);return}if(q!==2&&G&1&&Q)if(q===0)Q.beforeEnter($),s($,C,D),Zt(()=>Q.enter($),z);else{const{leave:te,delayLeave:ce,afterLeave:fe}=Q,Se=()=>{I.ctx.isUnmounted?r($):s($,C,D)},Fe=()=>{$._isLeaving&&$[Qn](!0),te($,()=>{Se(),fe&&fe()})};ce?ce($,Se,Fe):Fe()}else s($,C,D)},ze=(I,C,D,q=!1,z=!1)=>{const{type:$,props:Z,ref:Q,children:K,dynamicChildren:G,shapeFlag:he,patchFlag:te,dirs:ce,cacheIndex:fe}=I;if(te===-2&&(z=!1),Q!=null&&(ss(),ro(Q,null,D,I,!0),rs()),fe!=null&&(C.renderCache[fe]=void 0),he&256){C.ctx.deactivate(I);return}const Se=he&1&&ce,Fe=!io(I);let Oe;if(Fe&&(Oe=Z&&Z.onVnodeBeforeUnmount)&&Cn(Oe,C,I),he&6)Lt(I.component,D,q);else{if(he&128){I.suspense.unmount(D,q);return}Se&&sr(I,null,C,"beforeUnmount"),he&64?I.type.remove(I,C,D,ae,q):G&&!G.hasOnce&&($!==et||te>0&&te&64)?vt(G,C,D,!1,!0):($===et&&te&384||!z&&he&16)&&vt(K,C,D),q&&Ht(I)}(Fe&&(Oe=Z&&Z.onVnodeUnmounted)||Se)&&Zt(()=>{Oe&&Cn(Oe,C,I),Se&&sr(I,null,C,"unmounted")},D)},Ht=I=>{const{type:C,el:D,anchor:q,transition:z}=I;if(C===et){yt(D,q);return}if(C===xc){F(I);return}const $=()=>{r(D),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(I.shapeFlag&1&&z&&!z.persisted){const{leave:Z,delayLeave:Q}=z,K=()=>Z(D,$);Q?Q(I.el,$,K):K()}else $()},yt=(I,C)=>{let D;for(;I!==C;)D=m(I),r(I),I=D;r(C)},Lt=(I,C,D)=>{const{bum:q,scope:z,job:$,subTree:Z,um:Q,m:K,a:G}=I;bd(K),bd(G),q&&Ra(q),z.stop(),$&&($.flags|=8,ze(Z,I,C,D)),Q&&Zt(Q,C),Zt(()=>{I.isUnmounted=!0},C)},vt=(I,C,D,q=!1,z=!1,$=0)=>{for(let Z=$;Z<I.length;Z++)ze(I[Z],C,D,q,z)},j=I=>{if(I.shapeFlag&6)return j(I.component.subTree);if(I.shapeFlag&128)return I.suspense.next();const C=m(I.anchor||I.el),D=C&&C[sT];return D?m(D):C};let se=!1;const ee=(I,C,D)=>{I==null?C._vnode&&ze(C._vnode,null,null,!0):k(C._vnode||null,I,C,null,null,null,D),C._vnode=I,se||(se=!0,pd(),Bg(),se=!1)},ae={p:k,um:ze,m:Je,r:Ht,mt:_e,mc:_,pc:ye,pbc:b,n:j,o:t};return{render:ee,hydrate:void 0,createApp:bT(ee)}}function Vc({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function rr({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function WT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function g_(t,e,n=!1){const s=t.children,r=e.children;if(ue(s)&&ue(r))for(let i=0;i<s.length;i++){const o=s[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=bs(r[i]),l.el=o.el),!n&&l.patchFlag!==-2&&g_(o,l)),l.type===Ol&&l.patchFlag!==-1&&(l.el=o.el),l.type===jt&&!l.el&&(l.el=o.el)}}function zT(t){const e=t.slice(),n=[0];let s,r,i,o,l;const c=t.length;for(s=0;s<c;s++){const u=t[s];if(u!==0){if(r=n[n.length-1],t[r]<u){e[s]=r,n.push(s);continue}for(i=0,o=n.length-1;i<o;)l=i+o>>1,t[n[l]]<u?i=l+1:o=l;u<t[n[i]]&&(i>0&&(e[s]=n[i-1]),n[i]=s)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function __(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:__(e)}function bd(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const y_=t=>t.__isSuspense;function GT(t,e){e&&e.pendingBranch?ue(t)?e.effects.push(...t):e.effects.push(t):nT(t)}const et=Symbol.for("v-fgt"),Ol=Symbol.for("v-txt"),jt=Symbol.for("v-cmt"),xc=Symbol.for("v-stc"),ao=[];let nn=null;function oe(t=!1){ao.push(nn=t?null:[])}function KT(){ao.pop(),nn=ao[ao.length-1]||null}let Io=1;function Ja(t,e=!1){Io+=t,t<0&&nn&&e&&(nn.hasOnce=!0)}function v_(t){return t.dynamicChildren=Io>0?nn||Wr:null,KT(),Io>0&&nn&&nn.push(t),t}function de(t,e,n,s,r,i){return v_(w(t,e,n,s,r,i,!0))}function un(t,e,n,s,r){return v_(be(t,e,n,s,r,!0))}function Ya(t){return t?t.__v_isVNode===!0:!1}function cr(t,e){return t.type===e.type&&t.key===e.key}const E_=({key:t})=>t??null,Pa=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?tt(t)||We(t)||Ee(t)?{i:tn,r:t,k:e,f:!!n}:t:null);function w(t,e=null,n=null,s=0,r=null,i=t===et?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&E_(e),ref:e&&Pa(e),scopeId:jg,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:s,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:tn};return l?(ph(c,n),i&128&&t.normalize(c)):n&&(c.shapeFlag|=tt(n)?8:16),Io>0&&!o&&nn&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&nn.push(c),c}const be=QT;function QT(t,e=null,n=null,s=0,r=null,i=!1){if((!t||t===e_)&&(t=jt),Ya(t)){const l=Us(t,e,!0);return n&&ph(l,n),Io>0&&!i&&nn&&(l.shapeFlag&6?nn[nn.indexOf(t)]=l:nn.push(l)),l.patchFlag=-2,l}if(oI(t)&&(t=t.__vccOpts),e){e=JT(e);let{class:l,style:c}=e;l&&!tt(l)&&(e.class=qe(l)),Ue(c)&&(Rl(c)&&!ue(c)&&(c=_t({},c)),e.style=Uo(c))}const o=tt(t)?1:y_(t)?128:qg(t)?64:Ue(t)?4:Ee(t)?2:0;return w(t,e,n,s,r,o,i,!0)}function JT(t){return t?Rl(t)||u_(t)?_t({},t):t:null}function Us(t,e,n=!1,s=!1){const{props:r,ref:i,patchFlag:o,children:l,transition:c}=t,u=e?YT(r||{},e):r,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&E_(u),ref:e&&e.ref?n&&i?ue(i)?i.concat(Pa(e)):[i,Pa(e)]:Pa(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==et?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Us(t.ssContent),ssFallback:t.ssFallback&&Us(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&s&&To(h,c.clone(h)),h}function De(t=" ",e=0){return be(Ol,null,t,e)}function It(t="",e=!1){return e?(oe(),un(jt,null,t)):be(jt,null,t)}function On(t){return t==null||typeof t=="boolean"?be(jt):ue(t)?be(et,null,t.slice()):Ya(t)?bs(t):be(Ol,null,String(t))}function bs(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Us(t)}function ph(t,e){let n=0;const{shapeFlag:s}=t;if(e==null)e=null;else if(ue(e))n=16;else if(typeof e=="object")if(s&65){const r=e.default;r&&(r._c&&(r._d=!1),ph(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!u_(e)?e._ctx=tn:r===3&&tn&&(tn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ee(e)?(e={default:e,_ctx:tn},n=32):(e=String(e),s&64?(n=16,e=[De(e)]):n=8);t.children=e,t.shapeFlag|=n}function YT(...t){const e={};for(let n=0;n<t.length;n++){const s=t[n];for(const r in s)if(r==="class")e.class!==s.class&&(e.class=qe([e.class,s.class]));else if(r==="style")e.style=Uo([e.style,s.style]);else if(El(r)){const i=e[r],o=s[r];o&&i!==o&&!(ue(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=s[r])}return e}function Cn(t,e,n,s=null){Tn(t,e,7,[n,s])}const XT=r_();let ZT=0;function eI(t,e,n){const s=t.type,r=(e?e.appContext:t.appContext)||XT,i={uid:ZT++,vnode:t,type:s,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new _g(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:f_(s,r),emitsOptions:a_(s,r),emit:null,emitted:null,propsDefaults:$e,inheritAttrs:s.inheritAttrs,ctx:$e,data:$e,props:$e,attrs:$e,slots:$e,refs:$e,setupState:$e,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=NT.bind(null,i),t.ce&&t.ce(i),i}let Vt=null;const mh=()=>Vt||tn;let Xa,pu;{const t=bl(),e=(n,s)=>{let r;return(r=t[n])||(r=t[n]=[]),r.push(s),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};Xa=e("__VUE_INSTANCE_SETTERS__",n=>Vt=n),pu=e("__VUE_SSR_SETTERS__",n=>Ao=n)}const qo=t=>{const e=Vt;return Xa(t),t.scope.on(),()=>{t.scope.off(),Xa(e)}},Sd=()=>{Vt&&Vt.scope.off(),Xa(null)};function w_(t){return t.vnode.shapeFlag&4}let Ao=!1;function tI(t,e=!1,n=!1){e&&pu(e);const{props:s,children:r}=t.vnode,i=w_(t);LT(t,s,i,e),$T(t,r,n||e);const o=i?nI(t,e):void 0;return e&&pu(!1),o}function nI(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,yT);const{setup:s}=n;if(s){ss();const r=t.setupContext=s.length>1?rI(t):null,i=qo(t),o=jo(s,t,0,[t.props,r]),l=ug(o);if(rs(),i(),(l||t.sp)&&!io(t)&&Qg(t),l){if(o.then(Sd,Sd),e)return o.then(c=>{Rd(t,c)}).catch(c=>{Cl(c,t,0)});t.asyncDep=o}else Rd(t,o)}else T_(t)}function Rd(t,e,n){Ee(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ue(e)&&(t.setupState=Mg(e)),T_(t)}function T_(t,e,n){const s=t.type;t.render||(t.render=s.render||Dn);{const r=qo(t);ss();try{vT(t)}finally{rs(),r()}}}const sI={get(t,e){return Ot(t,"get",""),t[e]}};function rI(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,sI),slots:t.slots,emit:t.emit,expose:e}}function Dl(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Mg(uh(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in oo)return oo[n](t)},has(e,n){return n in e||n in oo}})):t.proxy}function iI(t,e=!0){return Ee(t)?t.displayName||t.name:t.name||e&&t.__name}function oI(t){return Ee(t)&&"__vccOpts"in t}const gt=(t,e)=>Yw(t,e,Ao);function gh(t,e,n){try{Ja(-1);const s=arguments.length;return s===2?Ue(e)&&!ue(e)?Ya(e)?be(t,null,[e]):be(t,e):be(t,null,e):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Ya(n)&&(n=[n]),be(t,e,n))}finally{Ja(1)}}const aI="3.5.25";/**
* @vue/runtime-dom v3.5.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let mu;const Cd=typeof window<"u"&&window.trustedTypes;if(Cd)try{mu=Cd.createPolicy("vue",{createHTML:t=>t})}catch{}const I_=mu?t=>mu.createHTML(t):t=>t,lI="http://www.w3.org/2000/svg",cI="http://www.w3.org/1998/Math/MathML",Kn=typeof document<"u"?document:null,Pd=Kn&&Kn.createElement("template"),uI={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,s)=>{const r=e==="svg"?Kn.createElementNS(lI,t):e==="mathml"?Kn.createElementNS(cI,t):n?Kn.createElement(t,{is:n}):Kn.createElement(t);return t==="select"&&s&&s.multiple!=null&&r.setAttribute("multiple",s.multiple),r},createText:t=>Kn.createTextNode(t),createComment:t=>Kn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Kn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,s,r,i){const o=n?n.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===i||!(r=r.nextSibling)););else{Pd.innerHTML=I_(s==="svg"?`<svg>${t}</svg>`:s==="mathml"?`<math>${t}</math>`:t);const l=Pd.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}e.insertBefore(l,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},vs="transition",ji="animation",bo=Symbol("_vtc"),A_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},hI=_t({},Hg,A_),fI=t=>(t.displayName="Transition",t.props=hI,t),Ho=fI((t,{slots:e})=>gh(oT,dI(t),e)),ir=(t,e=[])=>{ue(t)?t.forEach(n=>n(...e)):t&&t(...e)},kd=t=>t?ue(t)?t.some(e=>e.length>1):t.length>1:!1;function dI(t){const e={};for(const R in t)R in A_||(e[R]=t[R]);if(t.css===!1)return e;const{name:n="v",type:s,duration:r,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:u=o,appearToClass:h=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:m=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,E=pI(r),k=E&&E[0],S=E&&E[1],{onBeforeEnter:N,onEnter:O,onEnterCancelled:x,onLeave:F,onLeaveCancelled:U,onBeforeAppear:B=N,onAppear:T=O,onAppearCancelled:_=x}=e,v=(R,A,_e,Le)=>{R._enterCancelled=Le,or(R,A?h:l),or(R,A?u:o),_e&&_e()},b=(R,A)=>{R._isLeaving=!1,or(R,d),or(R,g),or(R,m),A&&A()},P=R=>(A,_e)=>{const Le=R?T:O,Te=()=>v(A,R,_e);ir(Le,[A,Te]),Nd(()=>{or(A,R?c:i),zn(A,R?h:l),kd(Le)||Od(A,s,k,Te)})};return _t(e,{onBeforeEnter(R){ir(N,[R]),zn(R,i),zn(R,o)},onBeforeAppear(R){ir(B,[R]),zn(R,c),zn(R,u)},onEnter:P(!1),onAppear:P(!0),onLeave(R,A){R._isLeaving=!0;const _e=()=>b(R,A);zn(R,d),R._enterCancelled?(zn(R,m),xd(R)):(xd(R),zn(R,m)),Nd(()=>{R._isLeaving&&(or(R,d),zn(R,g),kd(F)||Od(R,s,S,_e))}),ir(F,[R,_e])},onEnterCancelled(R){v(R,!1,void 0,!0),ir(x,[R])},onAppearCancelled(R){v(R,!0,void 0,!0),ir(_,[R])},onLeaveCancelled(R){b(R),ir(U,[R])}})}function pI(t){if(t==null)return null;if(Ue(t))return[Mc(t.enter),Mc(t.leave)];{const e=Mc(t);return[e,e]}}function Mc(t){return mw(t)}function zn(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[bo]||(t[bo]=new Set)).add(e)}function or(t,e){e.split(/\s+/).forEach(s=>s&&t.classList.remove(s));const n=t[bo];n&&(n.delete(e),n.size||(t[bo]=void 0))}function Nd(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let mI=0;function Od(t,e,n,s){const r=t._endId=++mI,i=()=>{r===t._endId&&s()};if(n!=null)return setTimeout(i,n);const{type:o,timeout:l,propCount:c}=gI(t,e);if(!o)return s();const u=o+"end";let h=0;const d=()=>{t.removeEventListener(u,m),i()},m=g=>{g.target===t&&++h>=c&&d()};setTimeout(()=>{h<c&&d()},l+1),t.addEventListener(u,m)}function gI(t,e){const n=window.getComputedStyle(t),s=E=>(n[E]||"").split(", "),r=s(`${vs}Delay`),i=s(`${vs}Duration`),o=Dd(r,i),l=s(`${ji}Delay`),c=s(`${ji}Duration`),u=Dd(l,c);let h=null,d=0,m=0;e===vs?o>0&&(h=vs,d=o,m=i.length):e===ji?u>0&&(h=ji,d=u,m=c.length):(d=Math.max(o,u),h=d>0?o>u?vs:ji:null,m=h?h===vs?i.length:c.length:0);const g=h===vs&&/\b(?:transform|all)(?:,|$)/.test(s(`${vs}Property`).toString());return{type:h,timeout:d,propCount:m,hasTransform:g}}function Dd(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,s)=>Vd(n)+Vd(t[s])))}function Vd(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function xd(t){return(t?t.ownerDocument:document).body.offsetHeight}function _I(t,e,n){const s=t[bo];s&&(e=(e?[e,...s]:[...s]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Za=Symbol("_vod"),b_=Symbol("_vsh"),S_={name:"show",beforeMount(t,{value:e},{transition:n}){t[Za]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):qi(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:s}){!e!=!n&&(s?e?(s.beforeEnter(t),qi(t,!0),s.enter(t)):s.leave(t,()=>{qi(t,!1)}):qi(t,e))},beforeUnmount(t,{value:e}){qi(t,e)}};function qi(t,e){t.style.display=e?t[Za]:"none",t[b_]=!e}const yI=Symbol(""),vI=/(?:^|;)\s*display\s*:/;function EI(t,e,n){const s=t.style,r=tt(n);let i=!1;if(n&&!r){if(e)if(tt(e))for(const o of e.split(";")){const l=o.slice(0,o.indexOf(":")).trim();n[l]==null&&ka(s,l,"")}else for(const o in e)n[o]==null&&ka(s,o,"");for(const o in n)o==="display"&&(i=!0),ka(s,o,n[o])}else if(r){if(e!==n){const o=s[yI];o&&(n+=";"+o),s.cssText=n,i=vI.test(n)}}else e&&t.removeAttribute("style");Za in t&&(t[Za]=i?s.display:"",t[b_]&&(s.display="none"))}const Md=/\s*!important$/;function ka(t,e,n){if(ue(n))n.forEach(s=>ka(t,e,s));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const s=wI(t,e);Md.test(n)?t.setProperty(zs(s),n.replace(Md,""),"important"):t[s]=n}}const Ld=["Webkit","Moz","ms"],Lc={};function wI(t,e){const n=Lc[e];if(n)return n;let s=fn(e);if(s!=="filter"&&s in t)return Lc[e]=s;s=Il(s);for(let r=0;r<Ld.length;r++){const i=Ld[r]+s;if(i in t)return Lc[e]=i}return e}const Fd="http://www.w3.org/1999/xlink";function Ud(t,e,n,s,r,i=ww(e)){s&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Fd,e.slice(6,e.length)):t.setAttributeNS(Fd,e,n):n==null||i&&!pg(n)?t.removeAttribute(e):t.setAttribute(e,i?"":jn(n)?String(n):n)}function Bd(t,e,n,s,r){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?I_(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=pg(n):n==null&&l==="string"?(n="",o=!0):l==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(r||e)}function Rs(t,e,n,s){t.addEventListener(e,n,s)}function TI(t,e,n,s){t.removeEventListener(e,n,s)}const $d=Symbol("_vei");function II(t,e,n,s,r=null){const i=t[$d]||(t[$d]={}),o=i[e];if(s&&o)o.value=s;else{const[l,c]=AI(e);if(s){const u=i[e]=RI(s,r);Rs(t,l,u,c)}else o&&(TI(t,l,o,c),i[e]=void 0)}}const jd=/(?:Once|Passive|Capture)$/;function AI(t){let e;if(jd.test(t)){e={};let s;for(;s=t.match(jd);)t=t.slice(0,t.length-s[0].length),e[s[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):zs(t.slice(2)),e]}let Fc=0;const bI=Promise.resolve(),SI=()=>Fc||(bI.then(()=>Fc=0),Fc=Date.now());function RI(t,e){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Tn(CI(s,n.value),e,5,[s])};return n.value=t,n.attached=SI(),n}function CI(t,e){if(ue(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(s=>r=>!r._stopped&&s&&s(r))}else return e}const qd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,PI=(t,e,n,s,r,i)=>{const o=r==="svg";e==="class"?_I(t,s,o):e==="style"?EI(t,n,s):El(e)?th(e)||II(t,e,n,s,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):kI(t,e,s,o))?(Bd(t,e,s),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Ud(t,e,s,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!tt(s))?Bd(t,fn(e),s,i,e):(e==="true-value"?t._trueValue=s:e==="false-value"&&(t._falseValue=s),Ud(t,e,s,o))};function kI(t,e,n,s){if(s)return!!(e==="innerHTML"||e==="textContent"||e in t&&qd(e)&&Ee(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return qd(e)&&tt(n)?!1:e in t}const ei=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ue(e)?n=>Ra(e,n):e};function NI(t){t.target.composing=!0}function Hd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ts=Symbol("_assign");function Wd(t,e,n){return e&&(t=t.trim()),n&&(t=Al(t)),t}const Cs={created(t,{modifiers:{lazy:e,trim:n,number:s}},r){t[ts]=ei(r);const i=s||r.props&&r.props.type==="number";Rs(t,e?"change":"input",o=>{o.target.composing||t[ts](Wd(t.value,n,i))}),(n||i)&&Rs(t,"change",()=>{t.value=Wd(t.value,n,i)}),e||(Rs(t,"compositionstart",NI),Rs(t,"compositionend",Hd),Rs(t,"change",Hd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:s,trim:r,number:i}},o){if(t[ts]=ei(o),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?Al(t.value):t.value,c=e??"";l!==c&&(document.activeElement===t&&t.type!=="range"&&(s&&e===n||r&&t.value.trim()===c)||(t.value=c))}},zd={deep:!0,created(t,e,n){t[ts]=ei(n),Rs(t,"change",()=>{const s=t._modelValue,r=So(t),i=t.checked,o=t[ts];if(ue(s)){const l=sh(s,r),c=l!==-1;if(i&&!c)o(s.concat(r));else if(!i&&c){const u=[...s];u.splice(l,1),o(u)}}else if(di(s)){const l=new Set(s);i?l.add(r):l.delete(r),o(l)}else o(R_(t,i))})},mounted:Gd,beforeUpdate(t,e,n){t[ts]=ei(n),Gd(t,e,n)}};function Gd(t,{value:e,oldValue:n},s){t._modelValue=e;let r;if(ue(e))r=sh(e,s.props.value)>-1;else if(di(e))r=e.has(s.props.value);else{if(e===n)return;r=Bo(e,R_(t,!0))}t.checked!==r&&(t.checked=r)}const lo={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const r=di(e);Rs(t,"change",()=>{const i=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Al(So(o)):So(o));t[ts](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Rr(()=>{t._assigning=!1})}),t[ts]=ei(s)},mounted(t,{value:e}){Kd(t,e)},beforeUpdate(t,e,n){t[ts]=ei(n)},updated(t,{value:e}){t._assigning||Kd(t,e)}};function Kd(t,e){const n=t.multiple,s=ue(e);if(!(n&&!s&&!di(e))){for(let r=0,i=t.options.length;r<i;r++){const o=t.options[r],l=So(o);if(n)if(s){const c=typeof l;c==="string"||c==="number"?o.selected=e.some(u=>String(u)===String(l)):o.selected=sh(e,l)>-1}else o.selected=e.has(l);else if(Bo(So(o),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function So(t){return"_value"in t?t._value:t.value}function R_(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const OI=["ctrl","shift","alt","meta"],DI={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>OI.some(n=>t[`${n}Key`]&&!e.includes(n))},xn=(t,e)=>{const n=t._withMods||(t._withMods={}),s=e.join(".");return n[s]||(n[s]=((r,...i)=>{for(let o=0;o<e.length;o++){const l=DI[e[o]];if(l&&l(r,e))return}return t(r,...i)}))},VI={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},_h=(t,e)=>{const n=t._withKeys||(t._withKeys={}),s=e.join(".");return n[s]||(n[s]=(r=>{if(!("key"in r))return;const i=zs(r.key);if(e.some(o=>o===i||VI[o]===i))return t(r)}))},xI=_t({patchProp:PI},uI);let Qd;function MI(){return Qd||(Qd=qT(xI))}const LI=((...t)=>{const e=MI().createApp(...t),{mount:n}=e;return e.mount=s=>{const r=UI(s);if(!r)return;const i=e._component;!Ee(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,FI(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e});function FI(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function UI(t){return tt(t)?document.querySelector(t):t}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let C_;const Vl=t=>C_=t,P_=Symbol();function gu(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var co;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(co||(co={}));function BI(){const t=yg(!0),e=t.run(()=>X({}));let n=[],s=[];const r=uh({install(i){Vl(r),r._a=i,i.provide(P_,r),i.config.globalProperties.$pinia=r,s.forEach(o=>n.push(o)),s=[]},use(i){return this._a?n.push(i):s.push(i),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r}const k_=()=>{};function Jd(t,e,n,s=k_){t.add(e);const r=()=>{t.delete(e)&&s()};return!n&&vg()&&Iw(r),r}function Fr(t,...e){t.forEach(n=>{n(...e)})}const $I=t=>t(),Yd=Symbol(),Uc=Symbol();function _u(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,s)=>t.set(s,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const s=e[n],r=t[n];gu(r)&&gu(s)&&t.hasOwnProperty(n)&&!We(s)&&!Vn(s)?t[n]=_u(r,s):t[n]=s}return t}const jI=Symbol();function qI(t){return!gu(t)||!Object.prototype.hasOwnProperty.call(t,jI)}const{assign:Ts}=Object;function HI(t){return!!(We(t)&&t.effect)}function WI(t,e,n,s){const{state:r,actions:i,getters:o}=e,l=n.state.value[t];let c;function u(){l||(n.state.value[t]=r?r():{});const h=zw(n.state.value[t]);return Ts(h,i,Object.keys(o||{}).reduce((d,m)=>(d[m]=uh(gt(()=>{Vl(n);const g=n._s.get(t);return o[m].call(g,g)})),d),{}))}return c=N_(t,u,e,n,s,!0),c}function N_(t,e,n={},s,r,i){let o;const l=Ts({actions:{}},n),c={deep:!0};let u,h,d=new Set,m=new Set,g;const E=s.state.value[t];!i&&!E&&(s.state.value[t]={}),X({});let k;function S(_){let v;u=h=!1,typeof _=="function"?(_(s.state.value[t]),v={type:co.patchFunction,storeId:t,events:g}):(_u(s.state.value[t],_),v={type:co.patchObject,payload:_,storeId:t,events:g});const b=k=Symbol();Rr().then(()=>{k===b&&(u=!0)}),h=!0,Fr(d,v,s.state.value[t])}const N=i?function(){const{state:v}=n,b=v?v():{};this.$patch(P=>{Ts(P,b)})}:k_;function O(){o.stop(),d.clear(),m.clear(),s._s.delete(t)}const x=(_,v="")=>{if(Yd in _)return _[Uc]=v,_;const b=function(){Vl(s);const P=Array.from(arguments),R=new Set,A=new Set;function _e(ge){R.add(ge)}function Le(ge){A.add(ge)}Fr(m,{args:P,name:b[Uc],store:U,after:_e,onError:Le});let Te;try{Te=_.apply(this&&this.$id===t?this:U,P)}catch(ge){throw Fr(A,ge),ge}return Te instanceof Promise?Te.then(ge=>(Fr(R,ge),ge)).catch(ge=>(Fr(A,ge),Promise.reject(ge))):(Fr(R,Te),Te)};return b[Yd]=!0,b[Uc]=v,b},F={_p:s,$id:t,$onAction:Jd.bind(null,m),$patch:S,$reset:N,$subscribe(_,v={}){const b=Jd(d,_,v.detached,()=>P()),P=o.run(()=>gr(()=>s.state.value[t],R=>{(v.flush==="sync"?h:u)&&_({storeId:t,type:co.direct,events:g},R)},Ts({},c,v)));return b},$dispose:O},U=$o(F);s._s.set(t,U);const T=(s._a&&s._a.runWithContext||$I)(()=>s._e.run(()=>(o=yg()).run(()=>e({action:x}))));for(const _ in T){const v=T[_];if(We(v)&&!HI(v)||Vn(v))i||(E&&qI(v)&&(We(v)?v.value=E[_]:_u(v,E[_])),s.state.value[t][_]=v);else if(typeof v=="function"){const b=x(v,_);T[_]=b,l.actions[_]=v}}return Ts(U,T),Ts(Ne(U),T),Object.defineProperty(U,"$state",{get:()=>s.state.value[t],set:_=>{S(v=>{Ts(v,_)})}}),s._p.forEach(_=>{Ts(U,o.run(()=>_({store:U,app:s._a,pinia:s,options:l})))}),E&&i&&n.hydrate&&n.hydrate(U.$state,E),u=!0,h=!0,U}/*! #__NO_SIDE_EFFECTS__ */function zI(t,e,n){let s;const r=typeof e=="function";s=r?n:e;function i(o,l){const c=ST();return o=o||(c?cn(P_,null):null),o&&Vl(o),o=C_,o._s.has(t)||(r?N_(t,e,s,o):WI(t,s,o)),o._s.get(t)}return i.$id=t,i}function pi(t){const e=Ne(t),n={};for(const s in e){const r=e[s];r.effect?n[s]=gt({get:()=>t[s],set(i){t[s]=i}}):(We(r)||Vn(r))&&(n[s]=Qw(t,s))}return n}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Br=typeof document<"u";function O_(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function GI(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&O_(t.default)}const Ve=Object.assign;function Bc(t,e){const n={};for(const s in e){const r=e[s];n[s]=In(r)?r.map(t):t(r)}return n}const uo=()=>{},In=Array.isArray;function Xd(t,e){const n={};for(const s in t)n[s]=s in e?e[s]:t[s];return n}const D_=/#/g,KI=/&/g,QI=/\//g,JI=/=/g,YI=/\?/g,V_=/\+/g,XI=/%5B/g,ZI=/%5D/g,x_=/%5E/g,eA=/%60/g,M_=/%7B/g,tA=/%7C/g,L_=/%7D/g,nA=/%20/g;function yh(t){return t==null?"":encodeURI(""+t).replace(tA,"|").replace(XI,"[").replace(ZI,"]")}function sA(t){return yh(t).replace(M_,"{").replace(L_,"}").replace(x_,"^")}function yu(t){return yh(t).replace(V_,"%2B").replace(nA,"+").replace(D_,"%23").replace(KI,"%26").replace(eA,"`").replace(M_,"{").replace(L_,"}").replace(x_,"^")}function rA(t){return yu(t).replace(JI,"%3D")}function iA(t){return yh(t).replace(D_,"%23").replace(YI,"%3F")}function oA(t){return iA(t).replace(QI,"%2F")}function Ro(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const aA=/\/$/,lA=t=>t.replace(aA,"");function $c(t,e,n="/"){let s,r={},i="",o="";const l=e.indexOf("#");let c=e.indexOf("?");return c=l>=0&&c>l?-1:c,c>=0&&(s=e.slice(0,c),i=e.slice(c,l>0?l:e.length),r=t(i.slice(1))),l>=0&&(s=s||e.slice(0,l),o=e.slice(l,e.length)),s=fA(s??e,n),{fullPath:s+i+o,path:s,query:r,hash:Ro(o)}}function cA(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Zd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function uA(t,e,n){const s=e.matched.length-1,r=n.matched.length-1;return s>-1&&s===r&&ti(e.matched[s],n.matched[r])&&F_(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function ti(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function F_(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!hA(t[n],e[n]))return!1;return!0}function hA(t,e){return In(t)?ep(t,e):In(e)?ep(e,t):t===e}function ep(t,e){return In(e)?t.length===e.length&&t.every((n,s)=>n===e[s]):t.length===1&&t[0]===e}function fA(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),s=t.split("/"),r=s[s.length-1];(r===".."||r===".")&&s.push("");let i=n.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+s.slice(o).join("/")}const Es={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let vu=(function(t){return t.pop="pop",t.push="push",t})({}),jc=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function dA(t){if(!t)if(Br){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),lA(t)}const pA=/^[^#]+#/;function mA(t,e){return t.replace(pA,"#")+e}function gA(t,e){const n=document.documentElement.getBoundingClientRect(),s=t.getBoundingClientRect();return{behavior:e.behavior,left:s.left-n.left-(e.left||0),top:s.top-n.top-(e.top||0)}}const xl=()=>({left:window.scrollX,top:window.scrollY});function _A(t){let e;if("el"in t){const n=t.el,s=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=gA(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function tp(t,e){return(history.state?history.state.position-e:-1)+t}const Eu=new Map;function yA(t,e){Eu.set(t,e)}function vA(t){const e=Eu.get(t);return Eu.delete(t),e}function EA(t){return typeof t=="string"||t&&typeof t=="object"}function U_(t){return typeof t=="string"||typeof t=="symbol"}let Ze=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const B_=Symbol("");Ze.MATCHER_NOT_FOUND+"",Ze.NAVIGATION_GUARD_REDIRECT+"",Ze.NAVIGATION_ABORTED+"",Ze.NAVIGATION_CANCELLED+"",Ze.NAVIGATION_DUPLICATED+"";function ni(t,e){return Ve(new Error,{type:t,[B_]:!0},e)}function Gn(t,e){return t instanceof Error&&B_ in t&&(e==null||!!(t.type&e))}const wA=["params","query","hash"];function TA(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of wA)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function IA(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<n.length;++s){const r=n[s].replace(V_," "),i=r.indexOf("="),o=Ro(i<0?r:r.slice(0,i)),l=i<0?null:Ro(r.slice(i+1));if(o in e){let c=e[o];In(c)||(c=e[o]=[c]),c.push(l)}else e[o]=l}return e}function np(t){let e="";for(let n in t){const s=t[n];if(n=rA(n),s==null){s!==void 0&&(e+=(e.length?"&":"")+n);continue}(In(s)?s.map(r=>r&&yu(r)):[s&&yu(s)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function AA(t){const e={};for(const n in t){const s=t[n];s!==void 0&&(e[n]=In(s)?s.map(r=>r==null?null:""+r):s==null?s:""+s)}return e}const bA=Symbol(""),sp=Symbol(""),Ml=Symbol(""),vh=Symbol(""),wu=Symbol("");function Hi(){let t=[];function e(s){return t.push(s),()=>{const r=t.indexOf(s);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ss(t,e,n,s,r,i=o=>o()){const o=s&&(s.enterCallbacks[r]=s.enterCallbacks[r]||[]);return()=>new Promise((l,c)=>{const u=m=>{m===!1?c(ni(Ze.NAVIGATION_ABORTED,{from:n,to:e})):m instanceof Error?c(m):EA(m)?c(ni(Ze.NAVIGATION_GUARD_REDIRECT,{from:e,to:m})):(o&&s.enterCallbacks[r]===o&&typeof m=="function"&&o.push(m),l())},h=i(()=>t.call(s&&s.instances[r],e,n,u));let d=Promise.resolve(h);t.length<3&&(d=d.then(u)),d.catch(m=>c(m))})}function qc(t,e,n,s,r=i=>i()){const i=[];for(const o of t)for(const l in o.components){let c=o.components[l];if(!(e!=="beforeRouteEnter"&&!o.instances[l]))if(O_(c)){const u=(c.__vccOpts||c)[e];u&&i.push(Ss(u,n,s,o,l,r))}else{let u=c();i.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const d=GI(h)?h.default:h;o.mods[l]=h,o.components[l]=d;const m=(d.__vccOpts||d)[e];return m&&Ss(m,n,s,o,l,r)()}))}}return i}function SA(t,e){const n=[],s=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const l=e.matched[o];l&&(t.matched.find(u=>ti(u,l))?s.push(l):n.push(l));const c=t.matched[o];c&&(e.matched.find(u=>ti(u,c))||r.push(c))}return[n,s,r]}/*!
 * vue-router v4.6.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let RA=()=>location.protocol+"//"+location.host;function $_(t,e){const{pathname:n,search:s,hash:r}=e,i=t.indexOf("#");if(i>-1){let o=r.includes(t.slice(i))?t.slice(i).length:1,l=r.slice(o);return l[0]!=="/"&&(l="/"+l),Zd(l,"")}return Zd(n,t)+s+r}function CA(t,e,n,s){let r=[],i=[],o=null;const l=({state:m})=>{const g=$_(t,location),E=n.value,k=e.value;let S=0;if(m){if(n.value=g,e.value=m,o&&o===E){o=null;return}S=k?m.position-k.position:0}else s(g);r.forEach(N=>{N(n.value,E,{delta:S,type:vu.pop,direction:S?S>0?jc.forward:jc.back:jc.unknown})})};function c(){o=n.value}function u(m){r.push(m);const g=()=>{const E=r.indexOf(m);E>-1&&r.splice(E,1)};return i.push(g),g}function h(){if(document.visibilityState==="hidden"){const{history:m}=window;if(!m.state)return;m.replaceState(Ve({},m.state,{scroll:xl()}),"")}}function d(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",h)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",h),document.addEventListener("visibilitychange",h),{pauseListeners:c,listen:u,destroy:d}}function rp(t,e,n,s=!1,r=!1){return{back:t,current:e,forward:n,replaced:s,position:window.history.length,scroll:r?xl():null}}function PA(t){const{history:e,location:n}=window,s={value:$_(t,n)},r={value:e.state};r.value||i(s.value,{back:null,current:s.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,u,h){const d=t.indexOf("#"),m=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+c:RA()+t+c;try{e[h?"replaceState":"pushState"](u,"",m),r.value=u}catch(g){console.error(g),n[h?"replace":"assign"](m)}}function o(c,u){i(c,Ve({},e.state,rp(r.value.back,c,r.value.forward,!0),u,{position:r.value.position}),!0),s.value=c}function l(c,u){const h=Ve({},r.value,e.state,{forward:c,scroll:xl()});i(h.current,h,!0),i(c,Ve({},rp(s.value,c,null),{position:h.position+1},u),!1),s.value=c}return{location:s,state:r,push:l,replace:o}}function kA(t){t=dA(t);const e=PA(t),n=CA(t,e.state,e.location,e.replace);function s(i,o=!0){o||n.pauseListeners(),history.go(i)}const r=Ve({location:"",base:t,go:s,createHref:mA.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function NA(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),kA(t)}let ur=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var ct=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})(ct||{});const OA={type:ur.Static,value:""},DA=/[a-zA-Z0-9_]/;function VA(t){if(!t)return[[]];if(t==="/")return[[OA]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=ct.Static,s=n;const r=[];let i;function o(){i&&r.push(i),i=[]}let l=0,c,u="",h="";function d(){u&&(n===ct.Static?i.push({type:ur.Static,value:u}):n===ct.Param||n===ct.ParamRegExp||n===ct.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),i.push({type:ur.Param,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function m(){u+=c}for(;l<t.length;){if(c=t[l++],c==="\\"&&n!==ct.ParamRegExp){s=n,n=ct.EscapeNext;continue}switch(n){case ct.Static:c==="/"?(u&&d(),o()):c===":"?(d(),n=ct.Param):m();break;case ct.EscapeNext:m(),n=s;break;case ct.Param:c==="("?n=ct.ParamRegExp:DA.test(c)?m():(d(),n=ct.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case ct.ParamRegExp:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=ct.ParamRegExpEnd:h+=c;break;case ct.ParamRegExpEnd:d(),n=ct.Static,c!=="*"&&c!=="?"&&c!=="+"&&l--,h="";break;default:e("Unknown state");break}}return n===ct.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),o(),r}const ip="[^/]+?",xA={sensitive:!1,strict:!1,start:!0,end:!0};var Bt=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(Bt||{});const MA=/[.+*?^${}()[\]/\\]/g;function LA(t,e){const n=Ve({},xA,e),s=[];let r=n.start?"^":"";const i=[];for(const u of t){const h=u.length?[]:[Bt.Root];n.strict&&!u.length&&(r+="/");for(let d=0;d<u.length;d++){const m=u[d];let g=Bt.Segment+(n.sensitive?Bt.BonusCaseSensitive:0);if(m.type===ur.Static)d||(r+="/"),r+=m.value.replace(MA,"\\$&"),g+=Bt.Static;else if(m.type===ur.Param){const{value:E,repeatable:k,optional:S,regexp:N}=m;i.push({name:E,repeatable:k,optional:S});const O=N||ip;if(O!==ip){g+=Bt.BonusCustomRegExp;try{`${O}`}catch(F){throw new Error(`Invalid custom RegExp for param "${E}" (${O}): `+F.message)}}let x=k?`((?:${O})(?:/(?:${O}))*)`:`(${O})`;d||(x=S&&u.length<2?`(?:/${x})`:"/"+x),S&&(x+="?"),r+=x,g+=Bt.Dynamic,S&&(g+=Bt.BonusOptional),k&&(g+=Bt.BonusRepeatable),O===".*"&&(g+=Bt.BonusWildcard)}h.push(g)}s.push(h)}if(n.strict&&n.end){const u=s.length-1;s[u][s[u].length-1]+=Bt.BonusStrict}n.strict||(r+="/?"),n.end?r+="$":n.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(u){const h=u.match(o),d={};if(!h)return null;for(let m=1;m<h.length;m++){const g=h[m]||"",E=i[m-1];d[E.name]=g&&E.repeatable?g.split("/"):g}return d}function c(u){let h="",d=!1;for(const m of t){(!d||!h.endsWith("/"))&&(h+="/"),d=!1;for(const g of m)if(g.type===ur.Static)h+=g.value;else if(g.type===ur.Param){const{value:E,repeatable:k,optional:S}=g,N=E in u?u[E]:"";if(In(N)&&!k)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const O=In(N)?N.join("/"):N;if(!O)if(S)m.length<2&&(h.endsWith("/")?h=h.slice(0,-1):d=!0);else throw new Error(`Missing required param "${E}"`);h+=O}}return h||"/"}return{re:o,score:s,keys:i,parse:l,stringify:c}}function FA(t,e){let n=0;for(;n<t.length&&n<e.length;){const s=e[n]-t[n];if(s)return s;n++}return t.length<e.length?t.length===1&&t[0]===Bt.Static+Bt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Bt.Static+Bt.Segment?1:-1:0}function j_(t,e){let n=0;const s=t.score,r=e.score;for(;n<s.length&&n<r.length;){const i=FA(s[n],r[n]);if(i)return i;n++}if(Math.abs(r.length-s.length)===1){if(op(s))return 1;if(op(r))return-1}return r.length-s.length}function op(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const UA={strict:!1,end:!0,sensitive:!1};function BA(t,e,n){const s=LA(VA(t.path),n),r=Ve(s,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function $A(t,e){const n=[],s=new Map;e=Xd(UA,e);function r(d){return s.get(d)}function i(d,m,g){const E=!g,k=lp(d);k.aliasOf=g&&g.record;const S=Xd(e,d),N=[k];if("alias"in d){const F=typeof d.alias=="string"?[d.alias]:d.alias;for(const U of F)N.push(lp(Ve({},k,{components:g?g.record.components:k.components,path:U,aliasOf:g?g.record:k})))}let O,x;for(const F of N){const{path:U}=F;if(m&&U[0]!=="/"){const B=m.record.path,T=B[B.length-1]==="/"?"":"/";F.path=m.record.path+(U&&T+U)}if(O=BA(F,m,S),g?g.alias.push(O):(x=x||O,x!==O&&x.alias.push(O),E&&d.name&&!cp(O)&&o(d.name)),q_(O)&&c(O),k.children){const B=k.children;for(let T=0;T<B.length;T++)i(B[T],O,g&&g.children[T])}g=g||O}return x?()=>{o(x)}:uo}function o(d){if(U_(d)){const m=s.get(d);m&&(s.delete(d),n.splice(n.indexOf(m),1),m.children.forEach(o),m.alias.forEach(o))}else{const m=n.indexOf(d);m>-1&&(n.splice(m,1),d.record.name&&s.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function l(){return n}function c(d){const m=HA(d,n);n.splice(m,0,d),d.record.name&&!cp(d)&&s.set(d.record.name,d)}function u(d,m){let g,E={},k,S;if("name"in d&&d.name){if(g=s.get(d.name),!g)throw ni(Ze.MATCHER_NOT_FOUND,{location:d});S=g.record.name,E=Ve(ap(m.params,g.keys.filter(x=>!x.optional).concat(g.parent?g.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),d.params&&ap(d.params,g.keys.map(x=>x.name))),k=g.stringify(E)}else if(d.path!=null)k=d.path,g=n.find(x=>x.re.test(k)),g&&(E=g.parse(k),S=g.record.name);else{if(g=m.name?s.get(m.name):n.find(x=>x.re.test(m.path)),!g)throw ni(Ze.MATCHER_NOT_FOUND,{location:d,currentLocation:m});S=g.record.name,E=Ve({},m.params,d.params),k=g.stringify(E)}const N=[];let O=g;for(;O;)N.unshift(O.record),O=O.parent;return{name:S,path:k,params:E,matched:N,meta:qA(N)}}t.forEach(d=>i(d));function h(){n.length=0,s.clear()}return{addRoute:i,resolve:u,removeRoute:o,clearRoutes:h,getRoutes:l,getRecordMatcher:r}}function ap(t,e){const n={};for(const s of e)s in t&&(n[s]=t[s]);return n}function lp(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:jA(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function jA(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const s in t.components)e[s]=typeof n=="object"?n[s]:n;return e}function cp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function qA(t){return t.reduce((e,n)=>Ve(e,n.meta),{})}function HA(t,e){let n=0,s=e.length;for(;n!==s;){const i=n+s>>1;j_(t,e[i])<0?s=i:n=i+1}const r=WA(t);return r&&(s=e.lastIndexOf(r,s-1)),s}function WA(t){let e=t;for(;e=e.parent;)if(q_(e)&&j_(t,e)===0)return e}function q_({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function up(t){const e=cn(Ml),n=cn(vh),s=gt(()=>{const c=ie(t.to);return e.resolve(c)}),r=gt(()=>{const{matched:c}=s.value,{length:u}=c,h=c[u-1],d=n.matched;if(!h||!d.length)return-1;const m=d.findIndex(ti.bind(null,h));if(m>-1)return m;const g=hp(c[u-2]);return u>1&&hp(h)===g&&d[d.length-1].path!==g?d.findIndex(ti.bind(null,c[u-2])):m}),i=gt(()=>r.value>-1&&JA(n.params,s.value.params)),o=gt(()=>r.value>-1&&r.value===n.matched.length-1&&F_(n.params,s.value.params));function l(c={}){if(QA(c)){const u=e[ie(t.replace)?"replace":"push"](ie(t.to)).catch(uo);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:s,href:gt(()=>s.value.href),isActive:i,isExactActive:o,navigate:l}}function zA(t){return t.length===1?t[0]:t}const GA=on({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:up,setup(t,{slots:e}){const n=$o(up(t)),{options:s}=cn(Ml),r=gt(()=>({[fp(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[fp(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&zA(e.default(n));return t.custom?i:gh("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},i)}}}),KA=GA;function QA(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function JA(t,e){for(const n in e){const s=e[n],r=t[n];if(typeof s=="string"){if(s!==r)return!1}else if(!In(r)||r.length!==s.length||s.some((i,o)=>i!==r[o]))return!1}return!0}function hp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const fp=(t,e,n)=>t??e??n,YA=on({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=cn(wu),r=gt(()=>t.route||s.value),i=cn(sp,0),o=gt(()=>{let u=ie(i);const{matched:h}=r.value;let d;for(;(d=h[u])&&!d.components;)u++;return u}),l=gt(()=>r.value.matched[o.value]);Ca(sp,gt(()=>o.value+1)),Ca(bA,l),Ca(wu,r);const c=X();return gr(()=>[c.value,l.value,t.name],([u,h,d],[m,g,E])=>{h&&(h.instances[d]=u,g&&g!==h&&u&&u===m&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!ti(h,g)||!m)&&(h.enterCallbacks[d]||[]).forEach(k=>k(u))},{flush:"post"}),()=>{const u=r.value,h=t.name,d=l.value,m=d&&d.components[h];if(!m)return dp(n.default,{Component:m,route:u});const g=d.props[h],E=g?g===!0?u.params:typeof g=="function"?g(u):g:null,S=gh(m,Ve({},E,e,{onVnodeUnmounted:N=>{N.component.isUnmounted&&(d.instances[h]=null)},ref:c}));return dp(n.default,{Component:S,route:u})||S}}});function dp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const XA=YA;function ZA(t){const e=$A(t.routes,t),n=t.parseQuery||IA,s=t.stringifyQuery||np,r=t.history,i=Hi(),o=Hi(),l=Hi(),c=qw(Es);let u=Es;Br&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Bc.bind(null,j=>""+j),d=Bc.bind(null,oA),m=Bc.bind(null,Ro);function g(j,se){let ee,ae;return U_(j)?(ee=e.getRecordMatcher(j),ae=se):ae=j,e.addRoute(ae,ee)}function E(j){const se=e.getRecordMatcher(j);se&&e.removeRoute(se)}function k(){return e.getRoutes().map(j=>j.record)}function S(j){return!!e.getRecordMatcher(j)}function N(j,se){if(se=Ve({},se||c.value),typeof j=="string"){const D=$c(n,j,se.path),q=e.resolve({path:D.path},se),z=r.createHref(D.fullPath);return Ve(D,q,{params:m(q.params),hash:Ro(D.hash),redirectedFrom:void 0,href:z})}let ee;if(j.path!=null)ee=Ve({},j,{path:$c(n,j.path,se.path).path});else{const D=Ve({},j.params);for(const q in D)D[q]==null&&delete D[q];ee=Ve({},j,{params:d(D)}),se.params=d(se.params)}const ae=e.resolve(ee,se),J=j.hash||"";ae.params=h(m(ae.params));const I=cA(s,Ve({},j,{hash:sA(J),path:ae.path})),C=r.createHref(I);return Ve({fullPath:I,hash:J,query:s===np?AA(j.query):j.query||{}},ae,{redirectedFrom:void 0,href:C})}function O(j){return typeof j=="string"?$c(n,j,c.value.path):Ve({},j)}function x(j,se){if(u!==j)return ni(Ze.NAVIGATION_CANCELLED,{from:se,to:j})}function F(j){return T(j)}function U(j){return F(Ve(O(j),{replace:!0}))}function B(j,se){const ee=j.matched[j.matched.length-1];if(ee&&ee.redirect){const{redirect:ae}=ee;let J=typeof ae=="function"?ae(j,se):ae;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=O(J):{path:J},J.params={}),Ve({query:j.query,hash:j.hash,params:J.path!=null?{}:j.params},J)}}function T(j,se){const ee=u=N(j),ae=c.value,J=j.state,I=j.force,C=j.replace===!0,D=B(ee,ae);if(D)return T(Ve(O(D),{state:typeof D=="object"?Ve({},J,D.state):J,force:I,replace:C}),se||ee);const q=ee;q.redirectedFrom=se;let z;return!I&&uA(s,ae,ee)&&(z=ni(Ze.NAVIGATION_DUPLICATED,{to:q,from:ae}),Je(ae,ae,!0,!1)),(z?Promise.resolve(z):b(q,ae)).catch($=>Gn($)?Gn($,Ze.NAVIGATION_GUARD_REDIRECT)?$:Qt($):ye($,q,ae)).then($=>{if($){if(Gn($,Ze.NAVIGATION_GUARD_REDIRECT))return T(Ve({replace:C},O($.to),{state:typeof $.to=="object"?Ve({},J,$.to.state):J,force:I}),se||q)}else $=R(q,ae,!0,C,J);return P(q,ae,$),$})}function _(j,se){const ee=x(j,se);return ee?Promise.reject(ee):Promise.resolve()}function v(j){const se=yt.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(j):j()}function b(j,se){let ee;const[ae,J,I]=SA(j,se);ee=qc(ae.reverse(),"beforeRouteLeave",j,se);for(const D of ae)D.leaveGuards.forEach(q=>{ee.push(Ss(q,j,se))});const C=_.bind(null,j,se);return ee.push(C),vt(ee).then(()=>{ee=[];for(const D of i.list())ee.push(Ss(D,j,se));return ee.push(C),vt(ee)}).then(()=>{ee=qc(J,"beforeRouteUpdate",j,se);for(const D of J)D.updateGuards.forEach(q=>{ee.push(Ss(q,j,se))});return ee.push(C),vt(ee)}).then(()=>{ee=[];for(const D of I)if(D.beforeEnter)if(In(D.beforeEnter))for(const q of D.beforeEnter)ee.push(Ss(q,j,se));else ee.push(Ss(D.beforeEnter,j,se));return ee.push(C),vt(ee)}).then(()=>(j.matched.forEach(D=>D.enterCallbacks={}),ee=qc(I,"beforeRouteEnter",j,se,v),ee.push(C),vt(ee))).then(()=>{ee=[];for(const D of o.list())ee.push(Ss(D,j,se));return ee.push(C),vt(ee)}).catch(D=>Gn(D,Ze.NAVIGATION_CANCELLED)?D:Promise.reject(D))}function P(j,se,ee){l.list().forEach(ae=>v(()=>ae(j,se,ee)))}function R(j,se,ee,ae,J){const I=x(j,se);if(I)return I;const C=se===Es,D=Br?history.state:{};ee&&(ae||C?r.replace(j.fullPath,Ve({scroll:C&&D&&D.scroll},J)):r.push(j.fullPath,J)),c.value=j,Je(j,se,ee,C),Qt()}let A;function _e(){A||(A=r.listen((j,se,ee)=>{if(!Lt.listening)return;const ae=N(j),J=B(ae,Lt.currentRoute.value);if(J){T(Ve(J,{replace:!0,force:!0}),ae).catch(uo);return}u=ae;const I=c.value;Br&&yA(tp(I.fullPath,ee.delta),xl()),b(ae,I).catch(C=>Gn(C,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_CANCELLED)?C:Gn(C,Ze.NAVIGATION_GUARD_REDIRECT)?(T(Ve(O(C.to),{force:!0}),ae).then(D=>{Gn(D,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_DUPLICATED)&&!ee.delta&&ee.type===vu.pop&&r.go(-1,!1)}).catch(uo),Promise.reject()):(ee.delta&&r.go(-ee.delta,!1),ye(C,ae,I))).then(C=>{C=C||R(ae,I,!1),C&&(ee.delta&&!Gn(C,Ze.NAVIGATION_CANCELLED)?r.go(-ee.delta,!1):ee.type===vu.pop&&Gn(C,Ze.NAVIGATION_ABORTED|Ze.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),P(ae,I,C)}).catch(uo)}))}let Le=Hi(),Te=Hi(),ge;function ye(j,se,ee){Qt(j);const ae=Te.list();return ae.length?ae.forEach(J=>J(j,se,ee)):console.error(j),Promise.reject(j)}function ft(){return ge&&c.value!==Es?Promise.resolve():new Promise((j,se)=>{Le.add([j,se])})}function Qt(j){return ge||(ge=!j,_e(),Le.list().forEach(([se,ee])=>j?ee(j):se()),Le.reset()),j}function Je(j,se,ee,ae){const{scrollBehavior:J}=t;if(!Br||!J)return Promise.resolve();const I=!ee&&vA(tp(j.fullPath,0))||(ae||!ee)&&history.state&&history.state.scroll||null;return Rr().then(()=>J(j,se,I)).then(C=>C&&_A(C)).catch(C=>ye(C,j,se))}const ze=j=>r.go(j);let Ht;const yt=new Set,Lt={currentRoute:c,listening:!0,addRoute:g,removeRoute:E,clearRoutes:e.clearRoutes,hasRoute:S,getRoutes:k,resolve:N,options:t,push:F,replace:U,go:ze,back:()=>ze(-1),forward:()=>ze(1),beforeEach:i.add,beforeResolve:o.add,afterEach:l.add,onError:Te.add,isReady:ft,install(j){j.component("RouterLink",KA),j.component("RouterView",XA),j.config.globalProperties.$router=Lt,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>ie(c)}),Br&&!Ht&&c.value===Es&&(Ht=!0,F(r.location).catch(ae=>{}));const se={};for(const ae in Es)Object.defineProperty(se,ae,{get:()=>c.value[ae],enumerable:!0});j.provide(Ml,Lt),j.provide(vh,Vg(se)),j.provide(wu,c);const ee=j.unmount;yt.add(j),j.unmount=function(){yt.delete(j),yt.size<1&&(u=Es,A&&A(),A=null,c.value=Es,Ht=!1,ge=!1),ee()}}};function vt(j){return j.reduce((se,ee)=>se.then(()=>v(ee)),Promise.resolve())}return Lt}function Ll(){return cn(Ml)}function H_(t){return cn(vh)}function W_(t,e){return function(){return t.apply(e,arguments)}}const{toString:eb}=Object.prototype,{getPrototypeOf:Eh}=Object,{iterator:Fl,toStringTag:z_}=Symbol,Ul=(t=>e=>{const n=eb.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),bn=t=>(t=t.toLowerCase(),e=>Ul(e)===t),Bl=t=>e=>typeof e===t,{isArray:mi}=Array,si=Bl("undefined");function Wo(t){return t!==null&&!si(t)&&t.constructor!==null&&!si(t.constructor)&&Gt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const G_=bn("ArrayBuffer");function tb(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&G_(t.buffer),e}const nb=Bl("string"),Gt=Bl("function"),K_=Bl("number"),zo=t=>t!==null&&typeof t=="object",sb=t=>t===!0||t===!1,Na=t=>{if(Ul(t)!=="object")return!1;const e=Eh(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(z_ in t)&&!(Fl in t)},rb=t=>{if(!zo(t)||Wo(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},ib=bn("Date"),ob=bn("File"),ab=bn("Blob"),lb=bn("FileList"),cb=t=>zo(t)&&Gt(t.pipe),ub=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Gt(t.append)&&((e=Ul(t))==="formdata"||e==="object"&&Gt(t.toString)&&t.toString()==="[object FormData]"))},hb=bn("URLSearchParams"),[fb,db,pb,mb]=["ReadableStream","Request","Response","Headers"].map(bn),gb=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Go(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,r;if(typeof t!="object"&&(t=[t]),mi(t))for(s=0,r=t.length;s<r;s++)e.call(null,t[s],s,t);else{if(Wo(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let l;for(s=0;s<o;s++)l=i[s],e.call(null,t[l],l,t)}}function Q_(t,e){if(Wo(t))return null;e=e.toLowerCase();const n=Object.keys(t);let s=n.length,r;for(;s-- >0;)if(r=n[s],e===r.toLowerCase())return r;return null}const hr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,J_=t=>!si(t)&&t!==hr;function Tu(){const{caseless:t,skipUndefined:e}=J_(this)&&this||{},n={},s=(r,i)=>{const o=t&&Q_(n,i)||i;Na(n[o])&&Na(r)?n[o]=Tu(n[o],r):Na(r)?n[o]=Tu({},r):mi(r)?n[o]=r.slice():(!e||!si(r))&&(n[o]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Go(arguments[r],s);return n}const _b=(t,e,n,{allOwnKeys:s}={})=>(Go(e,(r,i)=>{n&&Gt(r)?t[i]=W_(r,n):t[i]=r},{allOwnKeys:s}),t),yb=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),vb=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Eb=(t,e,n,s)=>{let r,i,o;const l={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),i=r.length;i-- >0;)o=r[i],(!s||s(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&Eh(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},wb=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},Tb=t=>{if(!t)return null;if(mi(t))return t;let e=t.length;if(!K_(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Ib=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Eh(Uint8Array)),Ab=(t,e)=>{const s=(t&&t[Fl]).call(t);let r;for(;(r=s.next())&&!r.done;){const i=r.value;e.call(t,i[0],i[1])}},bb=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},Sb=bn("HTMLFormElement"),Rb=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),pp=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Cb=bn("RegExp"),Y_=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};Go(n,(r,i)=>{let o;(o=e(r,i,t))!==!1&&(s[i]=o||r)}),Object.defineProperties(t,s)},Pb=t=>{Y_(t,(e,n)=>{if(Gt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(Gt(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},kb=(t,e)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return mi(t)?s(t):s(String(t).split(e)),n},Nb=()=>{},Ob=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Db(t){return!!(t&&Gt(t.append)&&t[z_]==="FormData"&&t[Fl])}const Vb=t=>{const e=new Array(10),n=(s,r)=>{if(zo(s)){if(e.indexOf(s)>=0)return;if(Wo(s))return s;if(!("toJSON"in s)){e[r]=s;const i=mi(s)?[]:{};return Go(s,(o,l)=>{const c=n(o,r+1);!si(c)&&(i[l]=c)}),e[r]=void 0,i}}return s};return n(t,0)},xb=bn("AsyncFunction"),Mb=t=>t&&(zo(t)||Gt(t))&&Gt(t.then)&&Gt(t.catch),X_=((t,e)=>t?setImmediate:e?((n,s)=>(hr.addEventListener("message",({source:r,data:i})=>{r===hr&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),hr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Gt(hr.postMessage)),Lb=typeof queueMicrotask<"u"?queueMicrotask.bind(hr):typeof process<"u"&&process.nextTick||X_,Fb=t=>t!=null&&Gt(t[Fl]),M={isArray:mi,isArrayBuffer:G_,isBuffer:Wo,isFormData:ub,isArrayBufferView:tb,isString:nb,isNumber:K_,isBoolean:sb,isObject:zo,isPlainObject:Na,isEmptyObject:rb,isReadableStream:fb,isRequest:db,isResponse:pb,isHeaders:mb,isUndefined:si,isDate:ib,isFile:ob,isBlob:ab,isRegExp:Cb,isFunction:Gt,isStream:cb,isURLSearchParams:hb,isTypedArray:Ib,isFileList:lb,forEach:Go,merge:Tu,extend:_b,trim:gb,stripBOM:yb,inherits:vb,toFlatObject:Eb,kindOf:Ul,kindOfTest:bn,endsWith:wb,toArray:Tb,forEachEntry:Ab,matchAll:bb,isHTMLForm:Sb,hasOwnProperty:pp,hasOwnProp:pp,reduceDescriptors:Y_,freezeMethods:Pb,toObjectSet:kb,toCamelCase:Rb,noop:Nb,toFiniteNumber:Ob,findKey:Q_,global:hr,isContextDefined:J_,isSpecCompliantForm:Db,toJSONObject:Vb,isAsyncFn:xb,isThenable:Mb,setImmediate:X_,asap:Lb,isIterable:Fb};function Ie(t,e,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}M.inherits(Ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:M.toJSONObject(this.config),code:this.code,status:this.status}}});const Z_=Ie.prototype,ey={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ey[t]={value:t}});Object.defineProperties(Ie,ey);Object.defineProperty(Z_,"isAxiosError",{value:!0});Ie.from=(t,e,n,s,r,i)=>{const o=Object.create(Z_);M.toFlatObject(t,o,function(h){return h!==Error.prototype},u=>u!=="isAxiosError");const l=t&&t.message?t.message:"Error",c=e==null&&t?t.code:e;return Ie.call(o,l,c,n,s,r),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",i&&Object.assign(o,i),o};const Ub=null;function Iu(t){return M.isPlainObject(t)||M.isArray(t)}function ty(t){return M.endsWith(t,"[]")?t.slice(0,-2):t}function mp(t,e,n){return t?t.concat(e).map(function(r,i){return r=ty(r),!n&&i?"["+r+"]":r}).join(n?".":""):e}function Bb(t){return M.isArray(t)&&!t.some(Iu)}const $b=M.toFlatObject(M,{},null,function(e){return/^is[A-Z]/.test(e)});function $l(t,e,n){if(!M.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=M.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,S){return!M.isUndefined(S[k])});const s=n.metaTokens,r=n.visitor||h,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&M.isSpecCompliantForm(e);if(!M.isFunction(r))throw new TypeError("visitor must be a function");function u(E){if(E===null)return"";if(M.isDate(E))return E.toISOString();if(M.isBoolean(E))return E.toString();if(!c&&M.isBlob(E))throw new Ie("Blob is not supported. Use a Buffer instead.");return M.isArrayBuffer(E)||M.isTypedArray(E)?c&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function h(E,k,S){let N=E;if(E&&!S&&typeof E=="object"){if(M.endsWith(k,"{}"))k=s?k:k.slice(0,-2),E=JSON.stringify(E);else if(M.isArray(E)&&Bb(E)||(M.isFileList(E)||M.endsWith(k,"[]"))&&(N=M.toArray(E)))return k=ty(k),N.forEach(function(x,F){!(M.isUndefined(x)||x===null)&&e.append(o===!0?mp([k],F,i):o===null?k:k+"[]",u(x))}),!1}return Iu(E)?!0:(e.append(mp(S,k,i),u(E)),!1)}const d=[],m=Object.assign($b,{defaultVisitor:h,convertValue:u,isVisitable:Iu});function g(E,k){if(!M.isUndefined(E)){if(d.indexOf(E)!==-1)throw Error("Circular reference detected in "+k.join("."));d.push(E),M.forEach(E,function(N,O){(!(M.isUndefined(N)||N===null)&&r.call(e,N,M.isString(O)?O.trim():O,k,m))===!0&&g(N,k?k.concat(O):[O])}),d.pop()}}if(!M.isObject(t))throw new TypeError("data must be an object");return g(t),e}function gp(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function wh(t,e){this._pairs=[],t&&$l(t,this,e)}const ny=wh.prototype;ny.append=function(e,n){this._pairs.push([e,n])};ny.toString=function(e){const n=e?function(s){return e.call(this,s,gp)}:gp;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function jb(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function sy(t,e,n){if(!e)return t;const s=n&&n.encode||jb;M.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(e,n):i=M.isURLSearchParams(e)?e.toString():new wh(e,n).toString(s),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class _p{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){M.forEach(this.handlers,function(s){s!==null&&e(s)})}}const ry={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qb=typeof URLSearchParams<"u"?URLSearchParams:wh,Hb=typeof FormData<"u"?FormData:null,Wb=typeof Blob<"u"?Blob:null,zb={isBrowser:!0,classes:{URLSearchParams:qb,FormData:Hb,Blob:Wb},protocols:["http","https","file","blob","url","data"]},Th=typeof window<"u"&&typeof document<"u",Au=typeof navigator=="object"&&navigator||void 0,Gb=Th&&(!Au||["ReactNative","NativeScript","NS"].indexOf(Au.product)<0),Kb=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Qb=Th&&window.location.href||"http://localhost",Jb=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Th,hasStandardBrowserEnv:Gb,hasStandardBrowserWebWorkerEnv:Kb,navigator:Au,origin:Qb},Symbol.toStringTag,{value:"Module"})),xt={...Jb,...zb};function Yb(t,e){return $l(t,new xt.classes.URLSearchParams,{visitor:function(n,s,r,i){return xt.isNode&&M.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function Xb(t){return M.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Zb(t){const e={},n=Object.keys(t);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],e[i]=t[i];return e}function iy(t){function e(n,s,r,i){let o=n[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=n.length;return o=!o&&M.isArray(r)?r.length:o,c?(M.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!l):((!r[o]||!M.isObject(r[o]))&&(r[o]=[]),e(n,s,r[o],i)&&M.isArray(r[o])&&(r[o]=Zb(r[o])),!l)}if(M.isFormData(t)&&M.isFunction(t.entries)){const n={};return M.forEachEntry(t,(s,r)=>{e(Xb(s),r,n,0)}),n}return null}function eS(t,e,n){if(M.isString(t))try{return(e||JSON.parse)(t),M.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const Ko={transitional:ry,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=M.isObject(e);if(i&&M.isHTMLForm(e)&&(e=new FormData(e)),M.isFormData(e))return r?JSON.stringify(iy(e)):e;if(M.isArrayBuffer(e)||M.isBuffer(e)||M.isStream(e)||M.isFile(e)||M.isBlob(e)||M.isReadableStream(e))return e;if(M.isArrayBufferView(e))return e.buffer;if(M.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Yb(e,this.formSerializer).toString();if((l=M.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return $l(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),eS(e)):e}],transformResponse:[function(e){const n=this.transitional||Ko.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(M.isResponse(e)||M.isReadableStream(e))return e;if(e&&M.isString(e)&&(s&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?Ie.from(l,Ie.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:xt.classes.FormData,Blob:xt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};M.forEach(["delete","get","head","post","put","patch"],t=>{Ko.headers[t]={}});const tS=M.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nS=t=>{const e={};let n,s,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!n||e[n]&&tS[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},yp=Symbol("internals");function Wi(t){return t&&String(t).trim().toLowerCase()}function Oa(t){return t===!1||t==null?t:M.isArray(t)?t.map(Oa):String(t)}function sS(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const rS=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Hc(t,e,n,s,r){if(M.isFunction(s))return s.call(this,e,n);if(r&&(e=n),!!M.isString(e)){if(M.isString(s))return e.indexOf(s)!==-1;if(M.isRegExp(s))return s.test(e)}}function iS(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function oS(t,e){const n=M.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(r,i,o){return this[s].call(this,e,r,i,o)},configurable:!0})})}let Kt=class{constructor(e){e&&this.set(e)}set(e,n,s){const r=this;function i(l,c,u){const h=Wi(c);if(!h)throw new Error("header name must be a non-empty string");const d=M.findKey(r,h);(!d||r[d]===void 0||u===!0||u===void 0&&r[d]!==!1)&&(r[d||c]=Oa(l))}const o=(l,c)=>M.forEach(l,(u,h)=>i(u,h,c));if(M.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(M.isString(e)&&(e=e.trim())&&!rS(e))o(nS(e),n);else if(M.isObject(e)&&M.isIterable(e)){let l={},c,u;for(const h of e){if(!M.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[u=h[0]]=(c=l[u])?M.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,n)}else e!=null&&i(n,e,s);return this}get(e,n){if(e=Wi(e),e){const s=M.findKey(this,e);if(s){const r=this[s];if(!n)return r;if(n===!0)return sS(r);if(M.isFunction(n))return n.call(this,r,s);if(M.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Wi(e),e){const s=M.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||Hc(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let r=!1;function i(o){if(o=Wi(o),o){const l=M.findKey(s,o);l&&(!n||Hc(s,s[l],l,n))&&(delete s[l],r=!0)}}return M.isArray(e)?e.forEach(i):i(e),r}clear(e){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!e||Hc(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const n=this,s={};return M.forEach(this,(r,i)=>{const o=M.findKey(s,i);if(o){n[o]=Oa(r),delete n[i];return}const l=e?iS(i):String(i).trim();l!==i&&delete n[i],n[l]=Oa(r),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return M.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=e&&M.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[yp]=this[yp]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=Wi(o);s[l]||(oS(r,o),s[l]=!0)}return M.isArray(e)?e.forEach(i):i(e),this}};Kt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);M.reduceDescriptors(Kt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});M.freezeMethods(Kt);function Wc(t,e){const n=this||Ko,s=e||n,r=Kt.from(s.headers);let i=s.data;return M.forEach(t,function(l){i=l.call(n,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function oy(t){return!!(t&&t.__CANCEL__)}function gi(t,e,n){Ie.call(this,t??"canceled",Ie.ERR_CANCELED,e,n),this.name="CanceledError"}M.inherits(gi,Ie,{__CANCEL__:!0});function ay(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new Ie("Request failed with status code "+n.status,[Ie.ERR_BAD_REQUEST,Ie.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function aS(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function lS(t,e){t=t||10;const n=new Array(t),s=new Array(t);let r=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),h=s[i];o||(o=u),n[r]=c,s[r]=u;let d=i,m=0;for(;d!==r;)m+=n[d++],d=d%t;if(r=(r+1)%t,r===i&&(i=(i+1)%t),u-o<e)return;const g=h&&u-h;return g?Math.round(m*1e3/g):void 0}}function cS(t,e){let n=0,s=1e3/e,r,i;const o=(u,h=Date.now())=>{n=h,r=null,i&&(clearTimeout(i),i=null),t(...u)};return[(...u)=>{const h=Date.now(),d=h-n;d>=s?o(u,h):(r=u,i||(i=setTimeout(()=>{i=null,o(r)},s-d)))},()=>r&&o(r)]}const el=(t,e,n=3)=>{let s=0;const r=lS(50,250);return cS(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,u=r(c),h=o<=l;s=o;const d={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&h?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(d)},n)},vp=(t,e)=>{const n=t!=null;return[s=>e[0]({lengthComputable:n,total:t,loaded:s}),e[1]]},Ep=t=>(...e)=>M.asap(()=>t(...e)),uS=xt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,xt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(xt.origin),xt.navigator&&/(msie|trident)/i.test(xt.navigator.userAgent)):()=>!0,hS=xt.hasStandardBrowserEnv?{write(t,e,n,s,r,i,o){if(typeof document>"u")return;const l=[`${t}=${encodeURIComponent(e)}`];M.isNumber(n)&&l.push(`expires=${new Date(n).toUTCString()}`),M.isString(s)&&l.push(`path=${s}`),M.isString(r)&&l.push(`domain=${r}`),i===!0&&l.push("secure"),M.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function fS(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function dS(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function ly(t,e,n){let s=!fS(e);return t&&(s||n==!1)?dS(t,e):e}const wp=t=>t instanceof Kt?{...t}:t;function Er(t,e){e=e||{};const n={};function s(u,h,d,m){return M.isPlainObject(u)&&M.isPlainObject(h)?M.merge.call({caseless:m},u,h):M.isPlainObject(h)?M.merge({},h):M.isArray(h)?h.slice():h}function r(u,h,d,m){if(M.isUndefined(h)){if(!M.isUndefined(u))return s(void 0,u,d,m)}else return s(u,h,d,m)}function i(u,h){if(!M.isUndefined(h))return s(void 0,h)}function o(u,h){if(M.isUndefined(h)){if(!M.isUndefined(u))return s(void 0,u)}else return s(void 0,h)}function l(u,h,d){if(d in e)return s(u,h);if(d in t)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,h,d)=>r(wp(u),wp(h),d,!0)};return M.forEach(Object.keys({...t,...e}),function(h){const d=c[h]||r,m=d(t[h],e[h],h);M.isUndefined(m)&&d!==l||(n[h]=m)}),n}const cy=t=>{const e=Er({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=e;if(e.headers=o=Kt.from(o),e.url=sy(ly(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),M.isFormData(n)){if(xt.hasStandardBrowserEnv||xt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(M.isFunction(n.getHeaders)){const c=n.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([h,d])=>{u.includes(h.toLowerCase())&&o.set(h,d)})}}if(xt.hasStandardBrowserEnv&&(s&&M.isFunction(s)&&(s=s(e)),s||s!==!1&&uS(e.url))){const c=r&&i&&hS.read(i);c&&o.set(r,c)}return e},pS=typeof XMLHttpRequest<"u",mS=pS&&function(t){return new Promise(function(n,s){const r=cy(t);let i=r.data;const o=Kt.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=r,h,d,m,g,E;function k(){g&&g(),E&&E(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let S=new XMLHttpRequest;S.open(r.method.toUpperCase(),r.url,!0),S.timeout=r.timeout;function N(){if(!S)return;const x=Kt.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),U={data:!l||l==="text"||l==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:x,config:t,request:S};ay(function(T){n(T),k()},function(T){s(T),k()},U),S=null}"onloadend"in S?S.onloadend=N:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(N)},S.onabort=function(){S&&(s(new Ie("Request aborted",Ie.ECONNABORTED,t,S)),S=null)},S.onerror=function(F){const U=F&&F.message?F.message:"Network Error",B=new Ie(U,Ie.ERR_NETWORK,t,S);B.event=F||null,s(B),S=null},S.ontimeout=function(){let F=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const U=r.transitional||ry;r.timeoutErrorMessage&&(F=r.timeoutErrorMessage),s(new Ie(F,U.clarifyTimeoutError?Ie.ETIMEDOUT:Ie.ECONNABORTED,t,S)),S=null},i===void 0&&o.setContentType(null),"setRequestHeader"in S&&M.forEach(o.toJSON(),function(F,U){S.setRequestHeader(U,F)}),M.isUndefined(r.withCredentials)||(S.withCredentials=!!r.withCredentials),l&&l!=="json"&&(S.responseType=r.responseType),u&&([m,E]=el(u,!0),S.addEventListener("progress",m)),c&&S.upload&&([d,g]=el(c),S.upload.addEventListener("progress",d),S.upload.addEventListener("loadend",g)),(r.cancelToken||r.signal)&&(h=x=>{S&&(s(!x||x.type?new gi(null,t,S):x),S.abort(),S=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const O=aS(r.url);if(O&&xt.protocols.indexOf(O)===-1){s(new Ie("Unsupported protocol "+O+":",Ie.ERR_BAD_REQUEST,t));return}S.send(i||null)})},gS=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let s=new AbortController,r;const i=function(u){if(!r){r=!0,l();const h=u instanceof Error?u:this.reason;s.abort(h instanceof Ie?h:new gi(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,i(new Ie(`timeout ${e} of ms exceeded`,Ie.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>M.asap(l),c}},_S=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let s=0,r;for(;s<n;)r=s+e,yield t.slice(s,r),s=r},yS=async function*(t,e){for await(const n of vS(t))yield*_S(n,e)},vS=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)break;yield s}}finally{await e.cancel()}},Tp=(t,e,n,s)=>{const r=yS(t,e);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:h}=await r.next();if(u){l(),c.close();return}let d=h.byteLength;if(n){let m=i+=d;n(m)}c.enqueue(new Uint8Array(h))}catch(u){throw l(u),u}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},Ip=64*1024,{isFunction:Ea}=M,ES=(({Request:t,Response:e})=>({Request:t,Response:e}))(M.global),{ReadableStream:Ap,TextEncoder:bp}=M.global,Sp=(t,...e)=>{try{return!!t(...e)}catch{return!1}},wS=t=>{t=M.merge.call({skipUndefined:!0},ES,t);const{fetch:e,Request:n,Response:s}=t,r=e?Ea(e):typeof fetch=="function",i=Ea(n),o=Ea(s);if(!r)return!1;const l=r&&Ea(Ap),c=r&&(typeof bp=="function"?(E=>k=>E.encode(k))(new bp):async E=>new Uint8Array(await new n(E).arrayBuffer())),u=i&&l&&Sp(()=>{let E=!1;const k=new n(xt.origin,{body:new Ap,method:"POST",get duplex(){return E=!0,"half"}}).headers.has("Content-Type");return E&&!k}),h=o&&l&&Sp(()=>M.isReadableStream(new s("").body)),d={stream:h&&(E=>E.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(E=>{!d[E]&&(d[E]=(k,S)=>{let N=k&&k[E];if(N)return N.call(k);throw new Ie(`Response type '${E}' is not supported`,Ie.ERR_NOT_SUPPORT,S)})});const m=async E=>{if(E==null)return 0;if(M.isBlob(E))return E.size;if(M.isSpecCompliantForm(E))return(await new n(xt.origin,{method:"POST",body:E}).arrayBuffer()).byteLength;if(M.isArrayBufferView(E)||M.isArrayBuffer(E))return E.byteLength;if(M.isURLSearchParams(E)&&(E=E+""),M.isString(E))return(await c(E)).byteLength},g=async(E,k)=>{const S=M.toFiniteNumber(E.getContentLength());return S??m(k)};return async E=>{let{url:k,method:S,data:N,signal:O,cancelToken:x,timeout:F,onDownloadProgress:U,onUploadProgress:B,responseType:T,headers:_,withCredentials:v="same-origin",fetchOptions:b}=cy(E),P=e||fetch;T=T?(T+"").toLowerCase():"text";let R=gS([O,x&&x.toAbortSignal()],F),A=null;const _e=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let Le;try{if(B&&u&&S!=="get"&&S!=="head"&&(Le=await g(_,N))!==0){let Je=new n(k,{method:"POST",body:N,duplex:"half"}),ze;if(M.isFormData(N)&&(ze=Je.headers.get("content-type"))&&_.setContentType(ze),Je.body){const[Ht,yt]=vp(Le,el(Ep(B)));N=Tp(Je.body,Ip,Ht,yt)}}M.isString(v)||(v=v?"include":"omit");const Te=i&&"credentials"in n.prototype,ge={...b,signal:R,method:S.toUpperCase(),headers:_.normalize().toJSON(),body:N,duplex:"half",credentials:Te?v:void 0};A=i&&new n(k,ge);let ye=await(i?P(A,b):P(k,ge));const ft=h&&(T==="stream"||T==="response");if(h&&(U||ft&&_e)){const Je={};["status","statusText","headers"].forEach(Lt=>{Je[Lt]=ye[Lt]});const ze=M.toFiniteNumber(ye.headers.get("content-length")),[Ht,yt]=U&&vp(ze,el(Ep(U),!0))||[];ye=new s(Tp(ye.body,Ip,Ht,()=>{yt&&yt(),_e&&_e()}),Je)}T=T||"text";let Qt=await d[M.findKey(d,T)||"text"](ye,E);return!ft&&_e&&_e(),await new Promise((Je,ze)=>{ay(Je,ze,{data:Qt,headers:Kt.from(ye.headers),status:ye.status,statusText:ye.statusText,config:E,request:A})})}catch(Te){throw _e&&_e(),Te&&Te.name==="TypeError"&&/Load failed|fetch/i.test(Te.message)?Object.assign(new Ie("Network Error",Ie.ERR_NETWORK,E,A),{cause:Te.cause||Te}):Ie.from(Te,Te&&Te.code,E,A)}}},TS=new Map,uy=t=>{let e=t&&t.env||{};const{fetch:n,Request:s,Response:r}=e,i=[s,r,n];let o=i.length,l=o,c,u,h=TS;for(;l--;)c=i[l],u=h.get(c),u===void 0&&h.set(c,u=l?new Map:wS(e)),h=u;return u};uy();const Ih={http:Ub,xhr:mS,fetch:{get:uy}};M.forEach(Ih,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Rp=t=>`- ${t}`,IS=t=>M.isFunction(t)||t===null||t===!1;function AS(t,e){t=M.isArray(t)?t:[t];const{length:n}=t;let s,r;const i={};for(let o=0;o<n;o++){s=t[o];let l;if(r=s,!IS(s)&&(r=Ih[(l=String(s)).toLowerCase()],r===void 0))throw new Ie(`Unknown adapter '${l}'`);if(r&&(M.isFunction(r)||(r=r.get(e))))break;i[l||"#"+o]=r}if(!r){const o=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=n?o.length>1?`since :
`+o.map(Rp).join(`
`):" "+Rp(o[0]):"as no adapter specified";throw new Ie("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r}const hy={getAdapter:AS,adapters:Ih};function zc(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new gi(null,t)}function Cp(t){return zc(t),t.headers=Kt.from(t.headers),t.data=Wc.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),hy.getAdapter(t.adapter||Ko.adapter,t)(t).then(function(s){return zc(t),s.data=Wc.call(t,t.transformResponse,s),s.headers=Kt.from(s.headers),s},function(s){return oy(s)||(zc(t),s&&s.response&&(s.response.data=Wc.call(t,t.transformResponse,s.response),s.response.headers=Kt.from(s.response.headers))),Promise.reject(s)})}const fy="1.13.2",jl={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{jl[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const Pp={};jl.transitional=function(e,n,s){function r(i,o){return"[Axios v"+fy+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(e===!1)throw new Ie(r(o," has been removed"+(n?" in "+n:"")),Ie.ERR_DEPRECATED);return n&&!Pp[o]&&(Pp[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,l):!0}};jl.spelling=function(e){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function bS(t,e,n){if(typeof t!="object")throw new Ie("options must be an object",Ie.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let r=s.length;for(;r-- >0;){const i=s[r],o=e[i];if(o){const l=t[i],c=l===void 0||o(l,i,t);if(c!==!0)throw new Ie("option "+i+" must be "+c,Ie.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ie("Unknown option "+i,Ie.ERR_BAD_OPTION)}}const Da={assertOptions:bS,validators:jl},Pn=Da.validators;let _r=class{constructor(e){this.defaults=e||{},this.interceptors={request:new _p,response:new _p}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Er(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&Da.assertOptions(s,{silentJSONParsing:Pn.transitional(Pn.boolean),forcedJSONParsing:Pn.transitional(Pn.boolean),clarifyTimeoutError:Pn.transitional(Pn.boolean)},!1),r!=null&&(M.isFunction(r)?n.paramsSerializer={serialize:r}:Da.assertOptions(r,{encode:Pn.function,serialize:Pn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Da.assertOptions(n,{baseUrl:Pn.spelling("baseURL"),withXsrfToken:Pn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&M.merge(i.common,i[n.method]);i&&M.forEach(["delete","get","head","post","put","patch","common"],E=>{delete i[E]}),n.headers=Kt.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(n)===!1||(c=c&&k.synchronous,l.unshift(k.fulfilled,k.rejected))});const u=[];this.interceptors.response.forEach(function(k){u.push(k.fulfilled,k.rejected)});let h,d=0,m;if(!c){const E=[Cp.bind(this),void 0];for(E.unshift(...l),E.push(...u),m=E.length,h=Promise.resolve(n);d<m;)h=h.then(E[d++],E[d++]);return h}m=l.length;let g=n;for(;d<m;){const E=l[d++],k=l[d++];try{g=E(g)}catch(S){k.call(this,S);break}}try{h=Cp.call(this,g)}catch(E){return Promise.reject(E)}for(d=0,m=u.length;d<m;)h=h.then(u[d++],u[d++]);return h}getUri(e){e=Er(this.defaults,e);const n=ly(e.baseURL,e.url,e.allowAbsoluteUrls);return sy(n,e.params,e.paramsSerializer)}};M.forEach(["delete","get","head","options"],function(e){_r.prototype[e]=function(n,s){return this.request(Er(s||{},{method:e,url:n,data:(s||{}).data}))}});M.forEach(["post","put","patch"],function(e){function n(s){return function(i,o,l){return this.request(Er(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}_r.prototype[e]=n(),_r.prototype[e+"Form"]=n(!0)});let SS=class dy{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},e(function(i,o,l){s.reason||(s.reason=new gi(i,o,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=s=>{e.abort(s)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new dy(function(r){e=r}),cancel:e}}};function RS(t){return function(n){return t.apply(null,n)}}function CS(t){return M.isObject(t)&&t.isAxiosError===!0}const bu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(bu).forEach(([t,e])=>{bu[e]=t});function py(t){const e=new _r(t),n=W_(_r.prototype.request,e);return M.extend(n,_r.prototype,e,{allOwnKeys:!0}),M.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return py(Er(t,r))},n}const rt=py(Ko);rt.Axios=_r;rt.CanceledError=gi;rt.CancelToken=SS;rt.isCancel=oy;rt.VERSION=fy;rt.toFormData=$l;rt.AxiosError=Ie;rt.Cancel=rt.CanceledError;rt.all=function(e){return Promise.all(e)};rt.spread=RS;rt.isAxiosError=CS;rt.mergeConfig=Er;rt.AxiosHeaders=Kt;rt.formToJSON=t=>iy(M.isHTMLForm(t)?new FormData(t):t);rt.getAdapter=hy.getAdapter;rt.HttpStatusCode=bu;rt.default=rt;const{Axios:vV,AxiosError:EV,CanceledError:wV,isCancel:TV,CancelToken:IV,VERSION:AV,all:bV,Cancel:SV,isAxiosError:RV,spread:CV,toFormData:PV,AxiosHeaders:kV,HttpStatusCode:NV,formToJSON:OV,getAdapter:DV,mergeConfig:VV}=rt,qt=rt.create({baseURL:"https://api.themoviedb.org/3",timeout:1e4});qt.interceptors.request.use(t=>{const e="2880ac77339fca10a79bd2e5fd5119d1",n=localStorage.getItem("app-lang")||"ko-KR",s=localStorage.getItem("include-adult")==="true";return t.params||(t.params={}),t.params.api_key=e,t.params.language=n,t.params.include_adult=s,t},t=>Promise.reject(t));const PS=()=>{};var kp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},kS=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],l=t[n++],c=((r&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(c>>10)),e[s++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},gy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,l=o?t[r+1]:0,c=r+2<t.length,u=c?t[r+2]:0,h=i>>2,d=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),s.push(n[h],n[d],n[m],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(my(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||l==null||u==null||d==null)throw new NS;const m=i<<2|l>>4;if(s.push(m),u!==64){const g=l<<4&240|u>>2;if(s.push(g),d!==64){const E=u<<6&192|d;s.push(E)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class NS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OS=function(t){const e=my(t);return gy.encodeByteArray(e,!0)},tl=function(t){return OS(t).replace(/\./g,"")},_y=function(t){try{return gy.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=()=>DS().__FIREBASE_DEFAULTS__,xS=()=>{if(typeof process>"u"||typeof kp>"u")return;const t=kp.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&_y(t[1]);return e&&JSON.parse(e)},ql=()=>{try{return PS()||VS()||xS()||MS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yy=t=>{var e,n;return(n=(e=ql())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},LS=t=>{const e=yy(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},vy=()=>{var t;return(t=ql())==null?void 0:t.config},Ey=t=>{var e;return(e=ql())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[tl(JSON.stringify(n)),tl(JSON.stringify(o)),""].join(".")}const ho={};function BS(){const t={prod:[],emulator:[]};for(const e of Object.keys(ho))ho[e]?t.emulator.push(e):t.prod.push(e);return t}function $S(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Np=!1;function Ty(t,e){if(typeof window>"u"||typeof document>"u"||!_i(window.location.host)||ho[t]===e||ho[t]||Np)return;ho[t]=e;function n(m){return`__firebase__banner__${m}`}const s="__firebase__banner",i=BS().prod.length>0;function o(){const m=document.getElementById(s);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Np=!0,o()},m}function h(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function d(){const m=$S(s),g=n("text"),E=document.getElementById(g)||document.createElement("span"),k=n("learnmore"),S=document.getElementById(k)||document.createElement("a"),N=n("preprendIcon"),O=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const x=m.element;l(x),h(S,k);const F=u();c(O,N),x.append(O,E,S,F),document.body.appendChild(x)}i?(E.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function qS(){var e;const t=(e=ql())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GS(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function KS(){return!qS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QS(){try{return typeof indexedDB=="object"}catch{return!1}}function JS(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="FirebaseError";class fs extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=YS,Object.setPrototypeOf(this,fs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qo.prototype.create)}}class Qo{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?XS(i,s):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new fs(r,l,s)}}function XS(t,e){return t.replace(ZS,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const ZS=/\{\$([^}]+)}/g;function eR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function os(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Op(i)&&Op(o)){if(!os(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Op(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Qi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[r,i]=s.split("=");e[decodeURIComponent(r)]=decodeURIComponent(i)}}),e}function Ji(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function tR(t,e){const n=new nR(t,e);return n.subscribe.bind(n)}class nR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let r;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");sR(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:s},r.next===void 0&&(r.next=Gc),r.error===void 0&&(r.error=Gc),r.complete===void 0&&(r.complete=Gc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t){return t&&t._delegate?t._delegate:t}class wr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new FS;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oR(e))try{this.getOrInitializeService({instanceIdentifier:lr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=lr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=lr){return this.instances.has(e)}getOptions(e=lr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&o.resolve(r)}return r}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const i=this.instances.get(s);return i&&e(i,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=lr){return this.component?this.component.multipleInstances?e:lr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iR(t){return t===lr?void 0:t}function oR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const lR={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},cR=Re.INFO,uR={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},hR=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=uR[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ah{constructor(e){this.name=e,this._logLevel=cR,this._logHandler=hR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const fR=(t,e)=>e.some(n=>t instanceof n);let Dp,Vp;function dR(){return Dp||(Dp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pR(){return Vp||(Vp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Iy=new WeakMap,Su=new WeakMap,Ay=new WeakMap,Kc=new WeakMap,bh=new WeakMap;function mR(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Vs(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Iy.set(n,t)}).catch(()=>{}),bh.set(e,t),e}function gR(t){if(Su.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Su.set(t,e)}let Ru={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Su.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ay.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Vs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _R(t){Ru=t(Ru)}function yR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Qc(this),e,...n);return Ay.set(s,e.sort?e.sort():[e]),Vs(s)}:pR().includes(t)?function(...e){return t.apply(Qc(this),e),Vs(Iy.get(this))}:function(...e){return Vs(t.apply(Qc(this),e))}}function vR(t){return typeof t=="function"?yR(t):(t instanceof IDBTransaction&&gR(t),fR(t,dR())?new Proxy(t,Ru):t)}function Vs(t){if(t instanceof IDBRequest)return mR(t);if(Kc.has(t))return Kc.get(t);const e=vR(t);return e!==t&&(Kc.set(t,e),bh.set(e,t)),e}const Qc=t=>bh.get(t);function ER(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),l=Vs(o);return s&&o.addEventListener("upgradeneeded",c=>{s(Vs(o.result),c.oldVersion,c.newVersion,Vs(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const wR=["get","getKey","getAll","getAllKeys","count"],TR=["put","add","delete","clear"],Jc=new Map;function xp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Jc.get(e))return Jc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=TR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||wR.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,r?"readwrite":"readonly");let u=c.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),r&&c.done]))[0]};return Jc.set(e,i),i}_R(t=>({...t,get:(e,n,s)=>xp(e,n)||t.get(e,n,s),has:(e,n)=>!!xp(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function AR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cu="@firebase/app",Mp="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new Ah("@firebase/app"),bR="@firebase/app-compat",SR="@firebase/analytics-compat",RR="@firebase/analytics",CR="@firebase/app-check-compat",PR="@firebase/app-check",kR="@firebase/auth",NR="@firebase/auth-compat",OR="@firebase/database",DR="@firebase/data-connect",VR="@firebase/database-compat",xR="@firebase/functions",MR="@firebase/functions-compat",LR="@firebase/installations",FR="@firebase/installations-compat",UR="@firebase/messaging",BR="@firebase/messaging-compat",$R="@firebase/performance",jR="@firebase/performance-compat",qR="@firebase/remote-config",HR="@firebase/remote-config-compat",WR="@firebase/storage",zR="@firebase/storage-compat",GR="@firebase/firestore",KR="@firebase/ai",QR="@firebase/firestore-compat",JR="firebase",YR="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu="[DEFAULT]",XR={[Cu]:"fire-core",[bR]:"fire-core-compat",[RR]:"fire-analytics",[SR]:"fire-analytics-compat",[PR]:"fire-app-check",[CR]:"fire-app-check-compat",[kR]:"fire-auth",[NR]:"fire-auth-compat",[OR]:"fire-rtdb",[DR]:"fire-data-connect",[VR]:"fire-rtdb-compat",[xR]:"fire-fn",[MR]:"fire-fn-compat",[LR]:"fire-iid",[FR]:"fire-iid-compat",[UR]:"fire-fcm",[BR]:"fire-fcm-compat",[$R]:"fire-perf",[jR]:"fire-perf-compat",[qR]:"fire-rc",[HR]:"fire-rc-compat",[WR]:"fire-gcs",[zR]:"fire-gcs-compat",[GR]:"fire-fst",[QR]:"fire-fst-compat",[KR]:"fire-vertex","fire-js":"fire-js",[JR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=new Map,ZR=new Map,ku=new Map;function Lp(t,e){try{t.container.addComponent(e)}catch(n){as.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ri(t){const e=t.name;if(ku.has(e))return as.debug(`There were multiple attempts to register component ${e}.`),!1;ku.set(e,t);for(const n of nl.values())Lp(n,t);for(const n of ZR.values())Lp(n,t);return!0}function Sh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function en(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xs=new Qo("app","Firebase",eC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=YR;function by(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Pu,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw xs.create("bad-app-name",{appName:String(r)});if(n||(n=vy()),!n)throw xs.create("no-options");const i=nl.get(r);if(i){if(os(n,i.options)&&os(s,i.config))return i;throw xs.create("duplicate-app",{appName:r})}const o=new aR(r);for(const c of ku.values())o.addComponent(c);const l=new tC(n,s,o);return nl.set(r,l),l}function Sy(t=Pu){const e=nl.get(t);if(!e&&t===Pu&&vy())return by();if(!e)throw xs.create("no-app",{appName:t});return e}function Ms(t,e,n){let s=XR[t]??t;n&&(s+=`-${n}`);const r=s.match(/\s|\//),i=e.match(/\s|\//);if(r||i){const o=[`Unable to register library "${s}" with version "${e}":`];r&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),as.warn(o.join(" "));return}ri(new wr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="firebase-heartbeat-database",sC=1,Co="firebase-heartbeat-store";let Yc=null;function Ry(){return Yc||(Yc=ER(nC,sC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Co)}catch(n){console.warn(n)}}}}).catch(t=>{throw xs.create("idb-open",{originalErrorMessage:t.message})})),Yc}async function rC(t){try{const n=(await Ry()).transaction(Co),s=await n.objectStore(Co).get(Cy(t));return await n.done,s}catch(e){if(e instanceof fs)as.warn(e.message);else{const n=xs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});as.warn(n.message)}}}async function Fp(t,e){try{const s=(await Ry()).transaction(Co,"readwrite");await s.objectStore(Co).put(e,Cy(t)),await s.done}catch(n){if(n instanceof fs)as.warn(n.message);else{const s=xs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});as.warn(s.message)}}}function Cy(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=1024,oC=30;class aC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Up();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>oC){const o=uC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){as.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Up(),{heartbeatsToSend:s,unsentEntries:r}=lC(this._heartbeatsCache.heartbeats),i=tl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return as.warn(n),""}}}function Up(){return new Date().toISOString().substring(0,10)}function lC(t,e=iC){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Bp(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Bp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class cC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QS()?JS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Fp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Fp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Bp(t){return tl(JSON.stringify({version:2,heartbeats:t})).length}function uC(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t){ri(new wr("platform-logger",e=>new IR(e),"PRIVATE")),ri(new wr("heartbeat",e=>new aC(e),"PRIVATE")),Ms(Cu,Mp,t),Ms(Cu,Mp,"esm2020"),Ms("fire-js","")}hC("");var fC="firebase",dC="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ms(fC,dC,"app");function Py(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pC=Py,ky=new Qo("auth","Firebase",Py());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new Ah("@firebase/auth");function mC(t,...e){sl.logLevel<=Re.WARN&&sl.warn(`Auth (${yi}): ${t}`,...e)}function Va(t,...e){sl.logLevel<=Re.ERROR&&sl.error(`Auth (${yi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t,...e){throw Ch(t,...e)}function En(t,...e){return Ch(t,...e)}function Rh(t,e,n){const s={...pC(),[e]:n};return new Qo("auth","Firebase",s).create(e,{appName:t.name})}function ns(t){return Rh(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function gC(t,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&dn(t,"argument-error"),Rh(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ch(t,...e){if(typeof t!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=t.name),t._errorFactory.create(n,...s)}return ky.create(t,...e)}function pe(t,e,...n){if(!t)throw Ch(e,...n)}function Zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Va(e),new Error(e)}function ls(t,e){t||Zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function _C(){return $p()==="http:"||$p()==="https:"}function $p(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_C()||WS()||"connection"in navigator)?navigator.onLine:!0}function vC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this.shortDelay=e,this.longDelay=n,ls(n>e,"Short delay should be less than long delay!"),this.isMobile=jS()||zS()}get(){return yC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t,e){ls(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],TC=new Yo(3e4,6e4);function Gs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ks(t,e,n,s,r={}){return Oy(t,r,async()=>{let i={},o={};s&&(e==="GET"?o=s:i={body:JSON.stringify(s)});const l=Jo({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return HS()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&_i(t.emulatorConfig.host)&&(u.credentials="include"),Ny.fetch()(await Dy(t,t.config.apiHost,n,l),u)})}async function Oy(t,e,n){t._canInitEmulator=!1;const s={...EC,...e};try{const r=new AC(t),i=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw wa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw wa(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw wa(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw wa(t,"user-disabled",o);const h=s[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Rh(t,h,u);dn(t,h)}}catch(r){if(r instanceof fs)throw r;dn(t,"network-request-failed",{message:String(r)})}}async function Xo(t,e,n,s,r={}){const i=await Ks(t,e,n,s,r);return"mfaPendingCredential"in i&&dn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Dy(t,e,n,s){const r=`${e}${n}?${s}`,i=t,o=i.config.emulator?Ph(t.config,r):`${t.config.apiScheme}://${r}`;return wC.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function IC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(En(this.auth,"network-request-failed")),TC.get())})}}function wa(t,e,n){const s={appName:t.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const r=En(t,e,s);return r.customData._tokenResponse=n,r}function jp(t){return t!==void 0&&t.enterprise!==void 0}class bC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return IC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SC(t,e){return Ks(t,"GET","/v2/recaptchaConfig",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(t,e){return Ks(t,"POST","/v1/accounts:delete",e)}async function rl(t,e){return Ks(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CC(t,e=!1){const n=ht(t),s=await n.getIdToken(e),r=kh(s);pe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const i=typeof r.firebase=="object"?r.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:r,token:s,authTime:fo(Xc(r.auth_time)),issuedAtTime:fo(Xc(r.iat)),expirationTime:fo(Xc(r.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Xc(t){return Number(t)*1e3}function kh(t){const[e,n,s]=t.split(".");if(e===void 0||n===void 0||s===void 0)return Va("JWT malformed, contained fewer than 3 sections"),null;try{const r=_y(n);return r?JSON.parse(r):(Va("Failed to decode base64 JWT payload"),null)}catch(r){return Va("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function qp(t){const e=kh(t);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(t,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof fs&&PC(s)&&t.auth.currentUser===t&&await t.auth.signOut(),s}}function PC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fo(this.lastLoginAt),this.creationTime=fo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(t){var d;const e=t.auth,n=await t.getIdToken(),s=await Po(t,rl(e,{idToken:n}));pe(s==null?void 0:s.users.length,e,"internal-error");const r=s.users[0];t._notifyReloadListener(r);const i=(d=r.providerUserInfo)!=null&&d.length?Vy(r.providerUserInfo):[],o=OC(t.providerData,i),l=t.isAnonymous,c=!(t.email&&r.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Ou(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function NC(t){const e=ht(t);await il(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OC(t,e){return[...t.filter(s=>!e.some(r=>r.providerId===s.providerId)),...e]}function Vy(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DC(t,e){const n=await Oy(t,{},async()=>{const s=Jo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:i}=t.config,o=await Dy(t,r,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:s};return t.emulatorConfig&&_i(t.emulatorConfig.host)&&(c.credentials="include"),Ny.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VC(t,e){return Ks(t,"POST","/v2/accounts:revokeToken",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const n=qp(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:r,expiresIn:i}=await DC(e,n);this.updateTokensAndExpiration(s,r,Number(i))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:r,expirationTime:i}=n,o=new Kr;return s&&(pe(typeof s=="string","internal-error",{appName:e}),o.refreshToken=s),r&&(pe(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),i&&(pe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kr,this.toJSON())}_performRefresh(){return Zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(t,e){pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class _n{constructor({uid:e,auth:n,stsTokenManager:s,...r}){this.providerId="firebase",this.proactiveRefresh=new kC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ou(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Po(this,this.stsTokenManager.getToken(this.auth,e));return pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return CC(this,e)}reload(){return NC(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new _n({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await il(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await Po(this,RC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,r=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:d,emailVerified:m,isAnonymous:g,providerData:E,stsTokenManager:k}=n;pe(d&&k,e,"internal-error");const S=Kr.fromJSON(this.name,k);pe(typeof d=="string",e,"internal-error"),ws(s,e.name),ws(r,e.name),pe(typeof m=="boolean",e,"internal-error"),pe(typeof g=="boolean",e,"internal-error"),ws(i,e.name),ws(o,e.name),ws(l,e.name),ws(c,e.name),ws(u,e.name),ws(h,e.name);const N=new _n({uid:d,auth:e,email:r,emailVerified:m,displayName:s,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:S,createdAt:u,lastLoginAt:h});return E&&Array.isArray(E)&&(N.providerData=E.map(O=>({...O}))),c&&(N._redirectEventId=c),N}static async _fromIdTokenResponse(e,n,s=!1){const r=new Kr;r.updateFromServerResponse(n);const i=new _n({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:s});return await il(i),i}static async _fromGetAccountInfoResponse(e,n,s){const r=n.users[0];pe(r.localId!==void 0,"internal-error");const i=r.providerUserInfo!==void 0?Vy(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(i!=null&&i.length),l=new Kr;l.updateFromIdToken(s);const c=new _n({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ou(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=new Map;function es(t){ls(t instanceof Function,"Expected a class definition");let e=Hp.get(t);return e?(ls(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Hp.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xy.type="NONE";const Wp=xy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t,e,n){return`firebase:${t}:${e}:${n}`}class Qr{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:r,name:i}=this.auth;this.fullUserKey=xa(this.userKey,r.apiKey,i),this.fullPersistenceKey=xa("persistence",r.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await rl(this.auth,{idToken:e}).catch(()=>{});return n?_n._fromGetAccountInfoResponse(this.auth,n,e):null}return _n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Qr(es(Wp),e,s);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=r[0]||es(Wp);const o=xa(s,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let d;if(typeof h=="string"){const m=await rl(e,{idToken:h}).catch(()=>{});if(!m)break;d=await _n._fromGetAccountInfoResponse(e,m,h)}else d=_n._fromJSON(e,h);u!==i&&(l=d),i=u;break}}catch{}const c=r.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Qr(i,e,s):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Qr(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Uy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(My(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($y(e))return"Blackberry";if(jy(e))return"Webos";if(Ly(e))return"Safari";if((e.includes("chrome/")||Fy(e))&&!e.includes("edge/"))return"Chrome";if(By(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=t.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function My(t=Mt()){return/firefox\//i.test(t)}function Ly(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fy(t=Mt()){return/crios\//i.test(t)}function Uy(t=Mt()){return/iemobile/i.test(t)}function By(t=Mt()){return/android/i.test(t)}function $y(t=Mt()){return/blackberry/i.test(t)}function jy(t=Mt()){return/webos/i.test(t)}function Nh(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function xC(t=Mt()){var e;return Nh(t)&&!!((e=window.navigator)!=null&&e.standalone)}function MC(){return GS()&&document.documentMode===10}function qy(t=Mt()){return Nh(t)||By(t)||jy(t)||$y(t)||/windows phone/i.test(t)||Uy(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(t,e=[]){let n;switch(t){case"Browser":n=zp(Mt());break;case"Worker":n=`${zp(Mt())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yi}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});s.onAbort=n,this.queue.push(s);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FC(t,e={}){return Ks(t,"GET","/v2/passwordPolicy",Gs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=6;class BC{constructor(e){var s;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??UC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let r=0;r<e.length;r++)s=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n,s,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gp(this),this.idTokenSubscription=new Gp(this),this.beforeStateQueue=new LC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ky,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=es(n)),this._initializationPromise=this.queue(async()=>{var s,r,i;if(!this._deleted&&(this.persistenceManager=await Qr.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rl(this,{idToken:e}),s=await _n._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(en(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,r=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await il(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(ns(this));const n=e?ht(e):null;return n&&pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(es(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FC(this),n=new BC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qo("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await VC(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&es(e)||this._popupRedirectResolver;pe(n,this,"argument-error"),this.redirectPersistenceManager=await Qr.create(this,[es(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,r){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,s,r);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var n;if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&mC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Qs(t){return ht(t)}class Gp{constructor(e){this.auth=e,this.observer=null,this.addObserver=tR(n=>this.observer=n)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jC(t){Hl=t}function Wy(t){return Hl.loadJS(t)}function qC(){return Hl.recaptchaEnterpriseScript}function HC(){return Hl.gapiScript}function WC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class zC{constructor(){this.enterprise=new GC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class GC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const KC="recaptcha-enterprise",zy="NO_RECAPTCHA";class QC{constructor(e){this.type=KC,this.auth=Qs(e)}async verify(e="verify",n=!1){async function s(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{SC(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new bC(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function r(i,o,l){const c=window.grecaptcha;jp(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(zy)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zC().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{s(this.auth).then(l=>{if(!n&&jp(window.grecaptcha))r(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=qC();c.length!==0&&(c+=l),Wy(c).then(()=>{r(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function Kp(t,e,n,s=!1,r=!1){const i=new QC(t);let o;if(r)o=zy;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Du(t,e,n,s,r){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Kp(t,e,n,n==="getOobCode");return s(t,o)}else return s(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Kp(t,e,n,n==="getOobCode");return s(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t,e){const n=Sh(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),i=n.getOptions();if(os(i,e??{}))return r;dn(r,"already-initialized")}return n.initialize({options:e})}function YC(t,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(es);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function XC(t,e,n){const s=Qs(t);pe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const r=!1,i=Gy(e),{host:o,port:l}=ZC(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!s._canInitEmulator){pe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),pe(os(u,s.config.emulator)&&os(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,_i(o)?(wy(`${i}//${o}${c}`),Ty("Auth",!0)):e0()}function Gy(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZC(t){const e=Gy(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(s);if(r){const i=r[1];return{host:i,port:Qp(s.substr(i.length+1))}}else{const[i,o]=s.split(":");return{host:i,port:Qp(o)}}}function Qp(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function e0(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zn("not implemented")}_getIdTokenResponse(e){return Zn("not implemented")}_linkToIdToken(e,n){return Zn("not implemented")}_getReauthenticationResolver(e){return Zn("not implemented")}}async function t0(t,e){return Ks(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n0(t,e){return Xo(t,"POST","/v1/accounts:signInWithPassword",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s0(t,e){return Xo(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}async function r0(t,e){return Xo(t,"POST","/v1/accounts:signInWithEmailLink",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko extends Oh{constructor(e,n,s,r=null){super("password",s),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new ko(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new ko(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Du(e,n,"signInWithPassword",n0);case"emailLink":return s0(e,{email:this._email,oobCode:this._password});default:dn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Du(e,s,"signUpPassword",t0);case"emailLink":return r0(e,{idToken:n,email:this._email,oobCode:this._password});default:dn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jr(t,e){return Xo(t,"POST","/v1/accounts:signInWithIdp",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="http://localhost";class Tr extends Oh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Tr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):dn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:r,...i}=n;if(!s||!r)return null;const o=new Tr(s,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Jr(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Jr(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Jr(e,n)}buildRequest(){const e={requestUri:i0,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Jo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function a0(t){const e=Qi(Ji(t)).link,n=e?Qi(Ji(e)).deep_link_id:null,s=Qi(Ji(t)).deep_link_id;return(s?Qi(Ji(s)).link:null)||s||n||e||t}class Dh{constructor(e){const n=Qi(Ji(e)),s=n.apiKey??null,r=n.oobCode??null,i=o0(n.mode??null);pe(s&&r&&i,"argument-error"),this.apiKey=s,this.operation=i,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=a0(e);try{return new Dh(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.providerId=vi.PROVIDER_ID}static credential(e,n){return ko._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Dh.parseLink(n);return pe(s,"argument-error"),ko._fromEmailAndCode(e,s.code,s.tenantId)}}vi.PROVIDER_ID="password";vi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends Vh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Zo{constructor(){super("facebook.com")}static credential(e){return Tr._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ps.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn extends Zo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Tr._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Xn.credential(n,s)}catch{return null}}}Xn.GOOGLE_SIGN_IN_METHOD="google.com";Xn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Zo{constructor(){super("github.com")}static credential(e){return Tr._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.GITHUB_SIGN_IN_METHOD="github.com";ks.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Zo{constructor(){super("twitter.com")}static credential(e,n){return Tr._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ns.credential(n,s)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l0(t,e){return Xo(t,"POST","/v1/accounts:signUp",Gs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,r=!1){const i=await _n._fromIdTokenResponse(e,s,r),o=Jp(s);return new Ir({user:i,providerId:o,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const r=Jp(s);return new Ir({user:e,providerId:r,_tokenResponse:s,operationType:n})}}function Jp(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol extends fs{constructor(e,n,s,r){super(n.code,n.message),this.operationType=s,this.user=r,Object.setPrototypeOf(this,ol.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,r){return new ol(e,n,s,r)}}function Ky(t,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ol._fromErrorAndOperation(t,i,e,s):i})}async function c0(t,e,n=!1){const s=await Po(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ir._forOperation(t,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u0(t,e,n=!1){const{auth:s}=t;if(en(s.app))return Promise.reject(ns(s));const r="reauthenticate";try{const i=await Po(t,Ky(s,r,e,t),n);pe(i.idToken,s,"internal-error");const o=kh(i.idToken);pe(o,s,"internal-error");const{sub:l}=o;return pe(t.uid===l,s,"user-mismatch"),Ir._forOperation(t,r,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&dn(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qy(t,e,n=!1){if(en(t.app))return Promise.reject(ns(t));const s="signIn",r=await Ky(t,s,e),i=await Ir._fromIdTokenResponse(t,s,r);return n||await t._updateCurrentUser(i.user),i}async function h0(t,e){return Qy(Qs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jy(t){const e=Qs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function f0(t,e,n){if(en(t.app))return Promise.reject(ns(t));const s=Qs(t),o=await Du(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",l0).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&Jy(t),c}),l=await Ir._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(l.user),l}function d0(t,e,n){return en(t.app)?Promise.reject(ns(t)):h0(ht(t),vi.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Jy(t),s})}function p0(t,e,n,s){return ht(t).onIdTokenChanged(e,n,s)}function m0(t,e,n){return ht(t).beforeAuthStateChanged(e,n)}function g0(t,e,n,s){return ht(t).onAuthStateChanged(e,n,s)}function Yy(t){return ht(t).signOut()}const al="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(al,"1"),this.storage.removeItem(al),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=1e3,y0=10;class Zy extends Xy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),r=this.localCache[n];s!==r&&e(n,r,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const s=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(s);!n&&this.localCache[s]===o||this.notifyListeners(s,o)},i=this.storage.getItem(s);MC()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,y0):r()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},_0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zy.type="LOCAL";const v0=Zy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev extends Xy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ev.type="SESSION";const tv=ev;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const s=new Wl(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:r,data:i}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:r});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await E0(l);n.ports[0].postMessage({status:"done",eventId:s,eventType:r,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wl.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(t="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=xh("",20);r.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},s);o={messageChannel:r,onMessage(d){const m=d;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return window}function T0(t){Mn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(){return typeof Mn().WorkerGlobalScope<"u"&&typeof Mn().importScripts=="function"}async function I0(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function A0(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function b0(){return nv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="firebaseLocalStorageDb",S0=1,ll="firebaseLocalStorage",rv="fbase_key";class ea{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zl(t,e){return t.transaction([ll],e?"readwrite":"readonly").objectStore(ll)}function R0(){const t=indexedDB.deleteDatabase(sv);return new ea(t).toPromise()}function Vu(){const t=indexedDB.open(sv,S0);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const s=t.result;try{s.createObjectStore(ll,{keyPath:rv})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const s=t.result;s.objectStoreNames.contains(ll)?e(s):(s.close(),await R0(),e(await Vu()))})})}async function Yp(t,e,n){const s=zl(t,!0).put({[rv]:e,value:n});return new ea(s).toPromise()}async function C0(t,e){const n=zl(t,!1).get(e),s=await new ea(n).toPromise();return s===void 0?null:s.value}function Xp(t,e){const n=zl(t,!0).delete(e);return new ea(n).toPromise()}const P0=800,k0=3;class iv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vu(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>k0)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wl._getInstance(b0()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,s;if(this.activeServiceWorker=await I0(),!this.activeServiceWorker)return;this.sender=new w0(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||A0()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vu();return await Yp(e,al,"1"),await Xp(e,al),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>Yp(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>C0(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xp(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const i=zl(r,!1).getAll();return new ea(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:r,value:i}of e)s.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!s.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const r of Array.from(s))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),P0)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iv.type="LOCAL";const N0=iv;new Yo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t,e){return e?es(e):(pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh extends Oh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jr(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Jr(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Jr(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function O0(t){return Qy(t.auth,new Mh(t),t.bypassAuthState)}function D0(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),u0(n,new Mh(t),t.bypassAuthState)}async function V0(t){const{auth:e,user:n}=t;return pe(n,e,"internal-error"),c0(n,new Mh(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,n,s,r,i=!1){this.auth=e,this.resolver=s,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:r,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:s,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return O0;case"linkViaPopup":case"linkViaRedirect":return V0;case"reauthViaPopup":case"reauthViaRedirect":return D0;default:dn(this.auth,"internal-error")}}resolve(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ls(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=new Yo(2e3,1e4);async function M0(t,e,n){if(en(t.app))return Promise.reject(En(t,"operation-not-supported-in-this-environment"));const s=Qs(t);gC(t,e,Vh);const r=ov(s,n);return new fr(s,"signInViaPopup",e,r).executeNotNull()}class fr extends av{constructor(e,n,s,r,i){super(e,n,r,i),this.provider=s,this.authWindow=null,this.pollId=null,fr.currentPopupAction&&fr.currentPopupAction.cancel(),fr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){ls(this.filter.length===1,"Popup operations only handle one event");const e=xh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(En(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(En(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if((s=(n=this.authWindow)==null?void 0:n.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(En(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,x0.get())};e()}}fr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="pendingRedirect",Ma=new Map;class F0 extends av{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Ma.get(this.auth._key());if(!e){try{const s=await U0(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Ma.set(this.auth._key(),e)}return this.bypassAuthState||Ma.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U0(t,e){const n=j0(e),s=$0(t);if(!await s._isAvailable())return!1;const r=await s._get(n)==="true";return await s._remove(n),r}function B0(t,e){Ma.set(t._key(),e)}function $0(t){return es(t._redirectPersistence)}function j0(t){return xa(L0,t.config.apiKey,t.name)}async function q0(t,e,n=!1){if(en(t.app))return Promise.reject(ns(t));const s=Qs(t),r=ov(s,e),o=await new F0(s,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await s._persistUserIfCurrent(o.user),await s._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=600*1e3;class W0{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!z0(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!lv(e)){const r=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";n.onError(En(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H0&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zp(e))}saveEventToCache(e){this.cachedEventUids.add(Zp(e)),this.lastProcessedEventTime=Date.now()}}function Zp(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function lv({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function z0(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lv(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G0(t,e={}){return Ks(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Q0=/^https?/;async function J0(t){if(t.config.emulator)return;const{authorizedDomains:e}=await G0(t);for(const n of e)try{if(Y0(n))return}catch{}dn(t,"unauthorized-domain")}function Y0(t){const e=Nu(),{protocol:n,hostname:s}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&s===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===s}if(!Q0.test(n))return!1;if(K0.test(t))return s===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=new Yo(3e4,6e4);function em(){const t=Mn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Z0(t){return new Promise((e,n)=>{var r,i,o;function s(){em(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{em(),n(En(t,"network-request-failed"))},timeout:X0.get()})}if((i=(r=Mn().gapi)==null?void 0:r.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Mn().gapi)!=null&&o.load)s();else{const l=WC("iframefcb");return Mn()[l]=()=>{gapi.load?s():n(En(t,"network-request-failed"))},Wy(`${HC()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw La=null,e})}let La=null;function eP(t){return La=La||Z0(t),La}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=new Yo(5e3,15e3),nP="__/auth/iframe",sP="emulator/auth/iframe",rP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oP(t){const e=t.config;pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Ph(e,sP):`https://${t.config.authDomain}/${nP}`,s={apiKey:e.apiKey,appName:t.name,v:yi},r=iP.get(t.config.apiHost);r&&(s.eid=r);const i=t._getFrameworks();return i.length&&(s.fw=i.join(",")),`${n}?${Jo(s).slice(1)}`}async function aP(t){const e=await eP(t),n=Mn().gapi;return pe(n,t,"internal-error"),e.open({where:document.body,url:oP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rP,dontclear:!0},s=>new Promise(async(r,i)=>{await s.restyle({setHideOnLeave:!1});const o=En(t,"network-request-failed"),l=Mn().setTimeout(()=>{i(o)},tP.get());function c(){Mn().clearTimeout(l),r(s)}s.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cP=500,uP=600,hP="_blank",fP="http://localhost";class tm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dP(t,e,n,s=cP,r=uP){const i=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const c={...lP,width:s.toString(),height:r.toString(),top:i,left:o},u=Mt().toLowerCase();n&&(l=Fy(u)?hP:n),My(u)&&(e=e||fP,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[g,E])=>`${m}${g}=${E},`,"");if(xC(u)&&l!=="_self")return pP(e||"",l),new tm(null);const d=window.open(e||"",l,h);pe(d,t,"popup-blocked");try{d.focus()}catch{}return new tm(d)}function pP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="__/auth/handler",gP="emulator/auth/handler",_P=encodeURIComponent("fac");async function nm(t,e,n,s,r,i){pe(t.config.authDomain,t,"auth-domain-config-required"),pe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:yi,eventId:r};if(e instanceof Vh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",eR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Zo){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${_P}=${encodeURIComponent(c)}`:"";return`${yP(t)}?${Jo(l).slice(1)}${u}`}function yP({config:t}){return t.emulator?Ph(t,gP):`https://${t.authDomain}/${mP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc="webStorageSupport";class vP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tv,this._completeRedirectFn=q0,this._overrideRedirectResult=B0}async _openPopup(e,n,s,r){var o;ls((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await nm(e,n,s,Nu(),r);return dP(e,i,xh())}async _openRedirect(e,n,s,r){await this._originValidation(e);const i=await nm(e,n,s,Nu(),r);return T0(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:i}=this.eventManagers[n];return r?Promise.resolve(r):(ls(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await aP(e),s=new W0(e);return n.register("authEvent",r=>(pe(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:s.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zc,{type:Zc},r=>{var o;const i=(o=r==null?void 0:r[0])==null?void 0:o[Zc];i!==void 0&&n(!!i),dn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=J0(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qy()||Ly()||Nh()}}const EP=vP;var sm="@firebase/auth",rm="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IP(t){ri(new wr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=s.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:s.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hy(t)},u=new $C(s,r,i,c);return YC(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ri(new wr("auth-internal",e=>{const n=Qs(e.getProvider("auth").getImmediate());return(s=>new wP(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ms(sm,rm,TP(t)),Ms(sm,rm,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=300,bP=Ey("authIdTokenMaxAge")||AP;let im=null;const SP=t=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>bP)return;const r=n==null?void 0:n.token;im!==r&&(im=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function cv(t=Sy()){const e=Sh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=JC(t,{popupRedirectResolver:EP,persistence:[N0,v0,tv]}),s=Ey("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const o=SP(i.toString());m0(n,o,()=>o(n.currentUser)),p0(n,l=>o(l))}}const r=yy("auth");return r&&XC(n,`http://${r}`),n}function RP(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}jC({loadJS(t){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",t),s.onload=e,s.onerror=r=>{const i=En("internal-error");i.customData=r,n(i)},s.type="text/javascript",s.charset="UTF-8",RP().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IP("Browser");var om=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ls,uv;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,_){function v(){}v.prototype=_.prototype,T.F=_.prototype,T.prototype=new v,T.prototype.constructor=T,T.D=function(b,P,R){for(var A=Array(arguments.length-2),_e=2;_e<arguments.length;_e++)A[_e-2]=arguments[_e];return _.prototype[P].apply(b,A)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,_,v){v||(v=0);const b=Array(16);if(typeof _=="string")for(var P=0;P<16;++P)b[P]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(P=0;P<16;++P)b[P]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=T.g[0],v=T.g[1],P=T.g[2];let R=T.g[3],A;A=_+(R^v&(P^R))+b[0]+3614090360&4294967295,_=v+(A<<7&4294967295|A>>>25),A=R+(P^_&(v^P))+b[1]+3905402710&4294967295,R=_+(A<<12&4294967295|A>>>20),A=P+(v^R&(_^v))+b[2]+606105819&4294967295,P=R+(A<<17&4294967295|A>>>15),A=v+(_^P&(R^_))+b[3]+3250441966&4294967295,v=P+(A<<22&4294967295|A>>>10),A=_+(R^v&(P^R))+b[4]+4118548399&4294967295,_=v+(A<<7&4294967295|A>>>25),A=R+(P^_&(v^P))+b[5]+1200080426&4294967295,R=_+(A<<12&4294967295|A>>>20),A=P+(v^R&(_^v))+b[6]+2821735955&4294967295,P=R+(A<<17&4294967295|A>>>15),A=v+(_^P&(R^_))+b[7]+4249261313&4294967295,v=P+(A<<22&4294967295|A>>>10),A=_+(R^v&(P^R))+b[8]+1770035416&4294967295,_=v+(A<<7&4294967295|A>>>25),A=R+(P^_&(v^P))+b[9]+2336552879&4294967295,R=_+(A<<12&4294967295|A>>>20),A=P+(v^R&(_^v))+b[10]+4294925233&4294967295,P=R+(A<<17&4294967295|A>>>15),A=v+(_^P&(R^_))+b[11]+2304563134&4294967295,v=P+(A<<22&4294967295|A>>>10),A=_+(R^v&(P^R))+b[12]+1804603682&4294967295,_=v+(A<<7&4294967295|A>>>25),A=R+(P^_&(v^P))+b[13]+4254626195&4294967295,R=_+(A<<12&4294967295|A>>>20),A=P+(v^R&(_^v))+b[14]+2792965006&4294967295,P=R+(A<<17&4294967295|A>>>15),A=v+(_^P&(R^_))+b[15]+1236535329&4294967295,v=P+(A<<22&4294967295|A>>>10),A=_+(P^R&(v^P))+b[1]+4129170786&4294967295,_=v+(A<<5&4294967295|A>>>27),A=R+(v^P&(_^v))+b[6]+3225465664&4294967295,R=_+(A<<9&4294967295|A>>>23),A=P+(_^v&(R^_))+b[11]+643717713&4294967295,P=R+(A<<14&4294967295|A>>>18),A=v+(R^_&(P^R))+b[0]+3921069994&4294967295,v=P+(A<<20&4294967295|A>>>12),A=_+(P^R&(v^P))+b[5]+3593408605&4294967295,_=v+(A<<5&4294967295|A>>>27),A=R+(v^P&(_^v))+b[10]+38016083&4294967295,R=_+(A<<9&4294967295|A>>>23),A=P+(_^v&(R^_))+b[15]+3634488961&4294967295,P=R+(A<<14&4294967295|A>>>18),A=v+(R^_&(P^R))+b[4]+3889429448&4294967295,v=P+(A<<20&4294967295|A>>>12),A=_+(P^R&(v^P))+b[9]+568446438&4294967295,_=v+(A<<5&4294967295|A>>>27),A=R+(v^P&(_^v))+b[14]+3275163606&4294967295,R=_+(A<<9&4294967295|A>>>23),A=P+(_^v&(R^_))+b[3]+4107603335&4294967295,P=R+(A<<14&4294967295|A>>>18),A=v+(R^_&(P^R))+b[8]+1163531501&4294967295,v=P+(A<<20&4294967295|A>>>12),A=_+(P^R&(v^P))+b[13]+2850285829&4294967295,_=v+(A<<5&4294967295|A>>>27),A=R+(v^P&(_^v))+b[2]+4243563512&4294967295,R=_+(A<<9&4294967295|A>>>23),A=P+(_^v&(R^_))+b[7]+1735328473&4294967295,P=R+(A<<14&4294967295|A>>>18),A=v+(R^_&(P^R))+b[12]+2368359562&4294967295,v=P+(A<<20&4294967295|A>>>12),A=_+(v^P^R)+b[5]+4294588738&4294967295,_=v+(A<<4&4294967295|A>>>28),A=R+(_^v^P)+b[8]+2272392833&4294967295,R=_+(A<<11&4294967295|A>>>21),A=P+(R^_^v)+b[11]+1839030562&4294967295,P=R+(A<<16&4294967295|A>>>16),A=v+(P^R^_)+b[14]+4259657740&4294967295,v=P+(A<<23&4294967295|A>>>9),A=_+(v^P^R)+b[1]+2763975236&4294967295,_=v+(A<<4&4294967295|A>>>28),A=R+(_^v^P)+b[4]+1272893353&4294967295,R=_+(A<<11&4294967295|A>>>21),A=P+(R^_^v)+b[7]+4139469664&4294967295,P=R+(A<<16&4294967295|A>>>16),A=v+(P^R^_)+b[10]+3200236656&4294967295,v=P+(A<<23&4294967295|A>>>9),A=_+(v^P^R)+b[13]+681279174&4294967295,_=v+(A<<4&4294967295|A>>>28),A=R+(_^v^P)+b[0]+3936430074&4294967295,R=_+(A<<11&4294967295|A>>>21),A=P+(R^_^v)+b[3]+3572445317&4294967295,P=R+(A<<16&4294967295|A>>>16),A=v+(P^R^_)+b[6]+76029189&4294967295,v=P+(A<<23&4294967295|A>>>9),A=_+(v^P^R)+b[9]+3654602809&4294967295,_=v+(A<<4&4294967295|A>>>28),A=R+(_^v^P)+b[12]+3873151461&4294967295,R=_+(A<<11&4294967295|A>>>21),A=P+(R^_^v)+b[15]+530742520&4294967295,P=R+(A<<16&4294967295|A>>>16),A=v+(P^R^_)+b[2]+3299628645&4294967295,v=P+(A<<23&4294967295|A>>>9),A=_+(P^(v|~R))+b[0]+4096336452&4294967295,_=v+(A<<6&4294967295|A>>>26),A=R+(v^(_|~P))+b[7]+1126891415&4294967295,R=_+(A<<10&4294967295|A>>>22),A=P+(_^(R|~v))+b[14]+2878612391&4294967295,P=R+(A<<15&4294967295|A>>>17),A=v+(R^(P|~_))+b[5]+4237533241&4294967295,v=P+(A<<21&4294967295|A>>>11),A=_+(P^(v|~R))+b[12]+1700485571&4294967295,_=v+(A<<6&4294967295|A>>>26),A=R+(v^(_|~P))+b[3]+2399980690&4294967295,R=_+(A<<10&4294967295|A>>>22),A=P+(_^(R|~v))+b[10]+4293915773&4294967295,P=R+(A<<15&4294967295|A>>>17),A=v+(R^(P|~_))+b[1]+2240044497&4294967295,v=P+(A<<21&4294967295|A>>>11),A=_+(P^(v|~R))+b[8]+1873313359&4294967295,_=v+(A<<6&4294967295|A>>>26),A=R+(v^(_|~P))+b[15]+4264355552&4294967295,R=_+(A<<10&4294967295|A>>>22),A=P+(_^(R|~v))+b[6]+2734768916&4294967295,P=R+(A<<15&4294967295|A>>>17),A=v+(R^(P|~_))+b[13]+1309151649&4294967295,v=P+(A<<21&4294967295|A>>>11),A=_+(P^(v|~R))+b[4]+4149444226&4294967295,_=v+(A<<6&4294967295|A>>>26),A=R+(v^(_|~P))+b[11]+3174756917&4294967295,R=_+(A<<10&4294967295|A>>>22),A=P+(_^(R|~v))+b[2]+718787259&4294967295,P=R+(A<<15&4294967295|A>>>17),A=v+(R^(P|~_))+b[9]+3951481745&4294967295,T.g[0]=T.g[0]+_&4294967295,T.g[1]=T.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+P&4294967295,T.g[3]=T.g[3]+R&4294967295}s.prototype.v=function(T,_){_===void 0&&(_=T.length);const v=_-this.blockSize,b=this.C;let P=this.h,R=0;for(;R<_;){if(P==0)for(;R<=v;)r(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<_;)if(b[P++]=T.charCodeAt(R++),P==this.blockSize){r(this,b),P=0;break}}else for(;R<_;)if(b[P++]=T[R++],P==this.blockSize){r(this,b),P=0;break}}this.h=P,this.o+=_},s.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var _=1;_<T.length-8;++_)T[_]=0;_=this.o*8;for(var v=T.length-8;v<T.length;++v)T[v]=_&255,_/=256;for(this.v(T),T=Array(16),_=0,v=0;v<4;++v)for(let b=0;b<32;b+=8)T[_++]=this.g[v]>>>b&255;return T};function i(T,_){var v=l;return Object.prototype.hasOwnProperty.call(v,T)?v[T]:v[T]=_(T)}function o(T,_){this.h=_;const v=[];let b=!0;for(let P=T.length-1;P>=0;P--){const R=T[P]|0;b&&R==_||(v[P]=R,b=!1)}this.g=v}var l={};function c(T){return-128<=T&&T<128?i(T,function(_){return new o([_|0],_<0?-1:0)}):new o([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return d;if(T<0)return S(u(-T));const _=[];let v=1;for(let b=0;T>=v;b++)_[b]=T/v|0,v*=4294967296;return new o(_,0)}function h(T,_){if(T.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(T.charAt(0)=="-")return S(h(T.substring(1),_));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=u(Math.pow(_,8));let b=d;for(let R=0;R<T.length;R+=8){var P=Math.min(8,T.length-R);const A=parseInt(T.substring(R,R+P),_);P<8?(P=u(Math.pow(_,P)),b=b.j(P).add(u(A))):(b=b.j(v),b=b.add(u(A)))}return b}var d=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(k(this))return-S(this).m();let T=0,_=1;for(let v=0;v<this.g.length;v++){const b=this.i(v);T+=(b>=0?b:4294967296+b)*_,_*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(k(this))return"-"+S(this).toString(T);const _=u(Math.pow(T,6));var v=this;let b="";for(;;){const P=F(v,_).g;v=N(v,P.j(_));let R=((v.g.length>0?v.g[0]:v.h)>>>0).toString(T);if(v=P,E(v))return R+b;for(;R.length<6;)R="0"+R;b=R+b}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(let _=0;_<T.g.length;_++)if(T.g[_]!=0)return!1;return!0}function k(T){return T.h==-1}t.l=function(T){return T=N(this,T),k(T)?-1:E(T)?0:1};function S(T){const _=T.g.length,v=[];for(let b=0;b<_;b++)v[b]=~T.g[b];return new o(v,~T.h).add(m)}t.abs=function(){return k(this)?S(this):this},t.add=function(T){const _=Math.max(this.g.length,T.g.length),v=[];let b=0;for(let P=0;P<=_;P++){let R=b+(this.i(P)&65535)+(T.i(P)&65535),A=(R>>>16)+(this.i(P)>>>16)+(T.i(P)>>>16);b=A>>>16,R&=65535,A&=65535,v[P]=A<<16|R}return new o(v,v[v.length-1]&-2147483648?-1:0)};function N(T,_){return T.add(S(_))}t.j=function(T){if(E(this)||E(T))return d;if(k(this))return k(T)?S(this).j(S(T)):S(S(this).j(T));if(k(T))return S(this.j(S(T)));if(this.l(g)<0&&T.l(g)<0)return u(this.m()*T.m());const _=this.g.length+T.g.length,v=[];for(var b=0;b<2*_;b++)v[b]=0;for(b=0;b<this.g.length;b++)for(let P=0;P<T.g.length;P++){const R=this.i(b)>>>16,A=this.i(b)&65535,_e=T.i(P)>>>16,Le=T.i(P)&65535;v[2*b+2*P]+=A*Le,O(v,2*b+2*P),v[2*b+2*P+1]+=R*Le,O(v,2*b+2*P+1),v[2*b+2*P+1]+=A*_e,O(v,2*b+2*P+1),v[2*b+2*P+2]+=R*_e,O(v,2*b+2*P+2)}for(T=0;T<_;T++)v[T]=v[2*T+1]<<16|v[2*T];for(T=_;T<2*_;T++)v[T]=0;return new o(v,0)};function O(T,_){for(;(T[_]&65535)!=T[_];)T[_+1]+=T[_]>>>16,T[_]&=65535,_++}function x(T,_){this.g=T,this.h=_}function F(T,_){if(E(_))throw Error("division by zero");if(E(T))return new x(d,d);if(k(T))return _=F(S(T),_),new x(S(_.g),S(_.h));if(k(_))return _=F(T,S(_)),new x(S(_.g),_.h);if(T.g.length>30){if(k(T)||k(_))throw Error("slowDivide_ only works with positive integers.");for(var v=m,b=_;b.l(T)<=0;)v=U(v),b=U(b);var P=B(v,1),R=B(b,1);for(b=B(b,2),v=B(v,2);!E(b);){var A=R.add(b);A.l(T)<=0&&(P=P.add(v),R=A),b=B(b,1),v=B(v,1)}return _=N(T,P.j(_)),new x(P,_)}for(P=d;T.l(_)>=0;){for(v=Math.max(1,Math.floor(T.m()/_.m())),b=Math.ceil(Math.log(v)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),R=u(v),A=R.j(_);k(A)||A.l(T)>0;)v-=b,R=u(v),A=R.j(_);E(R)&&(R=m),P=P.add(R),T=N(T,A)}return new x(P,T)}t.B=function(T){return F(this,T).h},t.and=function(T){const _=Math.max(this.g.length,T.g.length),v=[];for(let b=0;b<_;b++)v[b]=this.i(b)&T.i(b);return new o(v,this.h&T.h)},t.or=function(T){const _=Math.max(this.g.length,T.g.length),v=[];for(let b=0;b<_;b++)v[b]=this.i(b)|T.i(b);return new o(v,this.h|T.h)},t.xor=function(T){const _=Math.max(this.g.length,T.g.length),v=[];for(let b=0;b<_;b++)v[b]=this.i(b)^T.i(b);return new o(v,this.h^T.h)};function U(T){const _=T.g.length+1,v=[];for(let b=0;b<_;b++)v[b]=T.i(b)<<1|T.i(b-1)>>>31;return new o(v,T.h)}function B(T,_){const v=_>>5;_%=32;const b=T.g.length-v,P=[];for(let R=0;R<b;R++)P[R]=_>0?T.i(R+v)>>>_|T.i(R+v+1)<<32-_:T.i(R+v);return new o(P,T.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,uv=s,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Ls=o}).apply(typeof om<"u"?om:typeof self<"u"?self:typeof window<"u"?window:{});var Ta=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hv,Yi,fv,Fa,xu,dv,pv,mv;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ta=="object"&&Ta];for(var f=0;f<a.length;++f){var p=a[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=n(this);function r(a,f){if(f)e:{var p=s;a=a.split(".");for(var y=0;y<a.length-1;y++){var V=a[y];if(!(V in p))break e;p=p[V]}a=a[a.length-1],y=p[a],f=f(y),f!=y&&f!=null&&e(p,a,{configurable:!0,writable:!0,value:f})}}r("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(a){return a||function(f){var p=[],y;for(y in f)Object.prototype.hasOwnProperty.call(f,y)&&p.push([y,f[y]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function c(a,f,p){return a.call.apply(a.bind,arguments)}function u(a,f,p){return u=c,u.apply(null,arguments)}function h(a,f){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function d(a,f){function p(){}p.prototype=f.prototype,a.Z=f.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(y,V,L){for(var Y=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)Y[Ae-2]=arguments[Ae];return f.prototype[V].apply(y,Y)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function g(a){const f=a.length;if(f>0){const p=Array(f);for(let y=0;y<f;y++)p[y]=a[y];return p}return[]}function E(a,f){for(let y=1;y<arguments.length;y++){const V=arguments[y];var p=typeof V;if(p=p!="object"?p:V?Array.isArray(V)?"array":p:"null",p=="array"||p=="object"&&typeof V.length=="number"){p=a.length||0;const L=V.length||0;a.length=p+L;for(let Y=0;Y<L;Y++)a[p+Y]=V[Y]}else a.push(V)}}class k{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function S(a){o.setTimeout(()=>{throw a},0)}function N(){var a=T;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class O{constructor(){this.h=this.g=null}add(f,p){const y=x.get();y.set(f,p),this.h?this.h.next=y:this.g=y,this.h=y}}var x=new k(()=>new F,a=>a.reset());class F{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let U,B=!1,T=new O,_=()=>{const a=Promise.resolve(void 0);U=()=>{a.then(v)}};function v(){for(var a;a=N();){try{a.h.call(a.g)}catch(p){S(p)}var f=x;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}B=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,f),o.removeEventListener("test",p,f)}catch{}return a})();function A(a){return/^[\s\xa0]*$/.test(a)}function _e(a,f){P.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}d(_e,P),_e.prototype.init=function(a,f){const p=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(p=="mouseover"?f=a.fromElement:p=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&_e.Z.h.call(this)},_e.prototype.h=function(){_e.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),Te=0;function ge(a,f,p,y,V){this.listener=a,this.proxy=null,this.src=f,this.type=p,this.capture=!!y,this.ha=V,this.key=++Te,this.da=this.fa=!1}function ye(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ft(a,f,p){for(const y in a)f.call(p,a[y],y,a)}function Qt(a,f){for(const p in a)f.call(void 0,a[p],p,a)}function Je(a){const f={};for(const p in a)f[p]=a[p];return f}const ze="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ht(a,f){let p,y;for(let V=1;V<arguments.length;V++){y=arguments[V];for(p in y)a[p]=y[p];for(let L=0;L<ze.length;L++)p=ze[L],Object.prototype.hasOwnProperty.call(y,p)&&(a[p]=y[p])}}function yt(a){this.src=a,this.g={},this.h=0}yt.prototype.add=function(a,f,p,y,V){const L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);const Y=vt(a,f,y,V);return Y>-1?(f=a[Y],p||(f.fa=!1)):(f=new ge(f,this.src,L,!!y,V),f.fa=p,a.push(f)),f};function Lt(a,f){const p=f.type;if(p in a.g){var y=a.g[p],V=Array.prototype.indexOf.call(y,f,void 0),L;(L=V>=0)&&Array.prototype.splice.call(y,V,1),L&&(ye(f),a.g[p].length==0&&(delete a.g[p],a.h--))}}function vt(a,f,p,y){for(let V=0;V<a.length;++V){const L=a[V];if(!L.da&&L.listener==f&&L.capture==!!p&&L.ha==y)return V}return-1}var j="closure_lm_"+(Math.random()*1e6|0),se={};function ee(a,f,p,y,V){if(Array.isArray(f)){for(let L=0;L<f.length;L++)ee(a,f[L],p,y,V);return null}return p=Z(p),a&&a[Le]?a.J(f,p,l(y)?!!y.capture:!1,V):ae(a,f,p,!1,y,V)}function ae(a,f,p,y,V,L){if(!f)throw Error("Invalid event type");const Y=l(V)?!!V.capture:!!V;let Ae=z(a);if(Ae||(a[j]=Ae=new yt(a)),p=Ae.add(f,p,y,Y,L),p.proxy)return p;if(y=J(),p.proxy=y,y.src=a,y.listener=p,a.addEventListener)R||(V=Y),V===void 0&&(V=!1),a.addEventListener(f.toString(),y,V);else if(a.attachEvent)a.attachEvent(D(f.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function J(){function a(p){return f.call(a.src,a.listener,p)}const f=q;return a}function I(a,f,p,y,V){if(Array.isArray(f))for(var L=0;L<f.length;L++)I(a,f[L],p,y,V);else y=l(y)?!!y.capture:!!y,p=Z(p),a&&a[Le]?(a=a.i,L=String(f).toString(),L in a.g&&(f=a.g[L],p=vt(f,p,y,V),p>-1&&(ye(f[p]),Array.prototype.splice.call(f,p,1),f.length==0&&(delete a.g[L],a.h--)))):a&&(a=z(a))&&(f=a.g[f.toString()],a=-1,f&&(a=vt(f,p,y,V)),(p=a>-1?f[a]:null)&&C(p))}function C(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[Le])Lt(f.i,a);else{var p=a.type,y=a.proxy;f.removeEventListener?f.removeEventListener(p,y,a.capture):f.detachEvent?f.detachEvent(D(p),y):f.addListener&&f.removeListener&&f.removeListener(y),(p=z(f))?(Lt(p,a),p.h==0&&(p.src=null,f[j]=null)):ye(a)}}}function D(a){return a in se?se[a]:se[a]="on"+a}function q(a,f){if(a.da)a=!0;else{f=new _e(f,this);const p=a.listener,y=a.ha||a.src;a.fa&&C(a),a=p.call(y,f)}return a}function z(a){return a=a[j],a instanceof yt?a:null}var $="__closure_events_fn_"+(Math.random()*1e9>>>0);function Z(a){return typeof a=="function"?a:(a[$]||(a[$]=function(f){return a.handleEvent(f)}),a[$])}function Q(){b.call(this),this.i=new yt(this),this.M=this,this.G=null}d(Q,b),Q.prototype[Le]=!0,Q.prototype.removeEventListener=function(a,f,p,y){I(this,a,f,p,y)};function K(a,f){var p,y=a.G;if(y)for(p=[];y;y=y.G)p.push(y);if(a=a.M,y=f.type||f,typeof f=="string")f=new P(f,a);else if(f instanceof P)f.target=f.target||a;else{var V=f;f=new P(y,a),Ht(f,V)}V=!0;let L,Y;if(p)for(Y=p.length-1;Y>=0;Y--)L=f.g=p[Y],V=G(L,y,!0,f)&&V;if(L=f.g=a,V=G(L,y,!0,f)&&V,V=G(L,y,!1,f)&&V,p)for(Y=0;Y<p.length;Y++)L=f.g=p[Y],V=G(L,y,!1,f)&&V}Q.prototype.N=function(){if(Q.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const p=a.g[f];for(let y=0;y<p.length;y++)ye(p[y]);delete a.g[f],a.h--}}this.G=null},Q.prototype.J=function(a,f,p,y){return this.i.add(String(a),f,!1,p,y)},Q.prototype.K=function(a,f,p,y){return this.i.add(String(a),f,!0,p,y)};function G(a,f,p,y){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let V=!0;for(let L=0;L<f.length;++L){const Y=f[L];if(Y&&!Y.da&&Y.capture==p){const Ae=Y.listener,lt=Y.ha||Y.src;Y.fa&&Lt(a.i,Y),V=Ae.call(lt,y)!==!1&&V}}return V&&!y.defaultPrevented}function he(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function te(a){a.g=he(()=>{a.g=null,a.i&&(a.i=!1,te(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class ce extends b{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:te(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(a){b.call(this),this.h=a,this.g={}}d(fe,b);var Se=[];function Fe(a){ft(a.g,function(f,p){this.g.hasOwnProperty(p)&&C(f)},a),a.g={}}fe.prototype.N=function(){fe.Z.N.call(this),Fe(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oe=o.JSON.stringify,St=o.JSON.parse,Rt=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Jt(){}function Yt(){}var gn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dr(){P.call(this,"d")}d(Dr,P);function Et(){P.call(this,"c")}d(Et,P);var dt={},Si=null;function Xs(){return Si=Si||new Q}dt.Ia="serverreachability";function Tf(a){P.call(this,dt.Ia,a)}d(Tf,P);function Ri(a){const f=Xs();K(f,new Tf(f))}dt.STAT_EVENT="statevent";function If(a,f){P.call(this,dt.STAT_EVENT,a),this.stat=f}d(If,P);function Ft(a){const f=Xs();K(f,new If(f,a))}dt.Ja="timingevent";function Af(a,f){P.call(this,dt.Ja,a),this.size=f}d(Af,P);function Ci(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function Pi(){this.g=!0}Pi.prototype.ua=function(){this.g=!1};function qE(a,f,p,y,V,L){a.info(function(){if(a.g)if(L){var Y="",Ae=L.split("&");for(let Be=0;Be<Ae.length;Be++){var lt=Ae[Be].split("=");if(lt.length>1){const pt=lt[0];lt=lt[1];const Rn=pt.split("_");Y=Rn.length>=2&&Rn[1]=="type"?Y+(pt+"="+lt+"&"):Y+(pt+"=redacted&")}}}else Y=null;else Y=L;return"XMLHTTP REQ ("+y+") [attempt "+V+"]: "+f+`
`+p+`
`+Y})}function HE(a,f,p,y,V,L,Y){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+V+"]: "+f+`
`+p+`
`+L+" "+Y})}function Vr(a,f,p,y){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+zE(a,p)+(y?" "+y:"")})}function WE(a,f){a.info(function(){return"TIMEOUT: "+f})}Pi.prototype.info=function(){};function zE(a,f){if(!a.g)return f;if(!f)return null;try{const L=JSON.parse(f);if(L){for(a=0;a<L.length;a++)if(Array.isArray(L[a])){var p=L[a];if(!(p.length<2)){var y=p[1];if(Array.isArray(y)&&!(y.length<1)){var V=y[0];if(V!="noop"&&V!="stop"&&V!="close")for(let Y=1;Y<y.length;Y++)y[Y]=""}}}}return Oe(L)}catch{return f}}var oa={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bf={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sf;function dc(){}d(dc,Jt),dc.prototype.g=function(){return new XMLHttpRequest},Sf=new dc;function ki(a){return encodeURIComponent(String(a))}function GE(a){var f=1;a=a.split(":");const p=[];for(;f>0&&a.length;)p.push(a.shift()),f--;return a.length&&p.push(a.join(":")),p}function ds(a,f,p,y){this.j=a,this.i=f,this.l=p,this.S=y||1,this.V=new fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Rf}function Rf(){this.i=null,this.g="",this.h=!1}var Cf={},pc={};function mc(a,f,p){a.M=1,a.A=la(Sn(f)),a.u=p,a.R=!0,Pf(a,null)}function Pf(a,f){a.F=Date.now(),aa(a),a.B=Sn(a.A);var p=a.B,y=a.S;Array.isArray(y)||(y=[String(y)]),jf(p.i,"t",y),a.C=0,p=a.j.L,a.h=new Rf,a.g=od(a.j,p?f:null,!a.u),a.P>0&&(a.O=new ce(u(a.Y,a,a.g),a.P)),f=a.V,p=a.g,y=a.ba;var V="readystatechange";Array.isArray(V)||(V&&(Se[0]=V.toString()),V=Se);for(let L=0;L<V.length;L++){const Y=ee(p,V[L],y||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=a.J?Je(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),Ri(),qE(a.i,a.v,a.B,a.l,a.S,a.u)}ds.prototype.ba=function(a){a=a.target;const f=this.O;f&&gs(a)==3?f.j():this.Y(a)},ds.prototype.Y=function(a){try{if(a==this.g)e:{const Ae=gs(this.g),lt=this.g.ya(),Be=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||Qf(this.g)))){this.K||Ae!=4||lt==7||(lt==8||Be<=0?Ri(3):Ri(2)),gc(this);var f=this.g.ca();this.X=f;var p=KE(this);if(this.o=f==200,HE(this.i,this.v,this.B,this.l,this.S,Ae,f),this.o){if(this.U&&!this.L){t:{if(this.g){var y,V=this.g;if((y=V.g?V.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(y)){var L=y;break t}}L=null}if(a=L)Vr(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_c(this,a);else{this.o=!1,this.m=3,Ft(12),Zs(this),Ni(this);break e}}if(this.R){a=!0;let pt;for(;!this.K&&this.C<p.length;)if(pt=QE(this,p),pt==pc){Ae==4&&(this.m=4,Ft(14),a=!1),Vr(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==Cf){this.m=4,Ft(15),Vr(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else Vr(this.i,this.l,pt,null),_c(this,pt);if(kf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||p.length!=0||this.h.h||(this.m=1,Ft(16),a=!1),this.o=this.o&&a,!a)Vr(this.i,this.l,p,"[Invalid Chunked Response]"),Zs(this),Ni(this);else if(p.length>0&&!this.W){this.W=!0;var Y=this.j;Y.g==this&&Y.aa&&!Y.P&&(Y.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),bc(Y),Y.P=!0,Ft(11))}}else Vr(this.i,this.l,p,null),_c(this,p);Ae==4&&Zs(this),this.o&&!this.K&&(Ae==4?nd(this.j,this):(this.o=!1,aa(this)))}else cw(this.g),f==400&&p.indexOf("Unknown SID")>0?(this.m=3,Ft(12)):(this.m=0,Ft(13)),Zs(this),Ni(this)}}}catch{}finally{}};function KE(a){if(!kf(a))return a.g.la();const f=Qf(a.g);if(f==="")return"";let p="";const y=f.length,V=gs(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Zs(a),Ni(a),"";a.h.i=new o.TextDecoder}for(let L=0;L<y;L++)a.h.h=!0,p+=a.h.i.decode(f[L],{stream:!(V&&L==y-1)});return f.length=0,a.h.g+=p,a.C=0,a.h.g}function kf(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function QE(a,f){var p=a.C,y=f.indexOf(`
`,p);return y==-1?pc:(p=Number(f.substring(p,y)),isNaN(p)?Cf:(y+=1,y+p>f.length?pc:(f=f.slice(y,y+p),a.C=y+p,f)))}ds.prototype.cancel=function(){this.K=!0,Zs(this)};function aa(a){a.T=Date.now()+a.H,Nf(a,a.H)}function Nf(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Ci(u(a.aa,a),f)}function gc(a){a.D&&(o.clearTimeout(a.D),a.D=null)}ds.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(WE(this.i,this.B),this.M!=2&&(Ri(),Ft(17)),Zs(this),this.m=2,Ni(this)):Nf(this,this.T-a)};function Ni(a){a.j.I==0||a.K||nd(a.j,a)}function Zs(a){gc(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,Fe(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function _c(a,f){try{var p=a.j;if(p.I!=0&&(p.g==a||yc(p.h,a))){if(!a.L&&yc(p.h,a)&&p.I==3){try{var y=p.Ba.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var V=y;if(V[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)da(p),ha(p);else break e;Ac(p),Ft(18)}}else p.xa=V[1],0<p.xa-p.K&&V[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=Ci(u(p.Va,p),6e3));Vf(p.h)<=1&&p.ta&&(p.ta=void 0)}else tr(p,11)}else if((a.L||p.g==a)&&da(p),!A(f))for(V=p.Ba.g.parse(f),f=0;f<V.length;f++){let Be=V[f];const pt=Be[0];if(!(pt<=p.K))if(p.K=pt,Be=Be[1],p.I==2)if(Be[0]=="c"){p.M=Be[1],p.ba=Be[2];const Rn=Be[3];Rn!=null&&(p.ka=Rn,p.j.info("VER="+p.ka));const nr=Be[4];nr!=null&&(p.za=nr,p.j.info("SVER="+p.za));const _s=Be[5];_s!=null&&typeof _s=="number"&&_s>0&&(y=1.5*_s,p.O=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;const ys=a.g;if(ys){const ma=ys.g?ys.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ma){var L=y.h;L.g||ma.indexOf("spdy")==-1&&ma.indexOf("quic")==-1&&ma.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(vc(L,L.h),L.h=null))}if(y.G){const Sc=ys.g?ys.g.getResponseHeader("X-HTTP-Session-Id"):null;Sc&&(y.wa=Sc,Ge(y.J,y.G,Sc))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),y=p;var Y=a;if(y.na=id(y,y.L?y.ba:null,y.W),Y.L){xf(y.h,Y);var Ae=Y,lt=y.O;lt&&(Ae.H=lt),Ae.D&&(gc(Ae),aa(Ae)),y.g=Y}else ed(y);p.i.length>0&&fa(p)}else Be[0]!="stop"&&Be[0]!="close"||tr(p,7);else p.I==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?tr(p,7):Ic(p):Be[0]!="noop"&&p.l&&p.l.qa(Be),p.A=0)}}Ri(4)}catch{}}var JE=class{constructor(a,f){this.g=a,this.map=f}};function Of(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Df(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Vf(a){return a.h?1:a.g?a.g.size:0}function yc(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function vc(a,f){a.g?a.g.add(f):a.h=f}function xf(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}Of.prototype.cancel=function(){if(this.i=Mf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Mf(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const p of a.g.values())f=f.concat(p.G);return f}return g(a.i)}var Lf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YE(a,f){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const y=a[p].indexOf("=");let V,L=null;y>=0?(V=a[p].substring(0,y),L=a[p].substring(y+1)):V=a[p],f(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ps(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof ps?(this.l=a.l,Oi(this,a.j),this.o=a.o,this.g=a.g,Di(this,a.u),this.h=a.h,Ec(this,qf(a.i)),this.m=a.m):a&&(f=String(a).match(Lf))?(this.l=!1,Oi(this,f[1]||"",!0),this.o=Vi(f[2]||""),this.g=Vi(f[3]||"",!0),Di(this,f[4]),this.h=Vi(f[5]||"",!0),Ec(this,f[6]||"",!0),this.m=Vi(f[7]||"")):(this.l=!1,this.i=new Mi(null,this.l))}ps.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(xi(f,Ff,!0),":");var p=this.g;return(p||f=="file")&&(a.push("//"),(f=this.o)&&a.push(xi(f,Ff,!0),"@"),a.push(ki(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(xi(p,p.charAt(0)=="/"?ew:ZE,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",xi(p,nw)),a.join("")},ps.prototype.resolve=function(a){const f=Sn(this);let p=!!a.j;p?Oi(f,a.j):p=!!a.o,p?f.o=a.o:p=!!a.g,p?f.g=a.g:p=a.u!=null;var y=a.h;if(p)Di(f,a.u);else if(p=!!a.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var V=f.h.lastIndexOf("/");V!=-1&&(y=f.h.slice(0,V+1)+y)}if(V=y,V==".."||V==".")y="";else if(V.indexOf("./")!=-1||V.indexOf("/.")!=-1){y=V.lastIndexOf("/",0)==0,V=V.split("/");const L=[];for(let Y=0;Y<V.length;){const Ae=V[Y++];Ae=="."?y&&Y==V.length&&L.push(""):Ae==".."?((L.length>1||L.length==1&&L[0]!="")&&L.pop(),y&&Y==V.length&&L.push("")):(L.push(Ae),y=!0)}y=L.join("/")}else y=V}return p?f.h=y:p=a.i.toString()!=="",p?Ec(f,qf(a.i)):p=!!a.m,p&&(f.m=a.m),f};function Sn(a){return new ps(a)}function Oi(a,f,p){a.j=p?Vi(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function Di(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function Ec(a,f,p){f instanceof Mi?(a.i=f,sw(a.i,a.l)):(p||(f=xi(f,tw)),a.i=new Mi(f,a.l))}function Ge(a,f,p){a.i.set(f,p)}function la(a){return Ge(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Vi(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function xi(a,f,p){return typeof a=="string"?(a=encodeURI(a).replace(f,XE),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function XE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ff=/[#\/\?@]/g,ZE=/[#\?:]/g,ew=/[#\?]/g,tw=/[#\?@]/g,nw=/#/g;function Mi(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function er(a){a.g||(a.g=new Map,a.h=0,a.i&&YE(a.i,function(f,p){a.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}t=Mi.prototype,t.add=function(a,f){er(this),this.i=null,a=xr(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(f),this.h+=1,this};function Uf(a,f){er(a),f=xr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function Bf(a,f){return er(a),f=xr(a,f),a.g.has(f)}t.forEach=function(a,f){er(this),this.g.forEach(function(p,y){p.forEach(function(V){a.call(f,V,y,this)},this)},this)};function $f(a,f){er(a);let p=[];if(typeof f=="string")Bf(a,f)&&(p=p.concat(a.g.get(xr(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)p=p.concat(a[f]);return p}t.set=function(a,f){return er(this),this.i=null,a=xr(this,a),Bf(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=$f(this,a),a.length>0?String(a[0]):f):f};function jf(a,f,p){Uf(a,f),p.length>0&&(a.i=null,a.g.set(xr(a,f),g(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let y=0;y<f.length;y++){var p=f[y];const V=ki(p);p=$f(this,p);for(let L=0;L<p.length;L++){let Y=V;p[L]!==""&&(Y+="="+ki(p[L])),a.push(Y)}}return this.i=a.join("&")};function qf(a){const f=new Mi;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function xr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function sw(a,f){f&&!a.j&&(er(a),a.i=null,a.g.forEach(function(p,y){const V=y.toLowerCase();y!=V&&(Uf(this,y),jf(this,V,p))},a)),a.j=f}function rw(a,f){const p=new Pi;if(o.Image){const y=new Image;y.onload=h(ms,p,"TestLoadImage: loaded",!0,f,y),y.onerror=h(ms,p,"TestLoadImage: error",!1,f,y),y.onabort=h(ms,p,"TestLoadImage: abort",!1,f,y),y.ontimeout=h(ms,p,"TestLoadImage: timeout",!1,f,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else f(!1)}function iw(a,f){const p=new Pi,y=new AbortController,V=setTimeout(()=>{y.abort(),ms(p,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:y.signal}).then(L=>{clearTimeout(V),L.ok?ms(p,"TestPingServer: ok",!0,f):ms(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(V),ms(p,"TestPingServer: error",!1,f)})}function ms(a,f,p,y,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),y(p)}catch{}}function ow(){this.g=new Rt}function wc(a){this.i=a.Sb||null,this.h=a.ab||!1}d(wc,Jt),wc.prototype.g=function(){return new ca(this.i,this.h)};function ca(a,f){Q.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}d(ca,Q),t=ca.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,Fi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Li(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Hf(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Hf(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?Li(this):Fi(this),this.readyState==3&&Hf(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Li(this))},t.Na=function(a){this.g&&(this.response=a,Li(this))},t.ga=function(){this.g&&Li(this)};function Li(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Fi(a)}t.setRequestHeader=function(a,f){this.A.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=f.next();return a.join(`\r
`)};function Fi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Wf(a){let f="";return ft(a,function(p,y){f+=y,f+=":",f+=p,f+=`\r
`}),f}function Tc(a,f,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=Wf(p),typeof a=="string"?p!=null&&ki(p):Ge(a,f,p))}function Xe(a){Q.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}d(Xe,Q);var aw=/^https?$/i,lw=["POST","PUT"];t=Xe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,f,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sf.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(L){zf(this,L);return}if(a=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var V in y)p.set(V,y[V]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const L of y.keys())p.set(L,y.get(L));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(L=>L.toLowerCase()=="content-type"),V=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(lw,f,void 0)>=0)||y||V||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,Y]of p)this.g.setRequestHeader(L,Y);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(L){zf(this,L)}};function zf(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,Gf(a),ua(a)}function Gf(a){a.A||(a.A=!0,K(a,"complete"),K(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,K(this,"complete"),K(this,"abort"),ua(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ua(this,!0)),Xe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Kf(this):this.Xa())},t.Xa=function(){Kf(this)};function Kf(a){if(a.h&&typeof i<"u"){if(a.v&&gs(a)==4)setTimeout(a.Ca.bind(a),0);else if(K(a,"readystatechange"),gs(a)==4){a.h=!1;try{const L=a.ca();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var y;if(y=L===0){let Y=String(a.D).match(Lf)[1]||null;!Y&&o.self&&o.self.location&&(Y=o.self.location.protocol.slice(0,-1)),y=!aw.test(Y?Y.toLowerCase():"")}p=y}if(p)K(a,"complete"),K(a,"success");else{a.o=6;try{var V=gs(a)>2?a.g.statusText:""}catch{V=""}a.l=V+" ["+a.ca()+"]",Gf(a)}}finally{ua(a)}}}}function ua(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,f||K(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function gs(a){return a.g?a.g.readyState:0}t.ca=function(){try{return gs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),St(f)}};function Qf(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function cw(a){const f={};a=(a.g&&gs(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(A(a[y]))continue;var p=GE(a[y]);const V=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const L=f[V]||[];f[V]=L,L.push(p)}Qt(f,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(a,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||f}function Jf(a){this.za=0,this.i=[],this.j=new Pi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ui("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ui("baseRetryDelayMs",5e3,a),this.Za=Ui("retryDelaySeedMs",1e4,a),this.Ta=Ui("forwardChannelMaxRetries",2,a),this.va=Ui("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Of(a&&a.concurrentRequestLimit),this.Ba=new ow,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Jf.prototype,t.ka=8,t.I=1,t.connect=function(a,f,p,y){Ft(0),this.W=a,this.H=f||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.J=id(this,null,this.W),fa(this)};function Ic(a){if(Yf(a),a.I==3){var f=a.V++,p=Sn(a.J);if(Ge(p,"SID",a.M),Ge(p,"RID",f),Ge(p,"TYPE","terminate"),Bi(a,p),f=new ds(a,a.j,f),f.M=2,f.A=la(Sn(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=f.A,p=!0),p||(f.g=od(f.j,null),f.g.ea(f.A)),f.F=Date.now(),aa(f)}rd(a)}function ha(a){a.g&&(bc(a),a.g.cancel(),a.g=null)}function Yf(a){ha(a),a.v&&(o.clearTimeout(a.v),a.v=null),da(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function fa(a){if(!Df(a.h)&&!a.m){a.m=!0;var f=a.Ea;U||_(),B||(U(),B=!0),T.add(f,a),a.D=0}}function uw(a,f){return Vf(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Ci(u(a.Ea,a,f),sd(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const V=new ds(this,this.j,a);let L=this.o;if(this.U&&(L?(L=Je(L),Ht(L,this.U)):L=this.U),this.u!==null||this.R||(V.J=L,L=null),this.S)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,f>4096){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=Zf(this,V,f),p=Sn(this.J),Ge(p,"RID",a),Ge(p,"CVER",22),this.G&&Ge(p,"X-HTTP-Session-Id",this.G),Bi(this,p),L&&(this.R?f="headers="+ki(Wf(L))+"&"+f:this.u&&Tc(p,this.u,L)),vc(this.h,V),this.Ra&&Ge(p,"TYPE","init"),this.S?(Ge(p,"$req",f),Ge(p,"SID","null"),V.U=!0,mc(V,p,null)):mc(V,p,f),this.I=2}}else this.I==3&&(a?Xf(this,a):this.i.length==0||Df(this.h)||Xf(this))};function Xf(a,f){var p;f?p=f.l:p=a.V++;const y=Sn(a.J);Ge(y,"SID",a.M),Ge(y,"RID",p),Ge(y,"AID",a.K),Bi(a,y),a.u&&a.o&&Tc(y,a.u,a.o),p=new ds(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),f&&(a.i=f.G.concat(a.i)),f=Zf(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),vc(a.h,p),mc(p,y,f)}function Bi(a,f){a.H&&ft(a.H,function(p,y){Ge(f,y,p)}),a.l&&ft({},function(p,y){Ge(f,y,p)})}function Zf(a,f,p){p=Math.min(a.i.length,p);const y=a.l?u(a.l.Ka,a.l,a):null;e:{var V=a.i;let Ae=-1;for(;;){const lt=["count="+p];Ae==-1?p>0?(Ae=V[0].g,lt.push("ofs="+Ae)):Ae=0:lt.push("ofs="+Ae);let Be=!0;for(let pt=0;pt<p;pt++){var L=V[pt].g;const Rn=V[pt].map;if(L-=Ae,L<0)Ae=Math.max(0,V[pt].g-100),Be=!1;else try{L="req"+L+"_"||"";try{var Y=Rn instanceof Map?Rn:Object.entries(Rn);for(const[nr,_s]of Y){let ys=_s;l(_s)&&(ys=Oe(_s)),lt.push(L+nr+"="+encodeURIComponent(ys))}}catch(nr){throw lt.push(L+"type="+encodeURIComponent("_badmap")),nr}}catch{y&&y(Rn)}}if(Be){Y=lt.join("&");break e}}Y=void 0}return a=a.i.splice(0,p),f.G=a,Y}function ed(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;U||_(),B||(U(),B=!0),T.add(f,a),a.A=0}}function Ac(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Ci(u(a.Da,a),sd(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,td(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Ci(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ft(10),ha(this),td(this))};function bc(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function td(a){a.g=new ds(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=Sn(a.na);Ge(f,"RID","rpc"),Ge(f,"SID",a.M),Ge(f,"AID",a.K),Ge(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ge(f,"TO",a.ia),Ge(f,"TYPE","xmlhttp"),Bi(a,f),a.u&&a.o&&Tc(f,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=la(Sn(f)),p.u=null,p.R=!0,Pf(p,a)}t.Va=function(){this.C!=null&&(this.C=null,ha(this),Ac(this),Ft(19))};function da(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function nd(a,f){var p=null;if(a.g==f){da(a),bc(a),a.g=null;var y=2}else if(yc(a.h,f))p=f.G,xf(a.h,f),y=1;else return;if(a.I!=0){if(f.o)if(y==1){p=f.u?f.u.length:0,f=Date.now()-f.F;var V=a.D;y=Xs(),K(y,new Af(y,p)),fa(a)}else ed(a);else if(V=f.m,V==3||V==0&&f.X>0||!(y==1&&uw(a,f)||y==2&&Ac(a)))switch(p&&p.length>0&&(f=a.h,f.i=f.i.concat(p)),V){case 1:tr(a,5);break;case 4:tr(a,10);break;case 3:tr(a,6);break;default:tr(a,2)}}}function sd(a,f){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*f}function tr(a,f){if(a.j.info("Error code "+f),f==2){var p=u(a.bb,a),y=a.Ua;const V=!y;y=new ps(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Oi(y,"https"),la(y),V?rw(y.toString(),p):iw(y.toString(),p)}else Ft(2);a.I=0,a.l&&a.l.pa(f),rd(a),Yf(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function rd(a){if(a.I=0,a.ja=[],a.l){const f=Mf(a.h);(f.length!=0||a.i.length!=0)&&(E(a.ja,f),E(a.ja,a.i),a.h.i.length=0,g(a.i),a.i.length=0),a.l.oa()}}function id(a,f,p){var y=p instanceof ps?Sn(p):new ps(p);if(y.g!="")f&&(y.g=f+"."+y.g),Di(y,y.u);else{var V=o.location;y=V.protocol,f=f?f+"."+V.hostname:V.hostname,V=+V.port;const L=new ps(null);y&&Oi(L,y),f&&(L.g=f),V&&Di(L,V),p&&(L.h=p),y=L}return p=a.G,f=a.wa,p&&f&&Ge(y,p,f),Ge(y,"VER",a.ka),Bi(a,y),y}function od(a,f,p){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new Xe(new wc({ab:p})):new Xe(a.ma),f.Fa(a.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ad(){}t=ad.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function pa(){}pa.prototype.g=function(a,f){return new Xt(a,f)};function Xt(a,f){Q.call(this),this.g=new Jf(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!A(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!A(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new Mr(this)}d(Xt,Q),Xt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Xt.prototype.close=function(){Ic(this.g)},Xt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=Oe(a),a=p);f.i.push(new JE(f.Ya++,a)),f.I==3&&fa(f)},Xt.prototype.N=function(){this.g.l=null,delete this.j,Ic(this.g),delete this.g,Xt.Z.N.call(this)};function ld(a){Dr.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const p in f){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}d(ld,Dr);function cd(){Et.call(this),this.status=1}d(cd,Et);function Mr(a){this.g=a}d(Mr,ad),Mr.prototype.ra=function(){K(this.g,"a")},Mr.prototype.qa=function(a){K(this.g,new ld(a))},Mr.prototype.pa=function(a){K(this.g,new cd)},Mr.prototype.oa=function(){K(this.g,"b")},pa.prototype.createWebChannel=pa.prototype.g,Xt.prototype.send=Xt.prototype.o,Xt.prototype.open=Xt.prototype.m,Xt.prototype.close=Xt.prototype.close,mv=function(){return new pa},pv=function(){return Xs()},dv=dt,xu={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},oa.NO_ERROR=0,oa.TIMEOUT=8,oa.HTTP_ERROR=6,Fa=oa,bf.COMPLETE="complete",fv=bf,Yt.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",Q.prototype.listen=Q.prototype.J,Yi=Yt,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,hv=Xe}).apply(typeof Ta<"u"?Ta:typeof self<"u"?self:typeof window<"u"?window:{});const am="@firebase/firestore",lm="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ei="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar=new Ah("@firebase/firestore");function $r(){return Ar.logLevel}function re(t,...e){if(Ar.logLevel<=Re.DEBUG){const n=e.map(Lh);Ar.debug(`Firestore (${Ei}): ${t}`,...n)}}function cs(t,...e){if(Ar.logLevel<=Re.ERROR){const n=e.map(Lh);Ar.error(`Firestore (${Ei}): ${t}`,...n)}}function ii(t,...e){if(Ar.logLevel<=Re.WARN){const n=e.map(Lh);Ar.warn(`Firestore (${Ei}): ${t}`,...n)}}function Lh(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(t,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,gv(t,s,n)}function gv(t,e,n){let s=`FIRESTORE (${Ei}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw cs(s),new Error(s)}function Me(t,e,n,s){let r="Unexpected state";typeof n=="string"?r=n:s=n,t||gv(e,r,s)}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends fs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Nt.UNAUTHENTICATED)))}shutdown(){}}class PP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class kP{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0,42304);let s=this.i;const r=c=>this.i!==s?(s=this.i,n(c)):Promise.resolve();let i=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new yr,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const c=i;e.enqueueRetryable((async()=>{await c.promise,await r(this.currentUser)}))},l=c=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new yr)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Me(typeof s.accessToken=="string",31837,{l:s}),new _v(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string",2055,{h:e}),new Nt(e)}}class NP{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class OP{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new NP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Nt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class cm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class DP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,en(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Me(this.o===void 0,3512);const s=i=>{i.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>s(i)))};const r=i=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>r(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?r(i):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new cm(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Me(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new cm(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=VP(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%62))}return s}}function Ce(t,e){return t<e?-1:t>e?1:0}function Mu(t,e){const n=Math.min(t.length,e.length);for(let s=0;s<n;s++){const r=t.charAt(s),i=e.charAt(s);if(r!==i)return eu(r)===eu(i)?Ce(r,i):eu(r)?1:-1}return Ce(t.length,e.length)}const xP=55296,MP=57343;function eu(t){const e=t.charCodeAt(0);return e>=xP&&e<=MP}function oi(t,e,n){return t.length===e.length&&t.every(((s,r)=>n(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="__name__";class Nn{constructor(e,n,s){n===void 0?n=0:n>e.length&&me(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&me(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Nn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nn?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=Nn.compareSegments(e.get(r),n.get(r));if(i!==0)return i}return Ce(e.length,n.length)}static compareSegments(e,n){const s=Nn.isNumericId(e),r=Nn.isNumericId(n);return s&&!r?-1:!s&&r?1:s&&r?Nn.extractNumericId(e).compare(Nn.extractNumericId(n)):Mu(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ls.fromString(e.substring(4,e.length-2))}}class He extends Nn{construct(e,n,s){return new He(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ne(H.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((r=>r.length>0)))}return new He(n)}static emptyPath(){return new He([])}}const LP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Nn{construct(e,n,s){return new At(e,n,s)}static isValidIdentifier(e){return LP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===um}static keyField(){return new At([um])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new ne(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new ne(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ne(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=c,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(s+=l,r++):(i(),r++)}if(i(),o)throw new ne(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(He.fromString(e))}static fromName(e){return new le(He.fromString(e).popFirst(5))}static empty(){return new le(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t,e,n){if(!n)throw new ne(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FP(t,e,n,s){if(e===!0&&s===!0)throw new ne(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function hm(t){if(!le.isDocumentKey(t))throw new ne(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fm(t){if(le.isDocumentKey(t))throw new ne(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Gl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":me(12329,{type:typeof t})}function Ln(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gl(t);throw new ne(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(t,e){const n={typeString:t};return e&&(n.value=e),n}function ta(t,e){if(!vv(t))throw new ne(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const r=e[s].typeString,i="value"in e[s]?{value:e[s].value}:void 0;if(!(s in t)){n=`JSON missing required field: '${s}'`;break}const o=t[s];if(r&&typeof o!==r){n=`JSON field '${s}' must be a ${r}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${s}' field to equal '${i.value}'`;break}}if(n)throw new ne(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=-62135596800,pm=1e6;class Ke{static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*pm);return new Ke(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dm)throw new ne(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/pm}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ta(e,Ke._jsonSchema))return new Ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ke._jsonSchemaVersion="firestore/timestamp/1.0",Ke._jsonSchema={type:at("string",Ke._jsonSchemaVersion),seconds:at("number"),nanoseconds:at("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new Ke(0,0))}static max(){return new ve(new Ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No=-1;function UP(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=ve.fromTimestamp(s===1e9?new Ke(n+1,0):new Ke(n,s));return new Bs(r,le.empty(),e)}function BP(t){return new Bs(t.readTime,t.key,No)}class Bs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Bs(ve.min(),le.empty(),No)}static max(){return new Bs(ve.max(),le.empty(),No)}}function $P(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wi(t){if(t.code!==H.FAILED_PRECONDITION||t.message!==jP)throw t;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,s)=>{n(e)}))}static reject(e){return new W(((n,s)=>{s(e)}))}static waitFor(e){return new W(((n,s)=>{let r=0,i=0,o=!1;e.forEach((l=>{++r,l.next((()=>{++i,o&&i===r&&n()}),(c=>s(c)))})),o=!0,i===r&&n()}))}static or(e){let n=W.resolve(!1);for(const s of e)n=n.next((r=>r?W.resolve(r):s()));return n}static forEach(e,n){const s=[];return e.forEach(((r,i)=>{s.push(n.call(this,r,i))})),this.waitFor(s)}static mapArray(e,n){return new W(((s,r)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next((h=>{o[u]=h,++l,l===i&&s(o)}),(h=>r(h)))}}))}static doWhile(e,n){return new W(((s,r)=>{const i=()=>{e()===!0?n().next((()=>{i()}),r):s()};i()}))}}function HP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ti(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kl.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=-1;function Ql(t){return t==null}function cl(t){return t===0&&1/t==-1/0}function WP(t){return typeof t=="number"&&Number.isInteger(t)&&!cl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev="";function zP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=mm(e)),e=GP(t.get(n),e);return mm(e)}function GP(t,e){let n=e;const s=t.length;for(let r=0;r<s;r++){const i=t.charAt(r);switch(i){case"\0":n+="";break;case Ev:n+="";break;default:n+=i}}return n}function mm(t){return t+Ev+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||wt.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,wt.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ia(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ia(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ia(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ia(this.root,e,this.comparator,!0)}}class Ia{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wt{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s??wt.RED,this.left=r??wt.EMPTY,this.right=i??wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new wt(e??this.key,n??this.value,s??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return wt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}wt.EMPTY=null,wt.RED=!0,wt.BLACK=!1;wt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,n,s,r,i){return this}insert(e,n,s){return new wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _m(this.data.getIterator())}getIteratorFrom(e){return new _m(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ut(this.comparator);return n.data=e,n}}class _m{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new sn([])}unionWith(e){let n=new ut(At.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oi(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Tv("Invalid base64 string: "+i):i}})(e);return new bt(n)}static fromUint8Array(e){const n=(function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i})(e);return new bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const KP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $s(t){if(Me(!!t,39018),typeof t=="string"){let e=0;const n=KP.exec(t);if(Me(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function js(t){return typeof t=="string"?bt.fromBase64String(t):bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="server_timestamp",Av="__type__",bv="__previous_value__",Sv="__local_write_time__";function Bh(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Av])==null?void 0:s.stringValue)===Iv}function Jl(t){const e=t.mapValue.fields[bv];return Bh(e)?Jl(e):e}function Oo(t){const e=$s(t.mapValue.fields[Sv].timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n,s,r,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const ul="(default)";class Do{constructor(e,n){this.projectId=e,this.database=n||ul}static empty(){return new Do("","")}get isDefaultDatabase(){return this.database===ul}isEqual(e){return e instanceof Do&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="__type__",JP="__max__",Aa={mapValue:{}},Cv="__vector__",hl="value";function qs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bh(t)?4:XP(t)?9007199254740991:YP(t)?10:11:me(28295,{value:t})}function qn(t,e){if(t===e)return!0;const n=qs(t);if(n!==qs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oo(t).isEqual(Oo(e));case 3:return(function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=$s(r.timestampValue),l=$s(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,i){return js(r.bytesValue).isEqual(js(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,i){return nt(r.geoPointValue.latitude)===nt(i.geoPointValue.latitude)&&nt(r.geoPointValue.longitude)===nt(i.geoPointValue.longitude)})(t,e);case 2:return(function(r,i){if("integerValue"in r&&"integerValue"in i)return nt(r.integerValue)===nt(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=nt(r.doubleValue),l=nt(i.doubleValue);return o===l?cl(o)===cl(l):isNaN(o)&&isNaN(l)}return!1})(t,e);case 9:return oi(t.arrayValue.values||[],e.arrayValue.values||[],qn);case 10:case 11:return(function(r,i){const o=r.mapValue.fields||{},l=i.mapValue.fields||{};if(gm(o)!==gm(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!qn(o[c],l[c])))return!1;return!0})(t,e);default:return me(52216,{left:t})}}function Vo(t,e){return(t.values||[]).find((n=>qn(n,e)))!==void 0}function ai(t,e){if(t===e)return 0;const n=qs(t),s=qs(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(t.booleanValue,e.booleanValue);case 2:return(function(i,o){const l=nt(i.integerValue||i.doubleValue),c=nt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(t,e);case 3:return ym(t.timestampValue,e.timestampValue);case 4:return ym(Oo(t),Oo(e));case 5:return Mu(t.stringValue,e.stringValue);case 6:return(function(i,o){const l=js(i),c=js(o);return l.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ce(l[u],c[u]);if(h!==0)return h}return Ce(l.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,o){const l=Ce(nt(i.latitude),nt(o.latitude));return l!==0?l:Ce(nt(i.longitude),nt(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return vm(t.arrayValue,e.arrayValue);case 10:return(function(i,o){var m,g,E,k;const l=i.fields||{},c=o.fields||{},u=(m=l[hl])==null?void 0:m.arrayValue,h=(g=c[hl])==null?void 0:g.arrayValue,d=Ce(((E=u==null?void 0:u.values)==null?void 0:E.length)||0,((k=h==null?void 0:h.values)==null?void 0:k.length)||0);return d!==0?d:vm(u,h)})(t.mapValue,e.mapValue);case 11:return(function(i,o){if(i===Aa.mapValue&&o===Aa.mapValue)return 0;if(i===Aa.mapValue)return 1;if(o===Aa.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){const m=Mu(c[d],h[d]);if(m!==0)return m;const g=ai(l[c[d]],u[h[d]]);if(g!==0)return g}return Ce(c.length,h.length)})(t.mapValue,e.mapValue);default:throw me(23264,{he:n})}}function ym(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ce(t,e);const n=$s(t),s=$s(e),r=Ce(n.seconds,s.seconds);return r!==0?r:Ce(n.nanos,s.nanos)}function vm(t,e){const n=t.values||[],s=e.values||[];for(let r=0;r<n.length&&r<s.length;++r){const i=ai(n[r],s[r]);if(i)return i}return Ce(n.length,s.length)}function li(t){return Lu(t)}function Lu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const s=$s(n);return`time(${s.seconds},${s.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return js(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return le.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let s="[",r=!0;for(const i of n.values||[])r?r=!1:s+=",",s+=Lu(i);return s+"]"})(t.arrayValue):"mapValue"in t?(function(n){const s=Object.keys(n.fields||{}).sort();let r="{",i=!0;for(const o of s)i?i=!1:r+=",",r+=`${o}:${Lu(n.fields[o])}`;return r+"}"})(t.mapValue):me(61005,{value:t})}function Ua(t){switch(qs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jl(t);return e?16+Ua(e):16;case 5:return 2*t.stringValue.length;case 6:return js(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,i)=>r+Ua(i)),0)})(t.arrayValue);case 10:case 11:return(function(s){let r=0;return Js(s.fields,((i,o)=>{r+=i.length+Ua(o)})),r})(t.mapValue);default:throw me(13486,{value:t})}}function Em(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Fu(t){return!!t&&"integerValue"in t}function $h(t){return!!t&&"arrayValue"in t}function wm(t){return!!t&&"nullValue"in t}function Tm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ba(t){return!!t&&"mapValue"in t}function YP(t){var n,s;return((s=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Rv])==null?void 0:s.stringValue)===Cv}function po(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Js(t.mapValue.fields,((n,s)=>e.mapValue.fields[n]=po(s))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=po(t.arrayValue.values[n]);return e}return{...t}}function XP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===JP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.value=e}static empty(){return new zt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Ba(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=po(n)}setAll(e){let n=At.emptyPath(),s={},r=[];e.forEach(((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,s,r),s={},r=[],n=l.popLast()}o?s[l.lastSegment()]=po(o):r.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());Ba(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];Ba(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){Js(n,((r,i)=>e[r]=i));for(const r of s)delete e[r]}clone(){return new zt(po(this.value))}}function Pv(t){const e=[];return Js(t.fields,((n,s)=>{const r=new At([n]);if(Ba(s)){const i=Pv(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)})),new sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,s,r,i,o,l){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Dt(e,0,ve.min(),ve.min(),ve.min(),zt.empty(),0)}static newFoundDocument(e,n,s,r){return new Dt(e,1,n,ve.min(),s,r,0)}static newNoDocument(e,n){return new Dt(e,2,n,ve.min(),ve.min(),zt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,ve.min(),ve.min(),zt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,n){this.position=e,this.inclusive=n}}function Im(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=le.comparator(le.fromName(o.referenceValue),n.key):s=ai(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Am(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n="asc"){this.field=e,this.dir=n}}function ZP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{}class ot extends kv{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new t1(e,n,s):n==="array-contains"?new r1(e,s):n==="in"?new i1(e,s):n==="not-in"?new o1(e,s):n==="array-contains-any"?new a1(e,s):new ot(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new n1(e,s):new s1(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ai(n,this.value)):n!==null&&qs(this.value)===qs(n)&&this.matchesComparison(ai(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class An extends kv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new An(e,n)}matches(e){return Nv(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Nv(t){return t.op==="and"}function Ov(t){return e1(t)&&Nv(t)}function e1(t){for(const e of t.filters)if(e instanceof An)return!1;return!0}function Uu(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+li(t.value);if(Ov(t))return t.filters.map((e=>Uu(e))).join(",");{const e=t.filters.map((n=>Uu(n))).join(",");return`${t.op}(${e})`}}function Dv(t,e){return t instanceof ot?(function(s,r){return r instanceof ot&&s.op===r.op&&s.field.isEqual(r.field)&&qn(s.value,r.value)})(t,e):t instanceof An?(function(s,r){return r instanceof An&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((i,o,l)=>i&&Dv(o,r.filters[l])),!0):!1})(t,e):void me(19439)}function Vv(t){return t instanceof ot?(function(n){return`${n.field.canonicalString()} ${n.op} ${li(n.value)}`})(t):t instanceof An?(function(n){return n.op.toString()+" {"+n.getFilters().map(Vv).join(" ,")+"}"})(t):"Filter"}class t1 extends ot{constructor(e,n,s){super(e,n,s),this.key=le.fromName(s.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class n1 extends ot{constructor(e,n){super(e,"in",n),this.keys=xv("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class s1 extends ot{constructor(e,n){super(e,"not-in",n),this.keys=xv("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function xv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((s=>le.fromName(s.referenceValue)))}class r1 extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $h(n)&&Vo(n.arrayValue,this.value)}}class i1 extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vo(this.value.arrayValue,n)}}class o1 extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vo(this.value.arrayValue,n)}}class a1 extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$h(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>Vo(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n=null,s=[],r=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function bm(t,e=null,n=[],s=[],r=null,i=null,o=null){return new l1(t,e,n,s,r,i,o)}function jh(t){const e=we(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Uu(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(i){return i.field.canonicalString()+i.dir})(s))).join(","),Ql(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>li(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>li(s))).join(",")),e.Te=n}return e.Te}function qh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ZP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Dv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Am(t.startAt,e.startAt)&&Am(t.endAt,e.endAt)}function Bu(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n=null,s=[],r=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function c1(t,e,n,s,r,i,o,l){return new Ii(t,e,n,s,r,i,o,l)}function Hh(t){return new Ii(t)}function Sm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Mv(t){return t.collectionGroup!==null}function mo(t){const e=we(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ut(At.comparator);return o.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(l=l.add(u.field))}))})),l})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new xo(i,s))})),n.has(At.keyField().canonicalString())||e.Ie.push(new xo(At.keyField(),s))}return e.Ie}function Fn(t){const e=we(t);return e.Ee||(e.Ee=u1(e,mo(t))),e.Ee}function u1(t,e){if(t.limitType==="F")return bm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const i=r.dir==="desc"?"asc":"desc";return new xo(r.field,i)}));const n=t.endAt?new fl(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new fl(t.startAt.position,t.startAt.inclusive):null;return bm(t.path,t.collectionGroup,e,t.filters,t.limit,n,s)}}function $u(t,e){const n=t.filters.concat([e]);return new Ii(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ju(t,e,n){return new Ii(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yl(t,e){return qh(Fn(t),Fn(e))&&t.limitType===e.limitType}function Lv(t){return`${jh(Fn(t))}|lt:${t.limitType}`}function jr(t){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((r=>Vv(r))).join(", ")}]`),Ql(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((r=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(r))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((r=>li(r))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((r=>li(r))).join(",")),`Target(${s})`})(Fn(t))}; limitType=${t.limitType})`}function Xl(t,e){return e.isFoundDocument()&&(function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):le.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)})(t,e)&&(function(s,r){for(const i of mo(s))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0})(t,e)&&(function(s,r){return!(s.startAt&&!(function(o,l,c){const u=Im(o,l,c);return o.inclusive?u<=0:u<0})(s.startAt,mo(s),r)||s.endAt&&!(function(o,l,c){const u=Im(o,l,c);return o.inclusive?u>=0:u>0})(s.endAt,mo(s),r))})(t,e)}function h1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Fv(t){return(e,n)=>{let s=!1;for(const r of mo(t)){const i=f1(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function f1(t,e,n){const s=t.field.isKeyField()?le.comparator(e.key,n.key):(function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?ai(c,u):me(42886)})(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return me(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Js(this.inner,((n,s)=>{for(const[r,i]of s)e(r,i)}))}isEmpty(){return wv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1=new Ye(le.comparator);function us(){return d1}const Uv=new Ye(le.comparator);function Xi(...t){let e=Uv;for(const n of t)e=e.insert(n.key,n);return e}function Bv(t){let e=Uv;return t.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function dr(){return go()}function $v(){return go()}function go(){return new Pr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const p1=new Ye(le.comparator),m1=new ut(le.comparator);function Pe(...t){let e=m1;for(const n of t)e=e.add(n);return e}const g1=new ut(Ce);function _1(){return g1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cl(e)?"-0":e}}function jv(t){return{integerValue:""+t}}function y1(t,e){return WP(e)?jv(e):Wh(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(){this._=void 0}}function v1(t,e,n){return t instanceof Mo?(function(r,i){const o={fields:{[Av]:{stringValue:Iv},[Sv]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Bh(i)&&(i=Jl(i)),i&&(o.fields[bv]=i),{mapValue:o}})(n,e):t instanceof ci?Hv(t,e):t instanceof ui?Wv(t,e):(function(r,i){const o=qv(r,i),l=Rm(o)+Rm(r.Ae);return Fu(o)&&Fu(r.Ae)?jv(l):Wh(r.serializer,l)})(t,e)}function E1(t,e,n){return t instanceof ci?Hv(t,e):t instanceof ui?Wv(t,e):n}function qv(t,e){return t instanceof dl?(function(s){return Fu(s)||(function(i){return!!i&&"doubleValue"in i})(s)})(e)?e:{integerValue:0}:null}class Mo extends Zl{}class ci extends Zl{constructor(e){super(),this.elements=e}}function Hv(t,e){const n=zv(e);for(const s of t.elements)n.some((r=>qn(r,s)))||n.push(s);return{arrayValue:{values:n}}}class ui extends Zl{constructor(e){super(),this.elements=e}}function Wv(t,e){let n=zv(e);for(const s of t.elements)n=n.filter((r=>!qn(r,s)));return{arrayValue:{values:n}}}class dl extends Zl{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Rm(t){return nt(t.integerValue||t.doubleValue)}function zv(t){return $h(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n){this.field=e,this.transform=n}}function w1(t,e){return t.field.isEqual(e.field)&&(function(s,r){return s instanceof ci&&r instanceof ci||s instanceof ui&&r instanceof ui?oi(s.elements,r.elements,qn):s instanceof dl&&r instanceof dl?qn(s.Ae,r.Ae):s instanceof Mo&&r instanceof Mo})(t.transform,e.transform)}class T1{constructor(e,n){this.version=e,this.transformResults=n}}class hn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $a(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ec{}function Gv(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gh(t.key,hn.none()):new na(t.key,t.data,hn.none());{const n=t.data,s=zt.empty();let r=new ut(At.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Ys(t.key,s,new sn(r.toArray()),hn.none())}}function I1(t,e,n){t instanceof na?(function(r,i,o){const l=r.value.clone(),c=Pm(r.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(t,e,n):t instanceof Ys?(function(r,i,o){if(!$a(r.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Pm(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Kv(r)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):(function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function _o(t,e,n,s){return t instanceof na?(function(i,o,l,c){if(!$a(i.precondition,o))return l;const u=i.value.clone(),h=km(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(t,e,n,s):t instanceof Ys?(function(i,o,l,c){if(!$a(i.precondition,o))return l;const u=km(i.fieldTransforms,c,o),h=o.data;return h.setAll(Kv(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((d=>d.field)))})(t,e,n,s):(function(i,o,l){return $a(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l})(t,e,n)}function A1(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=qv(s.transform,r||null);i!=null&&(n===null&&(n=zt.empty()),n.set(s.field,i))}return n||null}function Cm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&oi(s,r,((i,o)=>w1(i,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class na extends ec{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ys extends ec{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Kv(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}})),e}function Pm(t,e,n){const s=new Map;Me(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,l=e.data.field(i.field);s.set(i.field,E1(o,l,n[r]))}return s}function km(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,v1(i,o,e))}return s}class Gh extends ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class b1 extends ec{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&I1(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=_o(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=_o(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=$v();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(r.key)?null:l;const c=Gv(o,l);c!==null&&s.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ve.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&oi(this.mutations,e.mutations,((n,s)=>Cm(n,s)))&&oi(this.baseMutations,e.baseMutations,((n,s)=>Cm(n,s)))}}class Kh{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){Me(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return p1})();const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Kh(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,ke;function P1(t){switch(t){case H.OK:return me(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return me(15467,{code:t})}}function Qv(t){if(t===void 0)return cs("GRPC error has no .code"),H.UNKNOWN;switch(t){case it.OK:return H.OK;case it.CANCELLED:return H.CANCELLED;case it.UNKNOWN:return H.UNKNOWN;case it.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case it.INTERNAL:return H.INTERNAL;case it.UNAVAILABLE:return H.UNAVAILABLE;case it.UNAUTHENTICATED:return H.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case it.NOT_FOUND:return H.NOT_FOUND;case it.ALREADY_EXISTS:return H.ALREADY_EXISTS;case it.PERMISSION_DENIED:return H.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case it.ABORTED:return H.ABORTED;case it.OUT_OF_RANGE:return H.OUT_OF_RANGE;case it.UNIMPLEMENTED:return H.UNIMPLEMENTED;case it.DATA_LOSS:return H.DATA_LOSS;default:return me(39323,{code:t})}}(ke=it||(it={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=new Ls([4294967295,4294967295],0);function Nm(t){const e=k1().encode(t),n=new uv;return n.update(e),new Uint8Array(n.digest())}function Om(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ls([n,s],0),new Ls([r,i],0)]}class Qh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Zi(`Invalid padding: ${n}`);if(s<0)throw new Zi(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Zi(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Zi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ls.fromNumber(this.ge)}ye(e,n,s){let r=e.add(n.multiply(Ls.fromNumber(s)));return r.compare(N1)===1&&(r=new Ls([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Nm(e),[s,r]=Om(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);if(!this.we(o))return!1}return!0}static create(e,n,s){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Qh(i,r,n);return s.forEach((l=>o.insert(l))),o}insert(e){if(this.ge===0)return;const n=Nm(e),[s,r]=Om(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(s,r,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Zi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,sa.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new tc(ve.min(),r,new Ye(Ce),us(),Pe())}}class sa{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new sa(s,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n,s,r){this.be=e,this.removedTargetIds=n,this.key=s,this.De=r}}class Jv{constructor(e,n){this.targetId=e,this.Ce=n}}class Yv{constructor(e,n,s=bt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class Dm{constructor(){this.ve=0,this.Fe=Vm(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),s=Pe();return this.Fe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:me(38017,{changeType:i})}})),new sa(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Vm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Me(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class O1{constructor(e){this.Ge=e,this.ze=new Map,this.je=us(),this.Je=ba(),this.He=ba(),this.Ye=new Ye(Ce)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:me(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,s=e.Ce.count,r=this.ot(n);if(r){const i=r.target;if(Bu(i))if(s===0){const o=new le(i.path);this.et(n,o,Dt.newNoDocument(o,ve.min()))}else Me(s===1,20013,{expectedCount:s});else{const o=this._t(n);if(o!==s){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:i=0}=n;let o,l;try{o=js(s).toUint8Array()}catch(c){if(c instanceof Tv)return ii("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Qh(o,r,i)}catch(c){return ii(c instanceof Zi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let r=0;return s.forEach((i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((i,o)=>{const l=this.ot(o);if(l){if(i.current&&Bu(l.target)){const c=new le(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Dt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}}));let s=Pe();this.He.forEach(((i,o)=>{let l=!0;o.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(s=s.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const r=new tc(e,n,this.Ye,this.je,s);return this.je=us(),this.Je=ba(),this.He=ba(),this.Ye=new Ye(Ce),r}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Dm,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ut(Ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ut(Ce),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Dm),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ba(){return new Ye(le.comparator)}function Vm(){return new Ye(le.comparator)}const D1={asc:"ASCENDING",desc:"DESCENDING"},V1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x1={and:"AND",or:"OR"};class M1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qu(t,e){return t.useProto3Json||Ql(e)?e:{value:e}}function pl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function L1(t,e){return pl(t,e.toTimestamp())}function Un(t){return Me(!!t,49232),ve.fromTimestamp((function(n){const s=$s(n);return new Ke(s.seconds,s.nanos)})(t))}function Jh(t,e){return Hu(t,e).canonicalString()}function Hu(t,e){const n=(function(r){return new He(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function Zv(t){const e=He.fromString(t);return Me(rE(e),10190,{key:e.toString()}),e}function Wu(t,e){return Jh(t.databaseId,e.path)}function tu(t,e){const n=Zv(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(tE(n))}function eE(t,e){return Jh(t.databaseId,e)}function F1(t){const e=Zv(t);return e.length===4?He.emptyPath():tE(e)}function zu(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tE(t){return Me(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function xm(t,e,n){return{name:Wu(t,e),fields:n.value.mapValue.fields}}function U1(t,e){let n;if("targetChange"in e){e.targetChange;const s=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:me(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=(function(u,h){return u.useProto3Json?(Me(h===void 0||typeof h=="string",58123),bt.fromBase64String(h||"")):(Me(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),bt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&(function(u){const h=u.code===void 0?H.UNKNOWN:Qv(u.code);return new ne(h,u.message||"")})(o);n=new Yv(s,r,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=tu(t,s.document.name),i=Un(s.document.updateTime),o=s.document.createTime?Un(s.document.createTime):ve.min(),l=new zt({mapValue:{fields:s.document.fields}}),c=Dt.newFoundDocument(r,i,o,l),u=s.targetIds||[],h=s.removedTargetIds||[];n=new ja(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=tu(t,s.document),i=s.readTime?Un(s.readTime):ve.min(),o=Dt.newNoDocument(r,i),l=s.removedTargetIds||[];n=new ja([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=tu(t,s.document),i=s.removedTargetIds||[];n=new ja([],i,r,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:i}=s,o=new C1(r,i),l=s.targetId;n=new Jv(l,o)}}return n}function B1(t,e){let n;if(e instanceof na)n={update:xm(t,e.key,e.value)};else if(e instanceof Gh)n={delete:Wu(t,e.key)};else if(e instanceof Ys)n={update:xm(t,e.key,e.data),updateMask:Q1(e.fieldMask)};else{if(!(e instanceof b1))return me(16599,{Vt:e.type});n={verify:Wu(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(i,o){const l=o.transform;if(l instanceof Mo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ci)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ui)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof dl)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw me(20930,{transform:o.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(r,i){return i.updateTime!==void 0?{updateTime:L1(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:me(27497)})(t,e.precondition)),n}function $1(t,e){return t&&t.length>0?(Me(e!==void 0,14353),t.map((n=>(function(r,i){let o=r.updateTime?Un(r.updateTime):Un(i);return o.isEqual(ve.min())&&(o=Un(i)),new T1(o,r.transformResults||[])})(n,e)))):[]}function j1(t,e){return{documents:[eE(t,e.path)]}}function q1(t,e){const n={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=eE(t,r);const i=(function(u){if(u.length!==0)return sE(An.create(u,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const o=(function(u){if(u.length!==0)return u.map((h=>(function(m){return{field:qr(m.field),direction:z1(m.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=qu(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:n,parent:r}}function H1(t){let e=F1(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){Me(s===1,65062);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=(function(d){const m=nE(d);return m instanceof An&&Ov(m)?m.getFilters():[m]})(n.where));let o=[];n.orderBy&&(o=(function(d){return d.map((m=>(function(E){return new xo(Hr(E.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(m)))})(n.orderBy));let l=null;n.limit&&(l=(function(d){let m;return m=typeof d=="object"?d.value:d,Ql(m)?null:m})(n.limit));let c=null;n.startAt&&(c=(function(d){const m=!!d.before,g=d.values||[];return new fl(g,m)})(n.startAt));let u=null;return n.endAt&&(u=(function(d){const m=!d.before,g=d.values||[];return new fl(g,m)})(n.endAt)),c1(e,r,o,i,l,"F",c,u)}function W1(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nE(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Hr(n.unaryFilter.field);return ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=Hr(n.unaryFilter.field);return ot.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Hr(n.unaryFilter.field);return ot.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hr(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(t):t.fieldFilter!==void 0?(function(n){return ot.create(Hr(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return An.create(n.compositeFilter.filters.map((s=>nE(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(n.compositeFilter.op))})(t):me(30097,{filter:t})}function z1(t){return D1[t]}function G1(t){return V1[t]}function K1(t){return x1[t]}function qr(t){return{fieldPath:t.canonicalString()}}function Hr(t){return At.fromServerFormat(t.fieldPath)}function sE(t){return t instanceof ot?(function(n){if(n.op==="=="){if(Tm(n.value))return{unaryFilter:{field:qr(n.field),op:"IS_NAN"}};if(wm(n.value))return{unaryFilter:{field:qr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tm(n.value))return{unaryFilter:{field:qr(n.field),op:"IS_NOT_NAN"}};if(wm(n.value))return{unaryFilter:{field:qr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qr(n.field),op:G1(n.op),value:n.value}}})(t):t instanceof An?(function(n){const s=n.getFilters().map((r=>sE(r)));return s.length===1?s[0]:{compositeFilter:{op:K1(n.op),filters:s}}})(t):me(54877,{filter:t})}function Q1(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function rE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n,s,r,i=ve.min(),o=ve.min(),l=bt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e){this.yt=e}}function Y1(t){const e=H1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ju(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.Cn=new Z1}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Bs.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Bs.min())}updateCollectionGroup(e,n,s){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class Z1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ut(He.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ut(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iE=41943040;class Wt{static withCacheSize(e){return new Wt(e,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(iE,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new hi(0)}static cr(){return new hi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="LruGarbageCollector",ek=1048576;function Fm([t,e],[n,s]){const r=Ce(t,n);return r===0?Ce(e,s):r}class tk{constructor(e){this.Ir=e,this.buffer=new ut(Fm),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Fm(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class nk{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(Lm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ti(n)?re(Lm,"Ignoring IndexedDB error during garbage collection: ",n):await wi(n)}await this.Vr(3e5)}))}}class sk{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(Kl.ce);const s=new tk(n);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(Mm)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Mm):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,r,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((d=>(d>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r)))).next((d=>(s=d,l=Date.now(),this.removeTargets(e,s,n)))).next((d=>(i=d,c=Date.now(),this.removeOrphanedDocuments(e,s)))).next((d=>(u=Date.now(),$r()<=Re.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${r} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:d}))))}}function rk(t,e){return new sk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this.changes=new Pr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?W.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(s!==null&&_o(s.mutation,r,sn.empty(),Ke.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Pe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Pe()){const r=dr();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,s).next((i=>{let o=Xi();return i.forEach(((l,c)=>{o=o.insert(l,c.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const s=dr();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Pe())))}populateOverlays(e,n,s){const r=[];return s.forEach((i=>{n.has(i)||r.push(i)})),this.documentOverlayCache.getOverlays(e,r).next((i=>{i.forEach(((o,l)=>{n.set(o,l)}))}))}computeViews(e,n,s,r){let i=us();const o=go(),l=(function(){return go()})();return n.forEach(((c,u)=>{const h=s.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof Ys)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),_o(h.mutation,u,h.mutation.getFieldMask(),Ke.now())):o.set(u.key,sn.empty())})),this.recalculateAndSaveOverlays(e,i).next((c=>(c.forEach(((u,h)=>o.set(u,h))),n.forEach(((u,h)=>l.set(u,new ok(h,o.get(u)??null)))),l)))}recalculateAndSaveOverlays(e,n){const s=go();let r=new Ye(((o,l)=>o-l)),i=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const l of o)l.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let h=s.get(c)||sn.empty();h=l.applyToLocalView(u,h),s.set(c,h);const d=(r.get(l.batchId)||Pe()).add(c);r=r.insert(l.batchId,d)}))})).next((()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,d=$v();h.forEach((m=>{if(!i.has(m)){const g=Gv(n.get(m),s.get(m));g!==null&&d.set(m,g),i=i.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return W.waitFor(o)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,r){return(function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Mv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,r):this.getDocumentsMatchingCollectionQuery(e,n,s,r)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):W.resolve(dr());let l=No,c=i;return o.next((u=>W.forEach(u,((h,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),i.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next((m=>{c=c.insert(h,m)}))))).next((()=>this.populateOverlays(e,u,i))).next((()=>this.computeViews(e,c,u,Pe()))).next((h=>({batchId:l,changes:Bv(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next((s=>{let r=Xi();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,r){const i=n.collectionGroup;let o=Xi();return this.indexManager.getCollectionParents(e,i).next((l=>W.forEach(l,(c=>{const u=(function(d,m){return new Ii(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,r).next((h=>{h.forEach(((d,m)=>{o=o.insert(d,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,s,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,i,r)))).next((o=>{i.forEach(((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Dt.newInvalidDocument(h)))}));let l=Xi();return o.forEach(((c,u)=>{const h=i.get(c);h!==void 0&&_o(h.mutation,u,sn.empty(),Ke.now()),Xl(n,u)&&(l=l.insert(c,u))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Un(r.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:Y1(r.bundledQuery),readTime:Un(r.readTime)}})(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(){this.overlays=new Ye(le.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const s=dr();return W.forEach(n,(r=>this.getOverlay(e,r).next((i=>{i!==null&&s.set(r,i)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((r,i)=>{this.St(e,n,i)})),W.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(s)),W.resolve()}getOverlaysForCollection(e,n,s){const r=dr(),i=n.length+1,o=new le(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>s&&r.set(c.getKey(),c)}return W.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ye(((u,h)=>u-h));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=dr(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=dr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,h)=>l.set(u,h))),!(l.size()>=r)););return W.resolve(l)}St(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new R1(n,s));let i=this.qr.get(n);i===void 0&&(i=Pe(),this.qr.set(n,i)),this.qr.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this.Qr=new ut(mt.$r),this.Ur=new ut(mt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new mt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new mt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new le(new He([])),s=new mt(n,e),r=new mt(n,e+1),i=[];return this.Ur.forEachInRange([s,r],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new le(new He([])),s=new mt(n,e),r=new mt(n,e+1);let i=Pe();return this.Ur.forEachInRange([s,r],(o=>{i=i.add(o.key)})),i}containsKey(e){const n=new mt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class mt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return le.comparator(e.key,n.key)||Ce(e.Yr,n.Yr)}static Kr(e,n){return Ce(e.Yr,n.Yr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ut(mt.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new S1(i,n,s,r);this.mutationQueue.push(o);for(const l of r)this.Zr=this.Zr.add(new mt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ei(s),i=r<0?0:r;return W.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Uh:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new mt(n,0),r=new mt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([s,r],(o=>{const l=this.Xr(o.Yr);i.push(l)})),W.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ut(Ce);return n.forEach((r=>{const i=new mt(r,0),o=new mt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(l=>{s=s.add(l.Yr)}))})),W.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;le.isDocumentKey(i)||(i=i.child(""));const o=new mt(new le(i),0);let l=new ut(Ce);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(l=l.add(c.Yr)),!0)}),o),W.resolve(this.ti(l))}ti(e){const n=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){Me(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return W.forEach(n.mutations,(r=>{const i=new mt(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new mt(n,0),r=this.Zr.firstAfterOrEqual(s);return W.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.ri=e,this.docs=(function(){return new Ye(le.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return W.resolve(s?s.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let s=us();return n.forEach((r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Dt.newInvalidDocument(r))})),W.resolve(s)}getDocumentsMatchingQuery(e,n,s,r){let i=us();const o=n.path,l=new le(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||$P(BP(h),s)<=0||(r.has(h.key)||Xl(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return W.resolve(i)}getAllFromCollectionGroup(e,n,s,r){me(9500)}ii(e,n){return W.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new dk(this)}getSize(e){return W.resolve(this.size)}}class dk extends ik{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e){this.persistence=e,this.si=new Pr((n=>jh(n)),qh),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new Yh,this.targetCount=0,this.ai=hi.ur()}forEachTarget(e,n){return this.si.forEach(((s,r)=>n(r))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new hi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.si.forEach(((o,l)=>{l.sequenceNumber<=n&&s.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)})),W.waitFor(i).next((()=>r))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return W.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),W.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach((o=>{i.push(r.markPotentiallyOrphaned(e,o))})),W.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return W.resolve(s)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Kl(0),this.li=!1,this.li=!0,this.hi=new uk,this.referenceDelegate=e(this),this.Pi=new pk(this),this.indexManager=new X1,this.remoteDocumentCache=(function(r){return new fk(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new J1(n),this.Ii=new lk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ck,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new hk(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){re("MemoryPersistence","Starting transaction:",e);const r=new mk(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((i=>this.referenceDelegate.di(r).next((()=>i)))).toPromise().then((i=>(r.raiseOnCommittedEvent(),i)))}Ai(e,n){return W.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class mk extends qP{constructor(e){super(),this.currentSequenceNumber=e}}class Xh{constructor(e){this.persistence=e,this.Ri=new Yh,this.Vi=null}static mi(e){return new Xh(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),W.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((i=>this.fi.add(i.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(s=>{const r=le.fromPath(s);return this.gi(e,r).next((i=>{i||n.removeEntry(r,ve.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class ml{constructor(e,n){this.persistence=e,this.pi=new Pr((s=>zP(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=rk(this,n)}static mi(e,n){return new ml(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((r=>s+r))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return W.forEach(this.pi,((s,r)=>this.br(e,s,r).next((i=>i?W.resolve():n(r)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,(o=>this.br(e,o,n).next((l=>{l||(s++,i.removeEntry(o,ve.min()))})))).next((()=>i.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ua(e.data.value)),n}br(e,n,s){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return W.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=r}static As(e,n){let s=Pe(),r=Pe();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Zh(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return KS()?8:HP(Mt())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,r){const i={result:null};return this.ys(e,n).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,n,r,s).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new gk;return this.Ss(e,n,o).next((l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)}))})).next((()=>i.result))}bs(e,n,s,r){return s.documentReadCount<this.fs?($r()<=Re.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",jr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):($r()<=Re.DEBUG&&re("QueryEngine","Query:",jr(n),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?($r()<=Re.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",jr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):W.resolve())}ys(e,n){if(Sm(n))return W.resolve(null);let s=Fn(n);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=ju(n,null,"F"),s=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((i=>{const o=Pe(...i);return this.ps.getDocuments(e,o).next((l=>this.indexManager.getMinOffset(e,s).next((c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,ju(n,null,"F")):this.vs(e,u,n,c)}))))})))))}ws(e,n,s,r){return Sm(n)||r.isEqual(ve.min())?W.resolve(null):this.ps.getDocuments(e,s).next((i=>{const o=this.Ds(n,i);return this.Cs(n,o,s,r)?W.resolve(null):($r()<=Re.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),jr(n)),this.vs(e,o,n,UP(r,No)).next((l=>l)))}))}Ds(e,n){let s=new ut(Fv(e));return n.forEach(((r,i)=>{Xl(e,i)&&(s=s.add(i))})),s}Cs(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,n,s){return $r()<=Re.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",jr(n)),this.ps.getDocumentsMatchingQuery(e,n,Bs.min(),s)}vs(e,n,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((i=>(n.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="LocalStore",yk=3e8;class vk{constructor(e,n,s,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Ye(Ce),this.xs=new Pr((i=>jh(i)),qh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ak(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Ek(t,e,n,s){return new vk(t,e,n,s)}async function aE(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next((i=>(r=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((i=>{const o=[],l=[];let c=Pe();for(const u of r){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(s,c).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:l})))}))}))}function wk(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,u,h){const d=u.batch,m=d.keys();let g=W.resolve();return m.forEach((E=>{g=g.next((()=>h.getEntry(c,E))).next((k=>{const S=u.docVersions.get(E);Me(S!==null,48541),k.version.compareTo(S)<0&&(d.applyToRemoteDocument(k,u),k.isValidDocument()&&(k.setReadTime(u.commitVersion),h.addEntry(k)))}))})),g.next((()=>l.mutationQueue.removeMutationBatch(c,d)))})(n,s,e,i).next((()=>i.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(l){let c=Pe();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(s,r)))}))}function lE(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Tk(t,e){const n=we(t),s=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const l=[];e.targetChanges.forEach(((h,d)=>{const m=r.get(d);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,d).next((()=>n.Pi.addMatchingKeys(i,h.addedDocuments,d))));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(bt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,s)),r=r.insert(d,g),(function(k,S,N){return k.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=yk?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(m,g,h)&&l.push(n.Pi.updateTargetData(i,g))}));let c=us(),u=Pe();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))})),l.push(Ik(i,o,e.documentUpdates).next((h=>{c=h.ks,u=h.qs}))),!s.isEqual(ve.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next((d=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,s)));l.push(h)}return W.waitFor(l).next((()=>o.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,u))).next((()=>c))})).then((i=>(n.Ms=r,i)))}function Ik(t,e,n){let s=Pe(),r=Pe();return n.forEach((i=>s=s.add(i))),e.getEntries(t,s).next((i=>{let o=us();return n.forEach(((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(l)),c.isNoDocument()&&c.version.isEqual(ve.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):re(ef,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)})),{ks:o,qs:r}}))}function Ak(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Uh),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function bk(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return n.Pi.getTargetData(s,e).next((i=>i?(r=i,W.resolve(r)):n.Pi.allocateTargetId(s).next((o=>(r=new Os(e,o,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=n.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function Gu(t,e,n){const s=we(t),r=s.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,(o=>s.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Ti(o))throw o;re(ef,`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function Um(t,e,n){const s=we(t);let r=ve.min(),i=Pe();return s.persistence.runTransaction("Execute query","readwrite",(o=>(function(c,u,h){const d=we(c),m=d.xs.get(h);return m!==void 0?W.resolve(d.Ms.get(m)):d.Pi.getTargetData(u,h)})(s,o,Fn(e)).next((l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(o,l.targetId).next((c=>{i=c}))})).next((()=>s.Fs.getDocumentsMatchingQuery(o,e,n?r:ve.min(),n?i:Pe()))).next((l=>(Sk(s,h1(e),l),{documents:l,Qs:i})))))}function Sk(t,e,n){let s=t.Os.get(e)||ve.min();n.forEach(((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)})),t.Os.set(e,s)}class Bm{constructor(){this.activeTargetIds=_1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rk{constructor(){this.Mo=new Bm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Bm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="ConnectivityMonitor";class jm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re($m,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re($m,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sa=null;function Ku(){return Sa===null?Sa=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sa++,"0x"+Sa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu="RestConnection",Pk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===ul?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,n,s,r,i){const o=Ku(),l=this.zo(e,n.toUriEncodedString());re(nu,`Sending RPC '${e}' ${o}:`,l,s);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,i);const{host:u}=new URL(l),h=_i(u);return this.Jo(e,l,c,s,h).then((d=>(re(nu,`Received RPC '${e}' ${o}: `,d),d)),(d=>{throw ii(nu,`RPC '${e}' ${o} failed with error: `,d,"url: ",l,"request:",s),d}))}Ho(e,n,s,r,i,o){return this.Go(e,n,s,r,i)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ei})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,i)=>e[i]=r)),s&&s.headers.forEach(((r,i)=>e[i]=r))}zo(e,n){const s=Pk[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct="WebChannelConnection";class Ok extends kk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,r,i){const o=Ku();return new Promise(((l,c)=>{const u=new hv;u.setWithCredentials(!0),u.listenOnce(fv.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Fa.NO_ERROR:const d=u.getResponseJson();re(Ct,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),l(d);break;case Fa.TIMEOUT:re(Ct,`RPC '${e}' ${o} timed out`),c(new ne(H.DEADLINE_EXCEEDED,"Request time out"));break;case Fa.HTTP_ERROR:const m=u.getStatus();if(re(Ct,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const E=g==null?void 0:g.error;if(E&&E.status&&E.message){const k=(function(N){const O=N.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(O)>=0?O:H.UNKNOWN})(E.status);c(new ne(k,E.message))}else c(new ne(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ne(H.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{re(Ct,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(r);re(Ct,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",h,s,15)}))}T_(e,n,s){const r=Ku(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mv(),l=pv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,s),c.encodeInitMessageHeaders=!0;const h=i.join("");re(Ct,`Creating RPC '${e}' stream ${r}: ${h}`,c);const d=o.createWebChannel(h,c);this.I_(d);let m=!1,g=!1;const E=new Nk({Yo:S=>{g?re(Ct,`Not sending because RPC '${e}' stream ${r} is closed:`,S):(m||(re(Ct,`Opening RPC '${e}' stream ${r} transport.`),d.open(),m=!0),re(Ct,`RPC '${e}' stream ${r} sending:`,S),d.send(S))},Zo:()=>d.close()}),k=(S,N,O)=>{S.listen(N,(x=>{try{O(x)}catch(F){setTimeout((()=>{throw F}),0)}}))};return k(d,Yi.EventType.OPEN,(()=>{g||(re(Ct,`RPC '${e}' stream ${r} transport opened.`),E.o_())})),k(d,Yi.EventType.CLOSE,(()=>{g||(g=!0,re(Ct,`RPC '${e}' stream ${r} transport closed`),E.a_(),this.E_(d))})),k(d,Yi.EventType.ERROR,(S=>{g||(g=!0,ii(Ct,`RPC '${e}' stream ${r} transport errored. Name:`,S.name,"Message:",S.message),E.a_(new ne(H.UNAVAILABLE,"The operation could not be completed")))})),k(d,Yi.EventType.MESSAGE,(S=>{var N;if(!g){const O=S.data[0];Me(!!O,16349);const x=O,F=(x==null?void 0:x.error)||((N=x[0])==null?void 0:N.error);if(F){re(Ct,`RPC '${e}' stream ${r} received error:`,F);const U=F.status;let B=(function(v){const b=it[v];if(b!==void 0)return Qv(b)})(U),T=F.message;B===void 0&&(B=H.INTERNAL,T="Unknown error status: "+U+" with message "+F.message),g=!0,E.a_(new ne(B,T)),d.close()}else re(Ct,`RPC '${e}' stream ${r} received:`,O),E.u_(O)}})),k(l,dv.STAT_EVENT,(S=>{S.stat===xu.PROXY?re(Ct,`RPC '${e}' stream ${r} detected buffering proxy`):S.stat===xu.NOPROXY&&re(Ct,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function su(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(t){return new M1(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-s);r>0&&re("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="PersistentStream";class uE{constructor(e,n,s,r,i,o,l,c){this.Mi=e,this.S_=s,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(cs(n.toString()),cs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===n&&this.G_(s,r)}),(s=>{e((()=>{const r=new ne(H.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(qm,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(re(qm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Dk extends uE{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=U1(this.serializer,e),s=(function(i){if(!("targetChange"in i))return ve.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ve.min():o.readTime?Un(o.readTime):ve.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=zu(this.serializer),n.addTarget=(function(i,o){let l;const c=o.target;if(l=Bu(c)?{documents:j1(i,c)}:{query:q1(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Xv(i,o.resumeToken);const u=qu(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(ve.min())>0){l.readTime=pl(i,o.snapshotVersion.toTimestamp());const u=qu(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l})(this.serializer,e);const s=W1(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=zu(this.serializer),n.removeTarget=e,this.q_(n)}}class Vk extends uE{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Me(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Me(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=$1(e.writeResults,e.commitTime),s=Un(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=zu(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>B1(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{}class Mk extends xk{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ne(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,Hu(n,s),r,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ne(H.UNKNOWN,i.toString())}))}Ho(e,n,s,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Ho(e,Hu(n,s),r,o,l,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(H.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Lk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(cs(n),this.aa=!1):re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="RemoteStore";class Fk{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{s.enqueueAndForget((async()=>{kr(this)&&(re(br,"Restarting streams for network reachability change."),await(async function(c){const u=we(c);u.Ea.add(4),await ra(u),u.Ra.set("Unknown"),u.Ea.delete(4),await sc(u)})(this))}))})),this.Ra=new Lk(s,r)}}async function sc(t){if(kr(t))for(const e of t.da)await e(!0)}async function ra(t){for(const e of t.da)await e(!1)}function hE(t,e){const n=we(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),rf(n)?sf(n):Ai(n).O_()&&nf(n,e))}function tf(t,e){const n=we(t),s=Ai(n);n.Ia.delete(e),s.O_()&&fE(n,e),n.Ia.size===0&&(s.O_()?s.L_():kr(n)&&n.Ra.set("Unknown"))}function nf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ai(t).Y_(e)}function fE(t,e){t.Va.Ue(e),Ai(t).Z_(e)}function sf(t){t.Va=new O1({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ai(t).start(),t.Ra.ua()}function rf(t){return kr(t)&&!Ai(t).x_()&&t.Ia.size>0}function kr(t){return we(t).Ea.size===0}function dE(t){t.Va=void 0}async function Uk(t){t.Ra.set("Online")}async function Bk(t){t.Ia.forEach(((e,n)=>{nf(t,e)}))}async function $k(t,e){dE(t),rf(t)?(t.Ra.ha(e),sf(t)):t.Ra.set("Unknown")}async function jk(t,e,n){if(t.Ra.set("Online"),e instanceof Yv&&e.state===2&&e.cause)try{await(async function(r,i){const o=i.cause;for(const l of i.targetIds)r.Ia.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.Ia.delete(l),r.Va.removeTarget(l))})(t,e)}catch(s){re(br,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await gl(t,s)}else if(e instanceof ja?t.Va.Ze(e):e instanceof Jv?t.Va.st(e):t.Va.tt(e),!n.isEqual(ve.min()))try{const s=await lE(t.localStore);n.compareTo(s)>=0&&await(function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}})),l.targetMismatches.forEach(((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(bt.EMPTY_BYTE_STRING,h.snapshotVersion)),fE(i,c);const d=new Os(h.target,c,u,h.sequenceNumber);nf(i,d)})),i.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(s){re(br,"Failed to raise snapshot:",s),await gl(t,s)}}async function gl(t,e,n){if(!Ti(e))throw e;t.Ea.add(1),await ra(t),t.Ra.set("Offline"),n||(n=()=>lE(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{re(br,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await sc(t)}))}function pE(t,e){return e().catch((n=>gl(t,n,e)))}async function rc(t){const e=we(t),n=Hs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Uh;for(;qk(e);)try{const r=await Ak(e.localStore,s);if(r===null){e.Ta.length===0&&n.L_();break}s=r.batchId,Hk(e,r)}catch(r){await gl(e,r)}mE(e)&&gE(e)}function qk(t){return kr(t)&&t.Ta.length<10}function Hk(t,e){t.Ta.push(e);const n=Hs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function mE(t){return kr(t)&&!Hs(t).x_()&&t.Ta.length>0}function gE(t){Hs(t).start()}async function Wk(t){Hs(t).ra()}async function zk(t){const e=Hs(t);for(const n of t.Ta)e.ea(n.mutations)}async function Gk(t,e,n){const s=t.Ta.shift(),r=Kh.from(s,e,n);await pE(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await rc(t)}async function Kk(t,e){e&&Hs(t).X_&&await(async function(s,r){if((function(o){return P1(o)&&o!==H.ABORTED})(r.code)){const i=s.Ta.shift();Hs(s).B_(),await pE(s,(()=>s.remoteSyncer.rejectFailedWrite(i.batchId,r))),await rc(s)}})(t,e),mE(t)&&gE(t)}async function Hm(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),re(br,"RemoteStore received new credentials");const s=kr(n);n.Ea.add(3),await ra(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await sc(n)}async function Qk(t,e){const n=we(t);e?(n.Ea.delete(2),await sc(n)):e||(n.Ea.add(2),await ra(n),n.Ra.set("Unknown"))}function Ai(t){return t.ma||(t.ma=(function(n,s,r){const i=we(n);return i.sa(),new Dk(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:Uk.bind(null,t),t_:Bk.bind(null,t),r_:$k.bind(null,t),H_:jk.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),rf(t)?sf(t):t.Ra.set("Unknown")):(await t.ma.stop(),dE(t))}))),t.ma}function Hs(t){return t.fa||(t.fa=(function(n,s,r){const i=we(n);return i.sa(),new Vk(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:Wk.bind(null,t),r_:Kk.bind(null,t),ta:zk.bind(null,t),na:Gk.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await rc(t)):(await t.fa.stop(),t.Ta.length>0&&(re(br,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,l=new of(e,n,o,r,i);return l.start(s),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function af(t,e){if(cs("AsyncQueue",`${e}: ${t}`),Ti(t))return new ne(H.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{static emptySet(e){return new Yr(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||le.comparator(n.key,s.key):(n,s)=>le.comparator(n.key,s.key),this.keyedMap=Xi(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Yr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Yr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(){this.ga=new Ye(le.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class fi{constructor(e,n,s,r,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach((l=>{o.push({type:0,doc:l})})),new fi(e,n,Yr.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Yk{constructor(){this.queries=zm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const r=we(n),i=r.queries;r.queries=zm(),i.forEach(((o,l)=>{for(const c of l.Sa)c.onError(s)}))})(this,new ne(H.ABORTED,"Firestore shutting down"))}}function zm(){return new Pr((t=>Lv(t)),Yl)}async function Xk(t,e){const n=we(t);let s=3;const r=e.query;let i=n.queries.get(r);i?!i.ba()&&e.Da()&&(s=2):(i=new Jk,s=e.Da()?0:1);try{switch(s){case 0:i.wa=await n.onListen(r,!0);break;case 1:i.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=af(o,`Initialization of query '${jr(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&lf(n)}async function Zk(t,e){const n=we(t),s=e.query;let r=3;const i=n.queries.get(s);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?r=e.Da()?0:1:!i.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function eN(t,e){const n=we(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(r)&&(s=!0);o.wa=r}}s&&lf(n)}function tN(t,e,n){const s=we(t),r=s.queries.get(e);if(r)for(const i of r.Sa)i.onError(n);s.queries.delete(e)}function lf(t){t.Ca.forEach((e=>{e.next()}))}var Qu,Gm;(Gm=Qu||(Qu={})).Ma="default",Gm.Cache="cache";class nN{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new fi(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qu.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.key=e}}class yE{constructor(e){this.key=e}}class sN{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pe(),this.mutatedKeys=Pe(),this.eu=Fv(e),this.tu=new Yr(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Wm,r=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((h,d)=>{const m=r.get(h),g=Xl(this.query,d)?d:null,E=!!m&&this.mutatedKeys.has(m.key),k=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let S=!1;m&&g?m.data.isEqual(g.data)?E!==k&&(s.track({type:3,doc:g}),S=!0):this.su(m,g)||(s.track({type:2,doc:g}),S=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!m&&g?(s.track({type:0,doc:g}),S=!0):m&&!g&&(s.track({type:1,doc:m}),S=!0,(c||u)&&(l=!0)),S&&(g?(o=o.add(g),i=k?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{tu:o,iu:s,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,d)=>(function(g,E){const k=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:S})}};return k(g)-k(E)})(h.type,d.type)||this.eu(h.doc,d.doc))),this.ou(s),r=r??!1;const l=n&&!r?this._u():[],c=this.Xa.size===0&&this.current&&!r?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new fi(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Wm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Pe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new yE(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new _E(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return fi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const cf="SyncEngine";class rN{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class iN{constructor(e){this.key=e,this.hu=!1}}class oN{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Pr((l=>Lv(l)),Yl),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(le.comparator),this.Au=new Map,this.Ru=new Yh,this.Vu={},this.mu=new Map,this.fu=hi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aN(t,e,n=!0){const s=AE(t);let r;const i=s.Tu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.lu()):r=await vE(s,e,n,!0),r}async function lN(t,e){const n=AE(t);await vE(n,e,!0,!1)}async function vE(t,e,n,s){const r=await bk(t.localStore,Fn(e)),i=r.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return s&&(l=await cN(t,e,i,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&hE(t.remoteStore,r),l}async function cN(t,e,n,s,r){t.pu=(d,m,g)=>(async function(k,S,N,O){let x=S.view.ru(N);x.Cs&&(x=await Um(k.localStore,S.query,!1).then((({documents:T})=>S.view.ru(T,x))));const F=O&&O.targetChanges.get(S.targetId),U=O&&O.targetMismatches.get(S.targetId)!=null,B=S.view.applyChanges(x,k.isPrimaryClient,F,U);return Qm(k,S.targetId,B.au),B.snapshot})(t,d,m,g);const i=await Um(t.localStore,e,!0),o=new sN(e,i.Qs),l=o.ru(i.documents),c=sa.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(l,t.isPrimaryClient,c);Qm(t,n,u.au);const h=new rN(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function uN(t,e,n){const s=we(t),r=s.Tu.get(e),i=s.Iu.get(r.targetId);if(i.length>1)return s.Iu.set(r.targetId,i.filter((o=>!Yl(o,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await Gu(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),n&&tf(s.remoteStore,r.targetId),Ju(s,r.targetId)})).catch(wi)):(Ju(s,r.targetId),await Gu(s.localStore,r.targetId,!0))}async function hN(t,e){const n=we(t),s=n.Tu.get(e),r=n.Iu.get(s.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),tf(n.remoteStore,s.targetId))}async function fN(t,e,n){const s=vN(t);try{const r=await(function(o,l){const c=we(o),u=Ke.now(),h=l.reduce(((g,E)=>g.add(E.key)),Pe());let d,m;return c.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let E=us(),k=Pe();return c.Ns.getEntries(g,h).next((S=>{E=S,E.forEach(((N,O)=>{O.isValidDocument()||(k=k.add(N))}))})).next((()=>c.localDocuments.getOverlayedDocuments(g,E))).next((S=>{d=S;const N=[];for(const O of l){const x=A1(O,d.get(O.key).overlayedDocument);x!=null&&N.push(new Ys(O.key,x,Pv(x.value.mapValue),hn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,N,l)})).next((S=>{m=S;const N=S.applyToLocalDocumentSet(d,k);return c.documentOverlayCache.saveOverlays(g,S.batchId,N)}))})).then((()=>({batchId:m.batchId,changes:Bv(d)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new Ye(Ce)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u})(s,r.batchId,n),await ia(s,r.changes),await rc(s.remoteStore)}catch(r){const i=af(r,"Failed to persist write");n.reject(i)}}async function EE(t,e){const n=we(t);try{const s=await Tk(n.localStore,e);e.targetChanges.forEach(((r,i)=>{const o=n.Au.get(i);o&&(Me(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?o.hu=!0:r.modifiedDocuments.size>0?Me(o.hu,14607):r.removedDocuments.size>0&&(Me(o.hu,42227),o.hu=!1))})),await ia(n,s,e)}catch(s){await wi(s)}}function Km(t,e,n){const s=we(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.Tu.forEach(((i,o)=>{const l=o.view.va(e);l.snapshot&&r.push(l.snapshot)})),(function(o,l){const c=we(o);c.onlineState=l;let u=!1;c.queries.forEach(((h,d)=>{for(const m of d.Sa)m.va(l)&&(u=!0)})),u&&lf(c)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function dN(t,e,n){const s=we(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.Au.get(e),i=r&&r.key;if(i){let o=new Ye(le.comparator);o=o.insert(i,Dt.newNoDocument(i,ve.min()));const l=Pe().add(i),c=new tc(ve.min(),new Map,new Ye(Ce),o,l);await EE(s,c),s.du=s.du.remove(i),s.Au.delete(e),uf(s)}else await Gu(s.localStore,e,!1).then((()=>Ju(s,e,n))).catch(wi)}async function pN(t,e){const n=we(t),s=e.batch.batchId;try{const r=await wk(n.localStore,e);TE(n,s,null),wE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ia(n,r)}catch(r){await wi(r)}}async function mN(t,e,n){const s=we(t);try{const r=await(function(o,l){const c=we(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next((d=>(Me(d!==null,37113),h=d.keys(),c.mutationQueue.removeMutationBatch(u,d)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>c.localDocuments.getDocuments(u,h)))}))})(s.localStore,e);TE(s,e,n),wE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ia(s,r)}catch(r){await wi(r)}}function wE(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function TE(t,e,n){const s=we(t);let r=s.Vu[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function Ju(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.Iu.get(e))t.Tu.delete(s),n&&t.Pu.yu(s,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((s=>{t.Ru.containsKey(s)||IE(t,s)}))}function IE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(tf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),uf(t))}function Qm(t,e,n){for(const s of n)s instanceof _E?(t.Ru.addReference(s.key,e),gN(t,s)):s instanceof yE?(re(cf,"Document no longer in limbo: "+s.key),t.Ru.removeReference(s.key,e),t.Ru.containsKey(s.key)||IE(t,s.key)):me(19791,{wu:s})}function gN(t,e){const n=e.key,s=n.path.canonicalString();t.du.get(n)||t.Eu.has(s)||(re(cf,"New document in limbo: "+n),t.Eu.add(s),uf(t))}function uf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new le(He.fromString(e)),s=t.fu.next();t.Au.set(s,new iN(n)),t.du=t.du.insert(n,s),hE(t.remoteStore,new Os(Fn(Hh(n.path)),s,"TargetPurposeLimboResolution",Kl.ce))}}async function ia(t,e,n){const s=we(t),r=[],i=[],o=[];s.Tu.isEmpty()||(s.Tu.forEach(((l,c)=>{o.push(s.pu(c,e,n).then((u=>{var h;if((u||n)&&s.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;s.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){r.push(u);const d=Zh.As(c.targetId,u);i.push(d)}})))})),await Promise.all(o),s.Pu.H_(r),await(async function(c,u){const h=we(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(d=>W.forEach(u,(m=>W.forEach(m.Es,(g=>h.persistence.referenceDelegate.addReference(d,m.targetId,g))).next((()=>W.forEach(m.ds,(g=>h.persistence.referenceDelegate.removeReference(d,m.targetId,g)))))))))}catch(d){if(!Ti(d))throw d;re(ef,"Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const g=h.Ms.get(m),E=g.snapshotVersion,k=g.withLastLimboFreeSnapshotVersion(E);h.Ms=h.Ms.insert(m,k)}}})(s.localStore,i))}async function _N(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){re(cf,"User change. New user:",e.toKey());const s=await aE(n.localStore,e);n.currentUser=e,(function(i,o){i.mu.forEach((l=>{l.forEach((c=>{c.reject(new ne(H.CANCELLED,o))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ia(n,s.Ls)}}function yN(t,e){const n=we(t),s=n.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let r=Pe();const i=n.Iu.get(e);if(!i)return r;for(const o of i){const l=n.Tu.get(o);r=r.unionWith(l.view.nu)}return r}}function AE(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=EE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dN.bind(null,e),e.Pu.H_=eN.bind(null,e.eventManager),e.Pu.yu=tN.bind(null,e.eventManager),e}function vN(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mN.bind(null,e),e}class _l{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Ek(this.persistence,new _k,e.initialUser,this.serializer)}Cu(e){return new oE(Xh.mi,this.serializer)}Du(e){return new Rk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_l.provider={build:()=>new _l};class EN extends _l{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Me(this.persistence.referenceDelegate instanceof ml,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new nk(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new oE((s=>ml.mi(s,n)),this.serializer)}}class Yu{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Km(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=_N.bind(null,this.syncEngine),await Qk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Yk})()}createDatastore(e){const n=nc(e.databaseInfo.databaseId),s=(function(i){return new Ok(i)})(e.databaseInfo);return(function(i,o,l,c){return new Mk(i,o,l,c)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,r,i,o,l){return new Fk(s,r,i,o,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>Km(this.syncEngine,n,0)),(function(){return jm.v()?new jm:new Ck})())}createSyncEngine(e,n){return(function(r,i,o,l,c,u,h){const d=new oN(r,i,o,l,c,u);return h&&(d.gu=!0),d})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const i=we(r);re(br,"RemoteStore shutting down."),i.Ea.add(5),await ra(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Yu.provider={build:()=>new Yu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):cs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="FirestoreClient";class TN{constructor(e,n,s,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Nt.UNAUTHENTICATED,this.clientId=Fh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,(async o=>{re(Ws,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(s,(o=>(re(Ws,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=af(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function ru(t,e){t.asyncQueue.verifyOperationInProgress(),re(Ws,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener((async r=>{s.isEqual(r)||(await aE(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Jm(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IN(t);re(Ws,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((s=>Hm(e.remoteStore,s))),t.setAppCheckTokenChangeListener(((s,r)=>Hm(e.remoteStore,r))),t._onlineComponents=e}async function IN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){re(Ws,"Using user provided OfflineComponentProvider");try{await ru(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===H.FAILED_PRECONDITION||r.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),await ru(t,new _l)}}else re(Ws,"Using default OfflineComponentProvider"),await ru(t,new EN(void 0));return t._offlineComponents}async function bE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(re(Ws,"Using user provided OnlineComponentProvider"),await Jm(t,t._uninitializedComponentsProvider._online)):(re(Ws,"Using default OnlineComponentProvider"),await Jm(t,new Yu))),t._onlineComponents}function AN(t){return bE(t).then((e=>e.syncEngine))}async function Ym(t){const e=await bE(t),n=e.eventManager;return n.onListen=aN.bind(null,e.syncEngine),n.onUnlisten=uN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=hN.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="firestore.googleapis.com",Zm=!0;class eg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ne(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RE,this.ssl=Zm}else this.host=e.host,this.ssl=e.ssl??Zm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ek)throw new ne(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ic{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new CP;switch(s.type){case"firstParty":return new OP(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ne(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=Xm.get(n);s&&(re("ComponentProvider","Removing Datastore"),Xm.delete(n),s.terminate())})(this),Promise.resolve()}}function bN(t,e,n,s={}){var u;t=Ln(t,ic);const r=_i(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;r&&(wy(`https://${l}`),Ty("Firestore",!0)),i.host!==RE&&i.host!==l&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:r,emulatorOptions:s};if(!os(c,o)&&(t._setSettings(c),s.mockUserToken)){let h,d;if(typeof s.mockUserToken=="string")h=s.mockUserToken,d=Nt.MOCK_USER;else{h=US(s.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=s.mockUserToken.sub||s.mockUserToken.user_id;if(!m)throw new ne(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Nt(m)}t._authCredentials=new PP(new _v(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Nr(this.firestore,e,this._query)}}class st{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new st(this.firestore,e,this._key)}toJSON(){return{type:st._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(ta(n,st._jsonSchema))return new st(e,s||null,new le(He.fromString(n.referencePath)))}}st._jsonSchemaVersion="firestore/documentReference/1.0",st._jsonSchema={type:at("string",st._jsonSchemaVersion),referencePath:at("string")};class Fs extends Nr{constructor(e,n,s){super(e,n,Hh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new st(this.firestore,null,new le(e))}withConverter(e){return new Fs(this.firestore,e,this._path)}}function tg(t,e,...n){if(t=ht(t),yv("collection","path",e),t instanceof ic){const s=He.fromString(e,...n);return fm(s),new Fs(t,null,s)}{if(!(t instanceof st||t instanceof Fs))throw new ne(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(He.fromString(e,...n));return fm(s),new Fs(t.firestore,null,s)}}function yl(t,e,...n){if(t=ht(t),arguments.length===1&&(e=Fh.newId()),yv("doc","path",e),t instanceof ic){const s=He.fromString(e,...n);return hm(s),new st(t,null,new le(s))}{if(!(t instanceof st||t instanceof Fs))throw new ne(H.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(He.fromString(e,...n));return hm(s),new st(t.firestore,t instanceof Fs?t.converter:null,new le(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="AsyncQueue";class sg{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cE(this,"async_queue_retry"),this._c=()=>{const s=su();s&&re(ng,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=su();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=su();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new yr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ti(e))throw e;re(ng,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,cs("INTERNAL UNHANDLED ERROR: ",rg(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=of.createAndSchedule(this,e,n,s,(i=>this.hc(i)));return this.tc.push(r),r}uc(){this.nc&&me(47125,{Pc:rg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function rg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t){return(function(n,s){if(typeof n!="object"||n===null)return!1;const r=n;for(const i of s)if(i in r&&typeof r[i]=="function")return!0;return!1})(t,["next","error","complete"])}class Sr extends ic{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new sg,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sg(e),this._firestoreClient=void 0,await e}}}function SN(t,e){const n=typeof t=="object"?t:Sy(),s=typeof t=="string"?t:ul,r=Sh(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=LS("firestore");i&&bN(r,...i)}return r}function CE(t){if(t._terminated)throw new ne(H.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RN(t),t._firestoreClient}function RN(t){var s,r,i;const e=t._freezeSettings(),n=(function(l,c,u,h){return new QP(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,SE(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((s=t._app)==null?void 0:s.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new TN(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ln(bt.fromBase64String(e))}catch(n){throw new ne(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ln(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ta(e,ln._jsonSchema))return ln.fromBase64String(e.bytes)}}ln._jsonSchemaVersion="firestore/bytes/1.0",ln._jsonSchema={type:at("string",ln._jsonSchemaVersion),bytes:at("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bn._jsonSchemaVersion}}static fromJSON(e){if(ta(e,Bn._jsonSchema))return new Bn(e.latitude,e.longitude)}}Bn._jsonSchemaVersion="firestore/geoPoint/1.0",Bn._jsonSchema={type:at("string",Bn._jsonSchemaVersion),latitude:at("number"),longitude:at("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==r[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ta(e,$n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new $n(e.vectorValues);throw new ne(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$n._jsonSchemaVersion="firestore/vectorValue/1.0",$n._jsonSchema={type:at("string",$n._jsonSchemaVersion),vectorValues:at("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=/^__.*__$/;class PN{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ys(e,this.data,this.fieldMask,n,this.fieldTransforms):new na(e,this.data,n,this.fieldTransforms)}}class PE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ys(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function kE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:t})}}class ac{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=r,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ac({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kE(this.Ac)&&CN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class kN{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||nc(e)}Cc(e,n,s,r=!1){return new ac({Ac:e,methodName:n,Dc:s,path:At.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lc(t){const e=t._freezeSettings(),n=nc(t._databaseId);return new kN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function NE(t,e,n,s,r,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,r);pf("Data must be an object, but it was:",o,s);const l=DE(s,o);let c,u;if(i.merge)c=new sn(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const m=Xu(e,d,n);if(!o.contains(m))throw new ne(H.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);xE(h,m)||h.push(m)}c=new sn(h),u=o.fieldTransforms.filter((d=>c.covers(d.field)))}else c=null,u=o.fieldTransforms;return new PN(new zt(l),c,u)}class cc extends bi{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cc}}function OE(t,e,n){return new ac({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hf extends bi{_toFieldTransform(e){return new zh(e.path,new Mo)}isEqual(e){return e instanceof hf}}class ff extends bi{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=OE(this,e,!0),s=this.vc.map((i=>Or(i,n))),r=new ci(s);return new zh(e.path,r)}isEqual(e){return e instanceof ff&&os(this.vc,e.vc)}}class df extends bi{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=OE(this,e,!0),s=this.vc.map((i=>Or(i,n))),r=new ui(s);return new zh(e.path,r)}isEqual(e){return e instanceof df&&os(this.vc,e.vc)}}function NN(t,e,n,s){const r=t.Cc(1,e,n);pf("Data must be an object, but it was:",r,s);const i=[],o=zt.empty();Js(s,((c,u)=>{const h=mf(e,c,n);u=ht(u);const d=r.yc(h);if(u instanceof cc)i.push(h);else{const m=Or(u,d);m!=null&&(i.push(h),o.set(h,m))}}));const l=new sn(i);return new PE(o,l,r.fieldTransforms)}function ON(t,e,n,s,r,i){const o=t.Cc(1,e,n),l=[Xu(e,s,n)],c=[r];if(i.length%2!=0)throw new ne(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Xu(e,i[m])),c.push(i[m+1]);const u=[],h=zt.empty();for(let m=l.length-1;m>=0;--m)if(!xE(u,l[m])){const g=l[m];let E=c[m];E=ht(E);const k=o.yc(g);if(E instanceof cc)u.push(g);else{const S=Or(E,k);S!=null&&(u.push(g),h.set(g,S))}}const d=new sn(u);return new PE(h,d,o.fieldTransforms)}function DN(t,e,n,s=!1){return Or(n,t.Cc(s?4:3,e))}function Or(t,e){if(VE(t=ht(t)))return pf("Unsupported field value:",e,t),DE(t,e);if(t instanceof bi)return(function(s,r){if(!kE(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const i=[];let o=0;for(const l of s){let c=Or(l,r.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}})(t,e)}return(function(s,r){if((s=ht(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return y1(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ke.fromDate(s);return{timestampValue:pl(r.serializer,i)}}if(s instanceof Ke){const i=new Ke(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:pl(r.serializer,i)}}if(s instanceof Bn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ln)return{bytesValue:Xv(r.serializer,s._byteString)};if(s instanceof st){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Jh(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof $n)return(function(o,l){return{mapValue:{fields:{[Rv]:{stringValue:Cv},[hl]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Wh(l.serializer,u)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${Gl(s)}`)})(t,e)}function DE(t,e){const n={};return wv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Js(t,((s,r)=>{const i=Or(r,e.mc(s));i!=null&&(n[s]=i)})),{mapValue:{fields:n}}}function VE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Bn||t instanceof ln||t instanceof st||t instanceof bi||t instanceof $n)}function pf(t,e,n){if(!VE(n)||!vv(n)){const s=Gl(n);throw s==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+s)}}function Xu(t,e,n){if((e=ht(e))instanceof oc)return e._internalPath;if(typeof e=="string")return mf(t,e);throw vl("Field path arguments must be of type string or ",t,!1,void 0,n)}const VN=new RegExp("[~\\*/\\[\\]]");function mf(t,e,n){if(e.search(VN)>=0)throw vl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new oc(...e.split("."))._internalPath}catch{throw vl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vl(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${s}`),o&&(c+=` in document ${r}`),c+=")"),new ne(H.INVALID_ARGUMENT,l+t+c)}function xE(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new st(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xN extends ME{data(){return super.data()}}function gf(t,e){return typeof e=="string"?mf(t,e):e instanceof oc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _f{}class LE extends _f{}function LN(t,e,...n){let s=[];e instanceof _f&&s.push(e),s=s.concat(n),(function(i){const o=i.filter((c=>c instanceof vf)).length,l=i.filter((c=>c instanceof yf)).length;if(o>1||o>0&&l>0)throw new ne(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)t=r._apply(t);return t}class yf extends LE{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new yf(e,n,s)}_apply(e){const n=this._parse(e);return FE(e._query,n),new Nr(e.firestore,e.converter,$u(e._query,n))}_parse(e){const n=lc(e.firestore);return(function(i,o,l,c,u,h,d){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ne(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ag(d,h);const E=[];for(const k of d)E.push(og(c,i,k));m={arrayValue:{values:E}}}else m=og(c,i,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ag(d,h),m=DN(l,o,d,h==="in"||h==="not-in");return ot.create(u,h,m)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class vf extends _f{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vf(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:An.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,i){let o=r;const l=i.getFlattenedFilters();for(const c of l)FE(o,c),o=$u(o,c)})(e._query,n),new Nr(e.firestore,e.converter,$u(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ef extends LE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ef(e,n)}_apply(e){const n=(function(r,i,o){if(r.startAt!==null)throw new ne(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ne(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xo(i,o)})(e._query,this._field,this._direction);return new Nr(e.firestore,e.converter,(function(r,i){const o=r.explicitOrderBy.concat([i]);return new Ii(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,n))}}function FN(t,e="asc"){const n=e,s=gf("orderBy",t);return Ef._create(s,n)}function og(t,e,n){if(typeof(n=ht(n))=="string"){if(n==="")throw new ne(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mv(e)&&n.indexOf("/")!==-1)throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(He.fromString(n));if(!le.isDocumentKey(s))throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Em(t,new le(s))}if(n instanceof st)return Em(t,n._key);throw new ne(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gl(n)}.`)}function ag(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FE(t,e){const n=(function(r,i){for(const o of r)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ne(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UN{convertValue(e,n="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Js(e,((r,i)=>{s[r]=this.convertValue(i,n)})),s}convertVectorValue(e){var s,r,i;const n=(i=(r=(s=e.fields)==null?void 0:s[hl].arrayValue)==null?void 0:r.values)==null?void 0:i.map((o=>nt(o.doubleValue)));return new $n(n)}convertGeoPoint(e){return new Bn(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Jl(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Oo(e));default:return null}}convertTimestamp(e){const n=$s(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=He.fromString(e);Me(rE(s),9688,{name:e});const r=new Do(s.get(1),s.get(3)),i=new le(s.popFirst(5));return r.isEqual(n)||cs(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(t,e,n){let s;return s=t?t.toFirestore(e):e,s}class eo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vr extends ME{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(gf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vr._jsonSchemaVersion="firestore/documentSnapshot/1.0",vr._jsonSchema={type:at("string",vr._jsonSchemaVersion),bundleSource:at("string","DocumentSnapshot"),bundleName:at("string"),bundle:at("string")};class qa extends vr{data(e={}){return super.data(e)}}class Xr{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new eo(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new qa(this._firestore,this._userDataWriter,s.key,s,new eo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map((l=>{const c=new qa(r._firestore,r._userDataWriter,l.doc.key,l.doc,new eo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new qa(r._firestore,r._userDataWriter,l.doc.key,l.doc,new eo(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:BN(l.type),doc:c,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ne(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Fh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],r=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),s.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),r.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function BN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:t})}}Xr._jsonSchemaVersion="firestore/querySnapshot/1.0",Xr._jsonSchema={type:at("string",Xr._jsonSchemaVersion),bundleSource:at("string","QuerySnapshot"),bundleName:at("string"),bundle:at("string")};class BE extends UN{constructor(e){super(),this.firestore=e}convertBytes(e){return new ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new st(this.firestore,null,n)}}function $N(t,e,n){t=Ln(t,st);const s=Ln(t.firestore,Sr),r=UE(t.converter,e);return uc(s,[NE(lc(s),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,hn.none())])}function lg(t,e,n,...s){t=Ln(t,st);const r=Ln(t.firestore,Sr),i=lc(r);let o;return o=typeof(e=ht(e))=="string"||e instanceof oc?ON(i,"updateDoc",t._key,e,n,s):NN(i,"updateDoc",t._key,e),uc(r,[o.toMutation(t._key,hn.exists(!0))])}function jN(t){return uc(Ln(t.firestore,Sr),[new Gh(t._key,hn.none())])}function qN(t,e){const n=Ln(t.firestore,Sr),s=yl(t),r=UE(t.converter,e);return uc(n,[NE(lc(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,hn.exists(!1))]).then((()=>s))}function $E(t,...e){var c,u,h;t=ht(t);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||ig(e[s])||(n=e[s++]);const r={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(ig(e[s])){const d=e[s];e[s]=(c=d.next)==null?void 0:c.bind(d),e[s+1]=(u=d.error)==null?void 0:u.bind(d),e[s+2]=(h=d.complete)==null?void 0:h.bind(d)}let i,o,l;if(t instanceof st)o=Ln(t.firestore,Sr),l=Hh(t._key.path),i={next:d=>{e[s]&&e[s](HN(o,t,d))},error:e[s+1],complete:e[s+2]};else{const d=Ln(t,Nr);o=Ln(d.firestore,Sr),l=d._query;const m=new BE(o);i={next:g=>{e[s]&&e[s](new Xr(o,m,d,g))},error:e[s+1],complete:e[s+2]},MN(t._query)}return(function(m,g,E,k){const S=new wN(k),N=new nN(g,S,E);return m.asyncQueue.enqueueAndForget((async()=>Xk(await Ym(m),N))),()=>{S.Nu(),m.asyncQueue.enqueueAndForget((async()=>Zk(await Ym(m),N)))}})(CE(o),l,r,i)}function uc(t,e){return(function(s,r){const i=new yr;return s.asyncQueue.enqueueAndForget((async()=>fN(await AN(s),r,i))),i.promise})(CE(t),e)}function HN(t,e,n){const s=n.docs.get(e._key),r=new BE(t);return new vr(t,r,e._key,s,new eo(n.hasPendingWrites,n.fromCache),e.converter)}function WN(){return new hf("serverTimestamp")}function zN(...t){return new ff("arrayUnion",t)}function GN(...t){return new df("arrayRemove",t)}(function(e,n=!0){(function(r){Ei=r})(yi),ri(new wr("firestore",((s,{instanceIdentifier:r,options:i})=>{const o=s.getProvider("app").getImmediate(),l=new Sr(new kP(s.getProvider("auth-internal")),new DP(o,s.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ne(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Do(u.options.projectId,h)})(o,r),o);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Ms(am,lm,e),Ms(am,lm,"esm2020")})();const KN={apiKey:"AIzaSyCMRPD1unHZ_nVaA5rSLmbvbfaLdRBLKCY",authDomain:"term-project-web-app.firebaseapp.com",projectId:"term-project-web-app",storageBucket:"term-project-web-app.firebasestorage.app",messagingSenderId:"676001090912",appId:"1:676001090912:web:d0c7c947c4e9b9b9186205",measurementId:"G-XG33C395Y0"},jE=by(KN),zi=cv(jE),QN=new Xn,yo=SN(jE),Hn=zI("movie",()=>{const t=X(null),e=X([]),n=X([]),s=X([]),r=X("ko-KR"),i=X("dark"),o=X("table"),l=X("/"),c=X(!1),u=X([]),h=X("normal"),d=X("normal"),m=X(!1),g=X(!1),E=X(!1),k=X(!0),S=X("date"),N=X(!0),O=X(!1),x=X(""),F=()=>{const J=document.body.classList;i.value==="light"?(J.add("light-mode"),J.remove("dark-mode")):(J.add("dark-mode"),J.remove("light-mode")),d.value==="large"?J.add("font-large"):J.remove("font-large"),m.value?J.add("reduced-motion"):J.remove("reduced-motion"),h.value==="large"?J.add("grid-large"):J.remove("grid-large"),k.value?J.remove("no-hover"):J.add("no-hover")},U=()=>{i.value=localStorage.getItem("app-theme")||"dark",r.value=localStorage.getItem("app-lang")||"ko-KR",F(),g0(zi,J=>{J?(console.log(" :",J.email),t.value=J,B(J.uid)):(t.value=null,e.value=[])})},B=J=>{const I=yl(yo,"users",J);$E(I,C=>{if(C.exists()){const D=C.data();e.value=D.wishlist||[],n.value=D.searchHistory||[]}else $N(I,{wishlist:[],searchHistory:[],createdAt:new Date})})};return{user:t,wishlist:e,searchHistory:n,watchHistory:s,apiKey:x,theme:i,language:r,viewMode:o,lastPath:l,wishlistSort:S,includeAdult:c,autoplay:N,lowDataMode:O,gridSize:h,fontSize:d,reducedMotion:m,hideHorror:g,showYear:E,enableHover:k,initializeStore:U,loginWithGoogle:async()=>{await M0(zi,QN)},registerWithEmail:async(J,I)=>{await f0(zi,J,I)},loginWithEmail:async(J,I)=>{await d0(zi,J,I)},logout:async()=>{await Yy(zi),t.value=null,localStorage.removeItem("last-path"),window.location.reload()},toggleLike:async J=>{if(!t.value)return alert(" .");const I=yl(yo,"users",t.value.uid),C=e.value.some(D=>D.id===J.id);try{C?await lg(I,{wishlist:GN(J)}):await lg(I,{wishlist:zN(J)})}catch(D){console.error(D),alert(" ")}},isLiked:J=>e.value.some(I=>I.id===J),setLanguage:J=>{r.value=J,localStorage.setItem("app-lang",J),window.location.reload()},toggleTheme:()=>{i.value=i.value==="dark"?"light":"dark",localStorage.setItem("app-theme",i.value),F()},saveLastPath:J=>{J!=="/signin"&&(l.value=J,localStorage.setItem("last-path",J))},toggleAdult:()=>{c.value=!c.value,localStorage.setItem("include-adult",String(c.value)),window.location.reload()},toggleAutoplay:()=>{N.value=!N.value,localStorage.setItem("autoplay",String(N.value))},toggleLowData:()=>{O.value=!O.value,localStorage.setItem("low-data-mode",String(O.value))},toggleGridSize:()=>{h.value=h.value==="normal"?"large":"normal",localStorage.setItem("grid-size",h.value),F()},toggleFontSize:()=>{d.value=d.value==="normal"?"large":"normal",localStorage.setItem("font-size",d.value),F()},toggleMotion:()=>{m.value=!m.value,localStorage.setItem("reduced-motion",String(m.value)),F()},toggleHorror:()=>{g.value=!g.value,localStorage.setItem("content-filter",String(g.value))},toggleShowYear:()=>{E.value=!E.value,localStorage.setItem("show-year",String(E.value))},toggleHover:()=>{k.value=!k.value,localStorage.setItem("enable-hover",String(k.value)),F()},setWishlistSort:J=>{S.value=J,localStorage.setItem("wishlist-sort",J)},fetchGenres:async()=>{if(u.value.length>0)return u.value;try{const J=await qt.get("/genre/movie/list");return u.value=J.data.genres,u.value}catch{return[]}},addSearchHistory:J=>{J.trim()&&(n.value=n.value.filter(I=>I!==J),n.value.unshift(J),n.value.length>10&&n.value.pop())},removeSearchHistory:J=>{n.value=n.value.filter(I=>I!==J)},addToHistory:J=>{const I=s.value.findIndex(C=>C.id===J.id);I!==-1&&s.value.splice(I,1),s.value.unshift(J),s.value.length>20&&s.value.pop()},setViewMode:J=>{o.value=J,localStorage.setItem("view-mode",J)}}}),mn=(t,e)=>{const n=t.__vccOpts||t;for(const[s,r]of e)n[s]=r;return n},JN={},YN={class:"app-footer"},XN={class:"footer-content"},ZN={class:"copyright"};function eO(t,e){return oe(),de("footer",YN,[w("div",XN,[e[0]||(e[0]=w("p",{class:"warning-text"},[De("  "),w("strong",null,"Disclaimer")],-1)),e[1]||(e[1]=w("p",null,[De(" This is a personal project for educational purposes only. Not an official service."),w("br"),De("       ,   . ")],-1)),w("p",ZN,"  "+Qe(new Date().getFullYear())+" YJY Project. All rights reserved. ",1)])])}const tO=mn(JN,[["render",eO],["__scopeId","data-v-18271bdf"]]),nO=on({__name:"App",setup(t){const e=Hn(),n=Ll();return pn(()=>{e.initializeStore(),e.apiKey&&e.lastPath&&e.lastPath!=="/"&&e.lastPath!=="/signin"&&n.push(e.lastPath)}),n.afterEach(s=>{s.path!=="/signin"&&e.saveLastPath(s.path)}),(s,r)=>{const i=Zg("router-view");return oe(),de(et,null,[be(i,null,{default:kt(({Component:o})=>[be(Ho,{name:"page-fade",mode:"out-in"},{default:kt(()=>[(oe(),un(_T(o)))]),_:2},1024)]),_:1}),be(tO)],64)}}}),Zu="/assets/yjy-bdKk8TYR.png",sO={class:"settings-modal"},rO={class:"modal-header"},iO={class:"scroll-area"},oO={class:"setting-item"},aO={class:"setting-item"},lO={class:"setting-item"},cO={class:"setting-item"},uO={class:"setting-item"},hO={class:"setting-item"},fO={class:"setting-item"},dO={class:"setting-item"},pO={class:"setting-item"},mO={class:"setting-item"},gO=["value"],_O=on({__name:"SettingsModal",emits:["close"],setup(t){const e=Hn(),{lowDataMode:n,autoplay:s,includeAdult:r,wishlistSort:i,fontSize:o,gridSize:l,reducedMotion:c,hideHorror:u,showYear:h,enableHover:d}=pi(e);return(m,g)=>(oe(),de("div",{class:"modal-overlay",onClick:g[11]||(g[11]=xn(E=>m.$emit("close"),["self"]))},[w("div",sO,[w("div",rO,[g[13]||(g[13]=w("h3",null," (Settings)",-1)),w("button",{class:"close-btn",onClick:g[0]||(g[0]=E=>m.$emit("close"))},[...g[12]||(g[12]=[w("i",{class:"fas fa-times"},null,-1)])])]),w("div",iO,[g[34]||(g[34]=w("h4",null,"  ",-1)),w("div",oO,[g[15]||(g[15]=w("div",{class:"info"},[w("span",{class:"label"},"  "),w("span",{class:"desc"},"  .")],-1)),w("div",{class:qe(["toggle",{active:ie(o)==="large"}]),onClick:g[1]||(g[1]=(...E)=>ie(e).toggleFontSize&&ie(e).toggleFontSize(...E))},[...g[14]||(g[14]=[w("div",{class:"circle"},null,-1)])],2)]),w("div",aO,[g[17]||(g[17]=w("div",{class:"info"},[w("span",{class:"label"},"  "),w("span",{class:"desc"},"   (3).")],-1)),w("div",{class:qe(["toggle",{active:ie(l)==="large"}]),onClick:g[2]||(g[2]=(...E)=>ie(e).toggleGridSize&&ie(e).toggleGridSize(...E))},[...g[16]||(g[16]=[w("div",{class:"circle"},null,-1)])],2)]),w("div",lO,[g[19]||(g[19]=w("div",{class:"info"},[w("span",{class:"label"}," "),w("span",{class:"desc"},"   .")],-1)),w("div",{class:qe(["toggle",{active:ie(c)}]),onClick:g[3]||(g[3]=(...E)=>ie(e).toggleMotion&&ie(e).toggleMotion(...E))},[...g[18]||(g[18]=[w("div",{class:"circle"},null,-1)])],2)]),w("div",cO,[g[21]||(g[21]=w("div",{class:"info"},[w("span",{class:"label"},"  "),w("span",{class:"desc"},"    .")],-1)),w("div",{class:qe(["toggle",{active:ie(d)}]),onClick:g[4]||(g[4]=(...E)=>ie(e).toggleHover&&ie(e).toggleHover(...E))},[...g[20]||(g[20]=[w("div",{class:"circle"},null,-1)])],2)]),w("div",uO,[g[23]||(g[23]=w("div",{class:"info"},[w("span",{class:"label"}," "),w("span",{class:"desc"},"   .")],-1)),w("div",{class:qe(["toggle",{active:ie(h)}]),onClick:g[5]||(g[5]=(...E)=>ie(e).toggleShowYear&&ie(e).toggleShowYear(...E))},[...g[22]||(g[22]=[w("div",{class:"circle"},null,-1)])],2)]),g[35]||(g[35]=w("h4",null,"  ",-1)),w("div",hO,[g[25]||(g[25]=w("div",{class:"info"},[w("span",{class:"label"}," "),w("span",{class:"desc"},"  .")],-1)),w("div",{class:qe(["toggle",{active:ie(n)}]),onClick:g[6]||(g[6]=(...E)=>ie(e).toggleLowData&&ie(e).toggleLowData(...E))},[...g[24]||(g[24]=[w("div",{class:"circle"},null,-1)])],2)]),w("div",fO,[g[27]||(g[27]=w("div",{class:"info"},[w("span",{class:"label"},"   "),w("span",{class:"desc"},"  .")],-1)),w("div",{class:qe(["toggle",{active:ie(s)}]),onClick:g[7]||(g[7]=(...E)=>ie(e).toggleAutoplay&&ie(e).toggleAutoplay(...E))},[...g[26]||(g[26]=[w("div",{class:"circle"},null,-1)])],2)]),g[36]||(g[36]=w("h4",null," ",-1)),w("div",dO,[g[29]||(g[29]=w("div",{class:"info"},[w("span",{class:"label"},"  "),w("span",{class:"desc"},"   ().")],-1)),w("div",{class:qe(["toggle",{active:ie(r)}]),onClick:g[8]||(g[8]=(...E)=>ie(e).toggleAdult&&ie(e).toggleAdult(...E))},[...g[28]||(g[28]=[w("div",{class:"circle"},null,-1)])],2)]),w("div",pO,[g[31]||(g[31]=w("div",{class:"info"},[w("span",{class:"label"}," "),w("span",{class:"desc"},"  .")],-1)),w("div",{class:qe(["toggle",{active:ie(u)}]),onClick:g[9]||(g[9]=(...E)=>ie(e).toggleHorror&&ie(e).toggleHorror(...E))},[...g[30]||(g[30]=[w("div",{class:"circle"},null,-1)])],2)]),g[37]||(g[37]=w("h4",null,"",-1)),w("div",mO,[g[33]||(g[33]=w("div",{class:"info"},[w("span",{class:"label"},"  ")],-1)),w("select",{value:ie(i),onChange:g[10]||(g[10]=E=>ie(e).setWishlistSort(E.target.value))},[...g[32]||(g[32]=[w("option",{value:"date"}," ",-1),w("option",{value:"alpha"},"",-1)])],40,gO)])])])]))}}),yO=mn(_O,[["__scopeId","data-v-4ec40910"]]),vO={class:"nav-left"},EO={class:"links"},wO={class:"nav-right"},TO={class:"pc-actions"},IO={class:"profile-menu"},AO={class:"dropdown"},bO={class:"user-info"},SO={class:"mobile-actions-menu"},RO={class:"menu-item"},CO={class:"mobile-header"},PO={class:"mobile-user"},kO={class:"mobile-links"},NO=on({__name:"Navbar",setup(t){const e=Hn(),{email:n,theme:s,language:r}=pi(e),i=X(!1),o=X(!1),l=X(!1),c=X(!1),u=X(!1),h=X(""),d=X(null),m=X(null),g=Ll(),E=H_(),k=()=>i.value=window.scrollY>50,S=T=>{l.value&&m.value&&!m.value.contains(T.target)&&(l.value=!1)},N=async()=>{try{const T=cv();await Yy(T),e.logout(),localStorage.removeItem("user"),g.replace("/signin")}catch(T){console.error("Logout Failed:",T),e.logout(),g.replace("/signin")}},O=()=>{E.path==="/"?window.scrollTo({top:0,behavior:"smooth"}):g.push("/")},x=()=>{e.setLanguage(r.value)},F=()=>{l.value=!l.value,l.value&&Rr(()=>{var T;return(T=d.value)==null?void 0:T.focus()})},U=()=>{h.value.trim()&&g.push({path:"/search",query:{q:h.value}})},B=()=>{u.value=!u.value};return pn(()=>{window.addEventListener("scroll",k),window.addEventListener("click",S)}),Cr(()=>{window.removeEventListener("scroll",k),window.removeEventListener("click",S)}),(T,_)=>{const v=Zg("router-link");return oe(),de("nav",{class:qe(["navbar",{"black-nav":i.value,"hover-nav":o.value}]),onMouseenter:_[14]||(_[14]=b=>o.value=!0),onMouseleave:_[15]||(_[15]=b=>o.value=!1)},[w("div",vO,[w("i",{class:"fas fa-bars mobile-menu-btn",onClick:B}),w("a",{class:"logo-link pc-logo",onClick:xn(O,["prevent"])},[..._[16]||(_[16]=[w("img",{src:Zu,alt:"YJY PROJECT",class:"logo-img"},null,-1)])]),w("div",EO,[be(v,{to:"/"},{default:kt(()=>[..._[17]||(_[17]=[De("",-1)])]),_:1}),be(v,{to:"/popular"},{default:kt(()=>[..._[18]||(_[18]=[De(" ",-1)])]),_:1}),be(v,{to:"/wishlist"},{default:kt(()=>[..._[19]||(_[19]=[De("  ",-1)])]),_:1}),be(v,{to:"/search"},{default:kt(()=>[..._[20]||(_[20]=[De("",-1)])]),_:1})])]),w("a",{class:"logo-link mobile-logo",onClick:xn(O,["prevent"])},[..._[21]||(_[21]=[w("img",{src:Zu,alt:"YJY PROJECT",class:"logo-img"},null,-1)])]),w("div",wO,[w("div",{ref_key:"searchContainer",ref:m,class:qe(["search-box",{active:l.value,"light-theme-box":ie(s)==="light"}])},[w("i",{class:"fas fa-search icon",onClick:F}),l.value?Tt((oe(),de("input",{key:0,ref_key:"searchInput",ref:d,"onUpdate:modelValue":_[0]||(_[0]=b=>h.value=b),onKeyup:_h(U,["enter"]),placeholder:""},null,544)),[[Cs,h.value]]):It("",!0)],2),w("div",TO,[w("i",{class:qe(["fas icon theme-btn",ie(s)==="dark"?"fa-sun":"fa-moon"]),onClick:_[1]||(_[1]=(...b)=>ie(e).toggleTheme&&ie(e).toggleTheme(...b)),title:" "},null,2),Tt(w("select",{"onUpdate:modelValue":_[2]||(_[2]=b=>We(r)?r.value=b:null),onChange:x,class:qe(["nav-lang-selector",{"light-theme-select":ie(s)==="light"}])},[..._[22]||(_[22]=[w("option",{value:"ko-KR"},"KR",-1),w("option",{value:"en-US"},"EN",-1)])],34),[[lo,ie(r)]]),w("i",{class:"fas fa-cog icon setting-btn",onClick:_[3]||(_[3]=b=>c.value=!0),title:""})]),w("div",IO,[_[29]||(_[29]=w("div",{class:"profile-icon"},[w("img",{src:"https://upload.wikimedia.org/wikipedia/commons/0/0b/Netflix-avatar.png",alt:"User"})],-1)),_[30]||(_[30]=w("i",{class:"fas fa-caret-down dropdown-arrow"},null,-1)),w("div",AO,[w("div",{class:qe(["dropdown-content",{"light-mobile":ie(s)==="light"}])},[w("span",bO,Qe(ie(n)||"Guest")+"",1),_[28]||(_[28]=w("hr",null,null,-1)),w("div",SO,[w("div",{class:"menu-item",onClick:_[4]||(_[4]=(...b)=>ie(e).toggleTheme&&ie(e).toggleTheme(...b))},[w("i",{class:qe(["fas",ie(s)==="dark"?"fa-sun":"fa-moon"])},null,2),w("span",null,Qe(ie(s)==="dark"?" ":" "),1)]),w("div",RO,[_[24]||(_[24]=w("i",{class:"fas fa-globe"},null,-1)),Tt(w("select",{"onUpdate:modelValue":_[5]||(_[5]=b=>We(r)?r.value=b:null),onChange:x,class:"mobile-lang-select"},[..._[23]||(_[23]=[w("option",{value:"ko-KR"},"",-1),w("option",{value:"en-US"},"English",-1)])],544),[[lo,ie(r)]])]),w("div",{class:"menu-item",onClick:_[6]||(_[6]=b=>c.value=!0)},[..._[25]||(_[25]=[w("i",{class:"fas fa-cog"},null,-1),De(),w("span",null,"",-1)])]),_[26]||(_[26]=w("hr",null,null,-1))]),be(v,{to:"/wishlist",class:"drop-link"},{default:kt(()=>[..._[27]||(_[27]=[w("i",{class:"fas fa-heart"},null,-1),De("  ",-1)])]),_:1}),w("button",{onClick:N,class:"logout-btn"},"")],2)])])]),c.value?(oe(),un(yO,{key:0,onClose:_[7]||(_[7]=b=>c.value=!1)})):It("",!0),be(Ho,{name:"slide-fade"},{default:kt(()=>[u.value?(oe(),de("div",{key:0,class:"mobile-menu-overlay",onClick:_[13]||(_[13]=xn(b=>u.value=!1,["self"]))},[w("div",{class:qe(["mobile-menu-content",{"light-mobile":ie(s)==="light"}])},[w("div",CO,[w("span",PO,Qe(ie(n)||"Guest"),1),w("i",{class:"fas fa-times close-menu",onClick:_[8]||(_[8]=b=>u.value=!1)})]),w("div",kO,[be(v,{to:"/",onClick:_[9]||(_[9]=b=>u.value=!1)},{default:kt(()=>[..._[31]||(_[31]=[De("",-1)])]),_:1}),be(v,{to:"/popular",onClick:_[10]||(_[10]=b=>u.value=!1)},{default:kt(()=>[..._[32]||(_[32]=[De(" ",-1)])]),_:1}),be(v,{to:"/wishlist",onClick:_[11]||(_[11]=b=>u.value=!1)},{default:kt(()=>[..._[33]||(_[33]=[De("  ",-1)])]),_:1}),be(v,{to:"/search",onClick:_[12]||(_[12]=b=>u.value=!1)},{default:kt(()=>[..._[34]||(_[34]=[De("",-1)])]),_:1})])],2)])):It("",!0)]),_:1})],34)}}}),hc=mn(NO,[["__scopeId","data-v-de530aa2"]]),OO={class:"poster-wrapper"},DO=["src","alt"],VO={class:"movie-info"},xO={class:"movie-title"},MO={class:"movie-meta"},LO={class:"rating"},FO={class:"genres"},UO=on({__name:"MovieCard",props:{movie:{}},emits:["click"],setup(t){const e=t,n=Hn(),s=X(!1),r=X([]),i=gt(()=>e.movie.poster_path?`https://image.tmdb.org/t/p/w342${e.movie.poster_path}`:"https://via.placeholder.com/342x513?text=No+Poster"),o=gt(()=>n.wishlist.some(u=>u.id===e.movie.id)),l=()=>{n.toggleLike(e.movie)},c=gt(()=>!e.movie.genre_ids||r.value.length===0?[]:r.value.filter(u=>e.movie.genre_ids.includes(u.id)));return pn(async()=>{try{const u=await qt.get("/genre/movie/list");r.value=u.data.genres}catch(u){console.error("Failed to fetch genres",u)}}),(u,h)=>{var d;return oe(),de("div",{class:"movie-card",onClick:h[0]||(h[0]=m=>u.$emit("click")),onMouseenter:h[1]||(h[1]=m=>s.value=!0),onMouseleave:h[2]||(h[2]=m=>s.value=!1)},[w("div",OO,[w("img",{src:i.value,alt:t.movie.title||t.movie.name,class:"movie-poster",loading:"lazy"},null,8,DO),w("button",{class:"like-btn",onClick:xn(l,["stop"])},[w("i",{class:qe(o.value?"fas fa-heart liked":"far fa-heart")},null,2)]),w("div",{class:qe(["poster-overlay",{"show-overlay":s.value}])},[w("div",VO,[w("h3",xO,Qe(t.movie.title||t.movie.name),1),w("div",MO,[w("span",LO,[h[3]||(h[3]=w("i",{class:"fas fa-star"},null,-1)),De(" "+Qe((d=t.movie.vote_average)==null?void 0:d.toFixed(1)),1)])]),w("div",FO,[(oe(!0),de(et,null,vn(c.value.slice(0,2),(m,g)=>(oe(),de("span",{key:m.id},Qe(m.name)+Qe(g<c.value.slice(0,2).length-1?"  ":""),1))),128))])])],2)])],32)}}}),Lo=mn(UO,[["__scopeId","data-v-63cd2960"]]),BO={class:"movie-row"},$O=on({__name:"MovieRow",props:{title:{},movies:{}},emits:["movie-click"],setup(t){const e=Hn(),n=X(null),s=X(!1),r=X(!1),i=l=>{if(!n.value)return;const{clientWidth:c}=n.value,u=l==="left"?-c:c;n.value.scrollBy({left:u,behavior:"smooth"}),setTimeout(o,500)},o=()=>{n.value&&(r.value=n.value.scrollLeft>0)};return pn(()=>{Rr(()=>o())}),(l,c)=>(oe(),de("div",BO,[w("h3",{class:qe(["row-title",{"light-text":ie(e).theme==="light"}])},Qe(t.title),3),w("div",{class:"slider-wrapper",onMouseenter:c[2]||(c[2]=u=>s.value=!0),onMouseleave:c[3]||(c[3]=u=>s.value=!1)},[r.value?(oe(),de("button",{key:0,class:"handle left-handle",onClick:c[0]||(c[0]=u=>i("left"))},[...c[4]||(c[4]=[w("i",{class:"fas fa-chevron-left"},null,-1)])])):It("",!0),w("div",{ref_key:"slider",ref:n,class:"slider",onScroll:o},[(oe(!0),de(et,null,vn(t.movies,u=>(oe(),un(Lo,{key:u.id,movie:u,class:"row-item",onClick:h=>l.$emit("movie-click",u)},null,8,["movie","onClick"]))),128))],544),w("button",{class:"handle right-handle",onClick:c[1]||(c[1]=u=>i("right"))},[...c[5]||(c[5]=[w("i",{class:"fas fa-chevron-right"},null,-1)])])],32)]))}}),Gi=mn($O,[["__scopeId","data-v-293a23e9"]]),jO={class:"modal-content"},qO={class:"modal-title"},HO={class:"modal-meta"},WO={class:"rating"},zO={class:"date"},GO={class:"modal-body"},KO={key:0,class:"genres"},QO={class:"overview"},JO={class:"chat-section"},YO={key:0,class:"empty-chat"},XO={class:"chat-bubble"},ZO={class:"chat-user"},eD={class:"chat-text"},tD={class:"chat-time"},nD=["onClick"],sD={class:"chat-input-area"},rD=["placeholder","disabled"],iD=["disabled"],oD=on({__name:"MovieModal",props:{movie:{}},emits:["close"],setup(t){const e=t,n=Hn(),{user:s}=pi(n),r=X(null),i=X([]),o=X(""),l=X(null);let c=null;const u=async()=>{try{const k=await qt.get(`/movie/${e.movie.id}`);r.value=k.data}catch{console.error("   ")}},h=()=>{const k=tg(yo,"movies",String(e.movie.id),"messages"),S=LN(k,FN("createdAt","asc"));c=$E(S,N=>{i.value=N.docs.map(O=>({id:O.id,...O.data()})),E()})},d=async()=>{if(!s.value||!o.value.trim())return;const k=o.value;o.value="";try{const S=tg(yo,"movies",String(e.movie.id),"messages");await qN(S,{text:k,uid:s.value.uid,email:s.value.email,createdAt:WN()})}catch(S){console.error(" ",S),alert("  ")}},m=async k=>{if(confirm("?"))try{await jN(yl(yo,"movies",String(e.movie.id),"messages",k))}catch(S){console.error(S)}},g=k=>{if(!k)return"";const S=k.toDate();return`${S.getHours()}:${String(S.getMinutes()).padStart(2,"0")}`},E=()=>{Rr(()=>{l.value&&(l.value.scrollTop=l.value.scrollHeight)})};return pn(()=>{u(),h()}),Cr(()=>{c&&c()}),(k,S)=>{var N;return oe(),de("div",{class:"modal-overlay",onClick:S[2]||(S[2]=xn(O=>k.$emit("close"),["self"]))},[w("div",jO,[w("button",{class:"close-btn",onClick:S[0]||(S[0]=O=>k.$emit("close"))},[...S[3]||(S[3]=[w("i",{class:"fas fa-times"},null,-1)])]),w("div",{class:"modal-header",style:Uo({backgroundImage:`url(https://image.tmdb.org/t/p/original${t.movie.backdrop_path||t.movie.poster_path})`})},[S[4]||(S[4]=w("div",{class:"modal-gradient"},null,-1)),w("div",qO,[w("h1",null,Qe(t.movie.title),1),w("div",HO,[w("span",WO," "+Qe((N=t.movie.vote_average)==null?void 0:N.toFixed(1)),1),w("span",zO,Qe(t.movie.release_date),1)])])],4),w("div",GO,[r.value&&r.value.genres?(oe(),de("div",KO,[(oe(!0),de(et,null,vn(r.value.genres,O=>(oe(),de("span",{key:O.id,class:"genre-tag"},Qe(O.name),1))),128))])):It("",!0),w("p",QO,Qe(t.movie.overview||"  ."),1),S[7]||(S[7]=w("hr",{class:"divider"},null,-1)),w("div",JO,[S[6]||(S[6]=w("h3",null,"  ",-1)),w("div",{class:"chat-list",ref_key:"chatListRef",ref:l},[i.value.length===0?(oe(),de("div",YO,"     ! ")):It("",!0),(oe(!0),de(et,null,vn(i.value,O=>{var x,F;return oe(),de("div",{key:O.id,class:qe(["chat-item",{"my-chat":O.uid===((x=ie(s))==null?void 0:x.uid)}])},[w("div",XO,[w("span",ZO,Qe(O.email?O.email.split("@")[0]:""),1),w("p",eD,Qe(O.text),1),w("span",tD,Qe(g(O.createdAt)),1)]),O.uid===((F=ie(s))==null?void 0:F.uid)?(oe(),de("button",{key:0,class:"delete-btn",onClick:U=>m(O.id)},[...S[5]||(S[5]=[w("i",{class:"fas fa-times"},null,-1)])],8,nD)):It("",!0)],2)}),128))],512),w("div",sD,[Tt(w("input",{"onUpdate:modelValue":S[1]||(S[1]=O=>o.value=O),onKeyup:_h(d,["enter"]),type:"text",placeholder:ie(s)?"    ...":" .",disabled:!ie(s)},null,40,rD),[[Cs,o.value]]),w("button",{class:"send-btn",onClick:d,disabled:!ie(s)||!o.value.trim()},"  ",8,iD)])])])])])}}}),fc=mn(oD,[["__scopeId","data-v-264c5988"]]),aD={class:"home-container"},lD={key:0,class:"hero-wrapper"},cD={class:"hero-content"},uD={class:"hero-title"},hD={class:"hero-overview"},fD={class:"hero-buttons"},dD={key:1,class:"hero-skeleton"},pD={class:"main-content"},mD=on({__name:"Home",setup(t){const e=X(null),n=X(0);let s=null;const r=X([]),i=X([]),o=X([]),l=X([]),c=X([]),u=X(!1),h=X(null),d=gt(()=>e.value?{backgroundImage:`url(https://image.tmdb.org/t/p/original${e.value.backdrop_path||e.value.poster_path})`,backgroundPosition:"center top",backgroundSize:"cover",backgroundRepeat:"no-repeat"}:{}),m=O=>{h.value=O,u.value=!0},g=(O,x)=>O&&O.length>x?O.substr(0,x):O||"",E=()=>{r.value.length>0&&(e.value=r.value[n.value])},k=()=>{n.value=(n.value+1)%r.value.length,E(),N()},S=()=>{n.value=(n.value-1+r.value.length)%r.value.length,E(),N()},N=()=>{clearInterval(s),s=setInterval(k,6e4)};return pn(async()=>{const[O,x,F,U,B]=await Promise.all([qt.get("/movie/popular"),qt.get("/movie/now_playing"),qt.get("/movie/top_rated"),qt.get("/discover/movie",{params:{with_genres:28}}),qt.get("/discover/movie",{params:{with_genres:35}})]);r.value=O.data.results,i.value=x.data.results,o.value=F.data.results,l.value=U.data.results,c.value=B.data.results,E(),N()}),Cr(()=>{clearInterval(s)}),(O,x)=>(oe(),de("div",aD,[be(hc),e.value?(oe(),de("div",lD,[be(Ho,{name:"fade-hero",mode:"out-in"},{default:kt(()=>[(oe(),de("header",{key:e.value.id,class:"hero-banner",style:Uo(d.value)},[x[7]||(x[7]=w("div",{class:"hero-fade-top"},null,-1)),w("button",{class:"hero-arrow left",onClick:S},[...x[3]||(x[3]=[w("i",{class:"fas fa-chevron-left"},null,-1)])]),w("div",cD,[w("h1",uD,Qe(e.value.title||e.value.name),1),w("p",hD,[De(Qe(g(e.value.overview,150))+" ",1),e.value.overview.length>150?(oe(),de("span",{key:0,class:"read-more",onClick:x[0]||(x[0]=xn(F=>m(e.value),["stop"]))},"  ")):It("",!0)]),w("div",fD,[x[5]||(x[5]=w("button",{class:"btn btn-play"},[w("i",{class:"fas fa-play"}),De(" ")],-1)),w("button",{class:"btn btn-info",onClick:x[1]||(x[1]=F=>m(e.value))},[...x[4]||(x[4]=[w("i",{class:"fas fa-info-circle"},null,-1),De("  ",-1)])])])]),w("button",{class:"hero-arrow right",onClick:k},[...x[6]||(x[6]=[w("i",{class:"fas fa-chevron-right"},null,-1)])]),x[8]||(x[8]=w("div",{class:"hero-fade-bottom"},null,-1))],4))]),_:1})])):(oe(),de("div",dD)),w("main",pD,[be(Gi,{title:" ",movies:r.value,onMovieClick:m},null,8,["movies"]),be(Gi,{title:"  ",movies:i.value,onMovieClick:m},null,8,["movies"]),be(Gi,{title:"  ",movies:o.value,onMovieClick:m},null,8,["movies"]),be(Gi,{title:" ",movies:l.value,onMovieClick:m},null,8,["movies"]),be(Gi,{title:"",movies:c.value,onMovieClick:m},null,8,["movies"])]),u.value?(oe(),un(fc,{key:2,movie:h.value,onClose:x[2]||(x[2]=F=>u.value=!1)},null,8,["movie"])):It("",!0)]))}}),gD=mn(mD,[["__scopeId","data-v-0edd3539"]]),_D={class:"auth-page"},yD={class:"form-container sign-up-container"},vD={class:"input-group"},ED={class:"input-group"},wD={class:"input-group"},TD={class:"checkbox-group"},ID={class:"form-container sign-in-container"},AD={class:"input-group"},bD={class:"input-group"},SD={class:"options-row"},RD={class:"checkbox-group"},CD=on({__name:"SignIn",setup(t){const e=Hn(),n=Ll(),s=X(!1),r=X(""),i=X(""),o=X(!1),l=X(""),c=X(""),u=X(""),h=X(!1),d=S=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(S);pn(()=>{const S=localStorage.getItem("saved-email");S&&(r.value=S,o.value=!0)});const m=()=>{s.value=!s.value},g=async()=>{try{await e.loginWithGoogle(),n.push("/")}catch{alert("  .   .")}},E=async()=>{if(!r.value||!i.value){alert("   .");return}if(!d(r.value)){alert("   .");return}o.value?localStorage.setItem("saved-email",r.value):localStorage.removeItem("saved-email");try{await e.loginWithEmail(r.value,i.value),alert(" !"),n.push("/")}catch(S){S.code==="auth/invalid-credential"?alert("    ."):alert(" : "+S.message)}},k=async()=>{if(!d(l.value)){alert("   .");return}if(c.value.length<6){alert("  6  .");return}if(c.value!==u.value){alert("  .");return}if(!h.value){alert("      .");return}try{await e.registerWithEmail(l.value,c.value),alert("!  ."),n.push("/")}catch(S){S.code==="auth/email-already-in-use"?alert("  ."):alert(" : "+S.message)}};return(S,N)=>(oe(),de("div",_D,[N[29]||(N[29]=w("div",{class:"logo-area"},[w("img",{src:Zu,alt:"YJYFLIX",class:"logo-img"})],-1)),w("div",{class:qe(["container",{"right-panel-active":s.value}])},[w("div",yD,[w("form",{onSubmit:xn(k,["prevent"])},[N[13]||(N[13]=w("h1",null," ",-1)),w("div",{class:"social-container"},[w("button",{type:"button",class:"social-btn google-btn",onClick:g},[...N[7]||(N[7]=[w("i",{class:"fab fa-google"},null,-1),De(" Google  ",-1)])])]),N[14]||(N[14]=w("div",{class:"divider"},[w("span",null,"  ")],-1)),w("div",vD,[Tt(w("input",{type:"email","onUpdate:modelValue":N[0]||(N[0]=O=>l.value=O),required:"",placeholder:" "},null,512),[[Cs,l.value]]),N[8]||(N[8]=w("label",null," ",-1))]),w("div",ED,[Tt(w("input",{type:"password","onUpdate:modelValue":N[1]||(N[1]=O=>c.value=O),required:"",placeholder:" ",minlength:"6"},null,512),[[Cs,c.value]]),N[9]||(N[9]=w("label",null," (6 )",-1))]),w("div",wD,[Tt(w("input",{type:"password","onUpdate:modelValue":N[2]||(N[2]=O=>u.value=O),required:"",placeholder:" "},null,512),[[Cs,u.value]]),N[10]||(N[10]=w("label",null," ",-1))]),w("div",TD,[Tt(w("input",{type:"checkbox",id:"terms","onUpdate:modelValue":N[3]||(N[3]=O=>h.value=O)},null,512),[[zd,h.value]]),N[11]||(N[11]=w("label",{for:"terms"},"     . ()",-1))]),N[15]||(N[15]=w("button",{class:"action-btn"}," ",-1)),w("p",{class:"mobile-text"},[N[12]||(N[12]=De("  ? ",-1)),w("span",{onClick:m},"")])],32)]),w("div",ID,[w("form",{onSubmit:xn(E,["prevent"])},[N[22]||(N[22]=w("h1",null,"",-1)),w("div",{class:"social-container"},[w("button",{type:"button",class:"social-btn google-btn",onClick:g},[...N[16]||(N[16]=[w("i",{class:"fab fa-google"},null,-1),De(" Google  ",-1)])])]),N[23]||(N[23]=w("div",{class:"divider"},[w("span",null," /")],-1)),w("div",AD,[Tt(w("input",{type:"email","onUpdate:modelValue":N[4]||(N[4]=O=>r.value=O),required:"",placeholder:" "},null,512),[[Cs,r.value]]),N[17]||(N[17]=w("label",null," ",-1))]),w("div",bD,[Tt(w("input",{type:"password","onUpdate:modelValue":N[5]||(N[5]=O=>i.value=O),required:"",placeholder:" "},null,512),[[Cs,i.value]]),N[18]||(N[18]=w("label",null,"",-1))]),w("div",SD,[w("div",RD,[Tt(w("input",{type:"checkbox",id:"rememberMe","onUpdate:modelValue":N[6]||(N[6]=O=>o.value=O)},null,512),[[zd,o.value]]),N[19]||(N[19]=w("label",{for:"rememberMe"}," ",-1))]),N[20]||(N[20]=w("a",{href:"#",class:"forgot"}," ?",-1))]),N[24]||(N[24]=w("button",{class:"action-btn"},"",-1)),w("p",{class:"mobile-text"},[N[21]||(N[21]=De("   ? ",-1)),w("span",{onClick:m},"")])],32)]),w("div",{class:"overlay-container"},[w("div",{class:"overlay"},[w("div",{class:"overlay-panel overlay-left"},[N[25]||(N[25]=w("h1",null," !",-1)),N[26]||(N[26]=w("p",null,[De("YJYFLIX  "),w("br"),De("  .")],-1)),w("button",{class:"ghost-btn",onClick:m},"")]),w("div",{class:"overlay-panel overlay-right"},[N[27]||(N[27]=w("h1",null,[De(" "),w("br"),De("?")],-1)),N[28]||(N[28]=w("p",null,[De("    "),w("br"),De("  .")],-1)),w("button",{class:"ghost-btn",onClick:m},"")])])])],2)]))}}),PD=mn(CD,[["__scopeId","data-v-d6026882"]]),kD={class:"page-container"},ND={class:"content"},OD={key:0,class:"empty-state"},DD={key:1,class:"grid"},VD={key:2,class:"empty-mini"},xD={key:3,class:"grid"},MD=on({__name:"Wishlist",setup(t){const e=Hn(),{wishlist:n,wishlistSort:s,watchHistory:r}=pi(e);Ll();const i=X(!1),o=X(null),l=X(!1),c=m=>{o.value=m,i.value=!0},u=()=>{l.value=window.scrollY>500},h=()=>{window.scrollTo({top:0,behavior:"smooth"})},d=gt(()=>{const m=[...n.value];return s.value==="alpha"?m.sort((g,E)=>g.title.localeCompare(E.title)):m.reverse()});return pn(()=>window.addEventListener("scroll",u)),Cr(()=>window.removeEventListener("scroll",u)),(m,g)=>(oe(),de("div",kD,[be(hc),w("div",ND,[g[6]||(g[6]=w("h2",null,"  ",-1)),ie(n).length===0?(oe(),de("div",OD,[g[2]||(g[2]=w("i",{class:"fas fa-heart-broken empty-icon"},null,-1)),g[3]||(g[3]=w("p",{class:"empty-msg"},"   .",-1)),g[4]||(g[4]=w("p",{class:"empty-sub"},"    '' !",-1)),w("button",{class:"go-search-btn",onClick:g[0]||(g[0]=E=>m.$router.push("/popular"))},"   ")])):(oe(),de("div",DD,[(oe(!0),de(et,null,vn(d.value,E=>(oe(),un(Lo,{key:E.id,movie:E,onClick:k=>c(E)},null,8,["movie","onClick"]))),128))])),g[7]||(g[7]=w("h2",{class:"history-title"},"   (History)",-1)),ie(r).length===0?(oe(),de("div",VD,[...g[5]||(g[5]=[w("p",{class:"sub-text"},"   .",-1)])])):(oe(),de("div",xD,[(oe(!0),de(et,null,vn(ie(r),E=>(oe(),un(Lo,{key:`history-${E.id}`,movie:E,onClick:k=>c(E)},null,8,["movie","onClick"]))),128))]))]),be(Ho,{name:"fade"},{default:kt(()=>[Tt(w("button",{class:"top-btn",onClick:h},[...g[8]||(g[8]=[w("i",{class:"fas fa-arrow-up"},null,-1)])],512),[[S_,l.value]])]),_:1}),i.value?(oe(),un(fc,{key:0,movie:o.value,onClose:g[1]||(g[1]=E=>i.value=!1)},null,8,["movie"])):It("",!0)]))}}),LD=mn(MD,[["__scopeId","data-v-50e4e84b"]]),FD={},UD={class:"netflix-skeleton"};function BD(t,e){return oe(),de("div",UD)}const $D=mn(FD,[["render",BD],["__scopeId","data-v-c0facc96"]]),jD={class:"popular-container"},qD={class:"content"},HD={class:"header-section"},WD={class:"mode-toggle"},zD={class:"grid-container"},GD={key:0,class:"pagination"},KD=["disabled"],QD=["disabled"],JD={class:"page-num"},YD={key:0,class:"loading-more"},XD=on({__name:"Popular",setup(t){const e=Hn(),{viewMode:n}=pi(e),s=X([]),r=X(1),i=X(1),o=X(!1),l=X(!1),c=X(null),u=X(!1),h=X(!1),d=X(null),m=U=>{d.value=U,h.value=!0},g=()=>{u.value=window.scrollY>500},E=()=>{window.scrollTo({top:0,behavior:"smooth"})},k=async(U,B)=>{B?l.value=!0:o.value=!0;try{const T=await qt.get("/movie/popular",{params:{page:U}});if(i.value=T.data.total_pages>500?500:T.data.total_pages,B){const _=T.data.results.filter(v=>!s.value.some(b=>b.id===v.id));s.value=[...s.value,..._]}else s.value=T.data.results}catch(T){console.error(T)}finally{o.value=!1,l.value=!1}},S=async U=>{e.setViewMode(U),r.value=1,s.value=[],window.scrollTo(0,0),U==="infinite"?await N():k(1,!1)},N=async()=>{o.value=!0;const U=qt.get("/movie/popular",{params:{page:1}}),B=qt.get("/movie/popular",{params:{page:2}}),T=qt.get("/movie/popular",{params:{page:3}});try{const[_,v,b]=await Promise.all([U,B,T]),R=[..._.data.results,...v.data.results,...b.data.results].filter((A,_e,Le)=>Le.findIndex(Te=>Te.id===A.id)===_e);s.value=R,r.value=3,i.value=_.data.total_pages}catch(_){console.error(_)}finally{o.value=!1}},O=U=>{U<1||U>i.value||(r.value=U,s.value=[],window.scrollTo(0,0),k(U,!1))};let x=null;const F=()=>{x&&x.disconnect(),x=new IntersectionObserver(U=>{U[0].isIntersecting&&!o.value&&!l.value&&(r.value++,k(r.value,!0))}),c.value&&x.observe(c.value)};return gr(()=>[n.value,c.value],()=>{n.value==="infinite"&&c.value?F():x&&x.disconnect()}),pn(async()=>{n.value==="infinite"?await N():await k(1,!1),window.addEventListener("scroll",g)}),Cr(()=>{x&&x.disconnect(),window.removeEventListener("scroll",g)}),(U,B)=>(oe(),de("div",jD,[be(hc),w("div",qD,[w("div",HD,[B[9]||(B[9]=w("h2",null," ",-1)),w("div",WD,[w("button",{class:qe({active:ie(n)==="table"}),onClick:B[0]||(B[0]=T=>S("table")),title:" "},[...B[7]||(B[7]=[w("i",{class:"fas fa-th-large"},null,-1)])],2),w("button",{class:qe({active:ie(n)==="infinite"}),onClick:B[1]||(B[1]=T=>S("infinite")),title:" "},[...B[8]||(B[8]=[w("i",{class:"fas fa-infinity"},null,-1)])],2)])]),w("div",zD,[o.value&&s.value.length===0?(oe(),de(et,{key:0},vn(10,T=>be($D,{key:`skeleton-${T}`})),64)):It("",!0),(oe(!0),de(et,null,vn(s.value,T=>(oe(),un(Lo,{key:T.id,movie:T,onClick:_=>m(T)},null,8,["movie","onClick"]))),128))]),ie(n)==="table"&&!o.value?(oe(),de("div",GD,[w("button",{disabled:r.value===1,onClick:B[2]||(B[2]=T=>O(1))},[...B[10]||(B[10]=[w("i",{class:"fas fa-angle-double-left"},null,-1)])],8,KD),w("button",{disabled:r.value===1,onClick:B[3]||(B[3]=T=>O(r.value-1))},"",8,QD),w("span",JD,Qe(r.value)+" / "+Qe(i.value),1),w("button",{onClick:B[4]||(B[4]=T=>O(r.value+1))},""),w("button",{onClick:B[5]||(B[5]=T=>O(i.value))},[...B[11]||(B[11]=[w("i",{class:"fas fa-angle-double-right"},null,-1)])])])):It("",!0),ie(n)==="infinite"?(oe(),de("div",{key:1,ref_key:"observerElement",ref:c,class:"observer-sentinel"},[l.value?(oe(),de("div",YD,[...B[12]||(B[12]=[w("i",{class:"fas fa-spinner fa-spin"},null,-1),De("   ... ",-1)])])):It("",!0)],512)):It("",!0)]),be(Ho,{name:"fade"},{default:kt(()=>[Tt(w("button",{class:"top-btn",onClick:E},[...B[13]||(B[13]=[w("i",{class:"fas fa-arrow-up"},null,-1)])],512),[[S_,u.value]])]),_:1}),h.value?(oe(),un(fc,{key:0,movie:d.value,onClose:B[6]||(B[6]=T=>h.value=!1)},null,8,["movie"])):It("",!0)]))}}),ZD=mn(XD,[["__scopeId","data-v-4238e60a"]]),eV={class:"search-container"},tV={class:"content"},nV={class:"search-controls"},sV={class:"search-bar"},rV={class:"filters"},iV=["value"],oV={key:0,class:"history-section"},aV={class:"history-tags"},lV=["onClick"],cV=["onClick"],uV={key:1,class:"loading-msg"},hV={key:2,class:"no-result"},fV={key:3,class:"grid-container"},dV=on({__name:"Search",setup(t){const e=Hn(),{searchHistory:n}=pi(e),s=X([]),r=X([]),i=X(""),o=X(""),l=X(""),c=X(""),u=X(!1),h=H_(),d=X(!1),m=X(null),g=F=>{m.value=F,d.value=!0},E=()=>{i.value.trim()&&e.addSearchHistory(i.value),O()},k=F=>{i.value=F,O()},S=F=>e.removeSearchHistory(F),N=async()=>{try{const F=await qt.get("/genre/movie/list");r.value=F.data.genres}catch{}},O=async()=>{u.value=!0;try{let F="/discover/movie";const U={page:1,sort_by:"popularity.desc"};i.value.trim()?(F="/search/movie",U.query=i.value):(o.value&&(U.with_genres=o.value),l.value&&(U["vote_average.gte"]=l.value),c.value&&(U.with_original_language=c.value));const B=await qt.get(F,{params:U});s.value=B.data.results}catch(F){console.error(F)}finally{u.value=!1}},x=()=>{i.value="",o.value="",l.value="",c.value="",O()};return gr(()=>h.query.q,F=>{F&&(i.value=F,e.addSearchHistory(i.value),O())}),pn(async()=>{await N(),h.query.q&&(i.value=h.query.q,e.addSearchHistory(i.value)),O()}),(F,U)=>(oe(),de("div",eV,[be(hc),w("div",tV,[U[12]||(U[12]=w("h2",null," ",-1)),w("div",nV,[w("div",sV,[w("button",{class:"search-btn",onClick:E,title:""},[...U[5]||(U[5]=[w("i",{class:"fas fa-search"},null,-1)])]),Tt(w("input",{"onUpdate:modelValue":U[0]||(U[0]=B=>i.value=B),onKeyup:_h(E,["enter"]),placeholder:" ...",type:"text"},null,544),[[Cs,i.value]])]),w("div",rV,[Tt(w("select",{"onUpdate:modelValue":U[1]||(U[1]=B=>o.value=B),onChange:E},[U[6]||(U[6]=w("option",{value:""}," ",-1)),(oe(!0),de(et,null,vn(r.value,B=>(oe(),de("option",{key:B.id,value:B.id},Qe(B.name),9,iV))),128))],544),[[lo,o.value]]),Tt(w("select",{"onUpdate:modelValue":U[2]||(U[2]=B=>l.value=B),onChange:E},[...U[7]||(U[7]=[w("option",{value:""}," ",-1),w("option",{value:"9"}," 9 ",-1),w("option",{value:"7"}," 7 ",-1),w("option",{value:"5"}," 5 ",-1)])],544),[[lo,l.value]]),Tt(w("select",{"onUpdate:modelValue":U[3]||(U[3]=B=>c.value=B),onChange:E},[...U[8]||(U[8]=[w("option",{value:""}," ()",-1),w("option",{value:"ko"}," ",-1),w("option",{value:"en"}," ",-1),w("option",{value:"ja"}," ",-1)])],544),[[lo,c.value]]),w("button",{onClick:x,class:"reset-btn"},[...U[9]||(U[9]=[w("i",{class:"fas fa-undo"},null,-1),De(" ",-1)])])])]),ie(n).length>0&&!i.value?(oe(),de("div",oV,[U[10]||(U[10]=w("h3",null," ",-1)),w("div",aV,[(oe(!0),de(et,null,vn(ie(n),B=>(oe(),de("span",{key:B,class:"tag",onClick:T=>k(B)},[De(Qe(B)+" ",1),w("i",{class:"fas fa-times delete-btn",onClick:xn(T=>S(B),["stop"])},null,8,cV)],8,lV))),128))])])):It("",!0),u.value?(oe(),de("div",uV,[...U[11]||(U[11]=[w("i",{class:"fas fa-spinner fa-spin"},null,-1),De("  ...",-1)])])):s.value.length===0?(oe(),de("div",hV,"  .")):(oe(),de("div",fV,[(oe(!0),de(et,null,vn(s.value,B=>(oe(),un(Lo,{key:B.id,movie:B,onClick:T=>g(B)},null,8,["movie","onClick"]))),128))]))]),d.value?(oe(),un(fc,{key:0,movie:m.value,onClose:U[4]||(U[4]=B=>d.value=!1)},null,8,["movie"])):It("",!0)]))}}),pV=mn(dV,[["__scopeId","data-v-faaffc28"]]),mV=[{path:"/",name:"Home",component:gD},{path:"/signin",name:"SignIn",component:PD},{path:"/wishlist",name:"Wishlist",component:LD},{path:"/popular",name:"Popular",component:ZD},{path:"/search",name:"Search",component:pV}],gV=ZA({history:NA("/"),routes:mV}),wf=LI(nO);wf.use(BI());wf.use(gV);wf.mount("#app");
